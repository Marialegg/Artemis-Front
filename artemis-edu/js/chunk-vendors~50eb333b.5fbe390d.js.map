{"version":3,"sources":["webpack:///./node_modules/@syncfusion/ej2-pdfviewer/src/pdfviewer/form-fields/form-fields.js"],"names":["FormFields","viewer","base","this","maintainTabIndex","maintanMinTabindex","isSignatureField","isKeyDownCheck","readOnlyCollection","isSignatureRendered","signatureFieldCollection","selectedIndex","pdfViewer","pdfViewerBase","prototype","renderFormFields","pageIndex","maxTabIndex","minTabIndex","data","getItemFromSessionStorage","formFieldsData","JSON","parse","textLayer","document","getElementById","element","id","canvasElement","count","flag","i","length","formField","ActualFieldName","PageIndex","parseInt","FieldName","split","i_1","currentData","IsInitialField","Name","font","formDesigner","parseFloat","fontFamily","fontStyle","fontSize","Height","Italic","Bold","Strikeout","Underline","ConvertPointToPixel","Size","textAlignment","Alignment","backgroundColor","bounds","backColor","R","G","B","IsTransparent","rgbaToHex","fontColor","left","X","top_1","Y","width","Width","height","boundArray","top","isFieldRotated","rotateFieldAngle","getBounds","getAngle","foreColor","borderColor","borderRGB","borderWidth","fieldProperties","pageNumber","name","tooltip","value","isChecked","isSelected","color","thickness","isMultiline","Multiline","rotateAngle","isReadOnly","isRequired","alignment","options","getListValues","maxLength","MaxLength","visibility","Visible","isItalic","isBold","isStrikeout","isUnderline","formFieldCollections","fieldType","getFormFieldType","IsRequired","addedElement1","formDesignerModule","addFormField","parentElement","style","childNodes","disabled","addSignaturePath","Value","renderExistingAnnnot","isLoadedFormFieldAdded","field","createFormFields","inputField","currentField","signCount","divElement","createParentElement","font_1","transform","applyPosition","InsertSpaces","zoomFactor","getZoomFactor","font_2","letterSpacing","paddingLeft","j","type","applyCommonProperties","checkIsReadonly","applyTabIndex","checkIsRequiredField","applyDefaultColor","updateFormFieldsCollection","appendChild","position","addEventListener","focusFormFields","bind","blurFormFields","updateFormFields","changeFormFields","updateFormFieldsValue","updateSameFieldsValue","window","sessionStorage","removeItem","documentId","setItemInSessionStorage","isFocusField","focusField","focus","y","getPageHeight","bookmark","goToBookmark","trim","str","replace","rgba","inParts","substring","indexOf","r","g","b","a","toFixed","outParts","toString","Math","round","forEach","part","join","listItem","push","itemName","itemValue","createElement","background","angle","pageDetails","pageSize","rotation","nextField","signatureFieldNavigate","previousField","nextSign","isNextSignField","signatureFields","getSignField","currentTarget","FormField","uniqueID","getSignatureIndex","currentSignatureIndex","signatureCount","isNextSign","isFirstNavigate","signatureIndex","renderSignatureField","currentSignIndex","curSignIndex","curSignIndexId","signatureFieldData","isRender","annotationModule","findRenderPageList","navigation","goToPage","className","select","setFocus","removeFocus","signatureElement","classList","add","signatureFieldId","remove","formFieldsModule","getFormDesignerSignField","getFormFieldSignField","retreiveFormFieldsData","formFieldCollection","retriveFieldName","retriveCurrentValue","fontName","isCollection","top_2","addedElement","IsReadonly","Selected","SelectedValue","FontFamily","findIndex","el","updateFormFieldValues","formFields","currentElement","cursor","updateDataInSession","GroupName","Text","SelectedList","getSignatureBounds","LineBounds","bound","x","downloadFormFieldsData","datas","fieldDatas","m","nonFillableFields","validateForm","fieldValue","CheckboxIndex","undefined","childItems","childItemsText","m_1","stringify","csData","FontSize","collectionData","Bounds","lineBounds","event","target","backgroundcolor","currentIndex","lastIndexOf","currentColor","slice","fireFocusOutFormField","checked","fireButtonFieldClickEvent","fireFormFieldClickEvent","drawSignature","signatureType","fontname","annot","targetBounds","parentElementBounds","targetName","offsetParent","fieldName","Key","elementId","signatureField","nameTable","getBoundingClientRect","drawSignatureWithTool","nextSibling","isInitialFieldToolbarSelection","currentValue","signatureModule","outputString","currentFont","zoomvalue","currentWidth","currentHeight","currentLeft","currentTop","currentPage","nextElementSibling","charAt","signString","saveImageString","signatureFontFamily","signatureFontSize","rotateAngleString","getSignBounds","signatureFitMode","getDefaultBoundsforSign","modifiedDate","shapeAnnotationType","opacity","annotName","comments","review","state","stateModel","author","textWidth","getTextWidth","widthRatio","getFontSize","floor","image","Image","src","difference","hightDifference","heightRatio","abs","signatureBounds","updateSignatureAspectRatio","obj","wrapper","children","currentSignatureAnnot","addSignatureCollection","canvass","renderDrawing","showSignatureDialog","key","updateSignatureDataInSession","pointerEvents","annotation","addAction","fireSignatureAdd","hideSignaturePanel","_loop_1","formFieldIndex","this_1","signatureBound","updateFormFieldCollections","updateFormFieldPropertiesChanges","isDraw","signatureId","signIcon","signLeft","which","tabIndex","currentFields","getElementsByClassName","preventDefault","textLayer_1","istabindexed","tabindex","l","contains","currentTarget_1","calculateSignatureBounds","signatureCavasWidth","signatureCavasHeight","newdifferenceX","newdifferenceY","isSignature","ratioX","ratioY","isSignatureStretched","isHeightStretched","leftDifference","topDifference","handWrittenSignatureSettings","fieldWidth","clientWidth","fieldHeight","clientHeight","fieldWidthRatio","fieldHeightRatio","canvasWidthRatio","canvasHeightRatio","fieldRotation","RotationAngle","ratioDifference","currentLeftDiff","currentTopDiff","leftValueDiff","topValueDiff","minimumX","minimumY","maximumX","maximumY","signatureCanvas","val","point1","point2","signBounds","currentPageNumber","pageDiv","signaturePath","updateDocumentEditedProperty","FormFieldsData","signField","size","text","childrens","k","selectedOptions","z","index","TextList","getAttribute","list","selectedItem","point","topLeft","updateFormDesignerFieldInSessionStorage","formFieldAnnotationType","removeExistingFormFields","deleteFormField","inputdiv","signIconWidth","signIconHeght","widthDifference","IsSignatureField","zIndex","printContainer","createTextBoxField","createRadioBoxField","createDropDownField","createListBoxField","createSignatureField","createButtonField","resize","addAlignmentPropety","enableAutoComplete","autocomplete","isReadonly","n","enableFormFields","BackColor","FontColor","formFieldsReadOnly","makeformFieldsReadonly","TabIndex","max","min","required","border","BorderColor","BorderWidth","borderStyle","BorderStyle","addBorderStylePropety","textAlign","inputFields","setAttribute","option","selected","innerHTML","MultiSelect","multiple","isInitialField","signIndicator","signatureFieldIndicatorWidth","signatureFieldSettings","signatureIndicatorSettings","span","annotBounds","fieldBounds","isDevice","enableDesktopMode","padding","boxSizing","signData","getBoundsPosition","top_3","fontHeight","fontWeight","setStyleToTextDiv","newBounds","updateSignatureBounds","startsWith","bound_1","tempBounds","deleteAnnotationById","signatureFieldElement","resetFormFields","formFieldData","clearFormFieldStorage","sessionSize","maxSessionSize","storageLength","annotationList","formFieldStorage","getItem","clearFormFields","isFirstRadio","number","destroy","getModuleName","canvas","context","getContext","getComputedStyle","body","measureText"],"mappings":"wHAAA,0EAOIA,EAA4B,WAQ5B,SAASA,EAAWC,EAAQC,GAExBC,KAAKC,iBAAmB,GAExBD,KAAKE,mBAAqB,GAC1BF,KAAKG,kBAAmB,EACxBH,KAAKI,gBAAiB,EAKtBJ,KAAKK,mBAAqB,GAC1BL,KAAKM,qBAAsB,EAK3BN,KAAKO,yBAA2B,GAChCP,KAAKQ,cAAgB,GACrBR,KAAKS,UAAYX,EACjBE,KAAKU,cAAgBX,EAmkFzB,OA7jFAF,EAAWc,UAAUC,iBAAmB,SAAUC,GAK9C,GAJAb,KAAKc,YAAc,EACnBd,KAAKe,aAAe,EAEpBf,KAAKgB,KAAOhB,KAAKU,cAAcO,0BAA0B,eACrDjB,KAAKgB,KAAM,CAEXhB,KAAKkB,eAAiBC,KAAKC,MAAMpB,KAAKgB,MACtC,IAAIK,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,cAAgBZ,GAChFa,EAAgBJ,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,eAAiBZ,GACrFc,OAAQ,EACZ,GAA4B,OAAxB3B,KAAKkB,gBAA6C,OAAlBQ,GAAwC,OAAdL,EAAoB,CAE9E,IADA,IAAIO,GAAO,EACFC,EAAI,EAAGA,EAAI7B,KAAKkB,eAAeY,OAAQD,IAAK,CACjD,IAAIE,EAAY/B,KAAKkB,eAAeW,IAC/BD,GAAQ,eAAkBG,EAAUC,kBAAoBD,EAAUE,YAAcpB,IACjFc,EAAQO,SAASH,EAAUI,UAAUC,MAAM,KAAK,IAChDR,GAAO,GAGf,IAAK,IAAIS,EAAM,EAAGA,EAAMrC,KAAKkB,eAAeY,OAAQO,IAAO,CAEvD,IAAIC,EAActC,KAAKkB,eAAemB,GACtC,GAA8B,KAA1BC,EAAYH,UAAkB,CAC1BG,EAAYC,iBACZD,EAAYE,KAAO,gBAGvB,IAAIC,EAAOH,EAAY,QACvB,GAAItC,KAAKS,UAAUiC,cACf,GAAIC,WAAWL,EAAY,eAAiBzB,EAAW,CACnD,IAAI+B,OAAa,EACbC,OAAY,EACZC,OAAW,EACF,OAATL,GAAiBA,EAAKM,SACtBH,EAAaH,EAAKD,KACdC,EAAKO,SACLH,EAAY,UAEZJ,EAAKQ,OACLJ,EAAY,QAEZJ,EAAKS,YACLL,EAAY,iBAEZJ,EAAKU,YACLN,EAAY,aAEhBC,EAAW9C,KAAKoD,oBAAoBX,EAAKY,OAE7C,IAAIC,EAA0C,IAA1BhB,EAAYiB,UAAkB,QAAqC,IAA1BjB,EAAYiB,UAAkB,SAAW,OAClGC,EAAkBlB,EAAY,aAC9BmB,EAASnB,EAAY,cACrBoB,EAAY,QAAUF,EAAgBG,EAAI,IAAMH,EAAgBI,EAAI,IAAMJ,EAAgBK,EAA9E,OACkB,IAA9BvB,EAAYwB,gBACZJ,EAAY,iBAEhBA,EAAY1D,KAAK+D,UAAUL,GAET,cAAdA,IACAA,EAAY,aAGhB,IAAIM,EAAY1B,EAAY,aACxB2B,EAAOjE,KAAKoD,oBAAoBK,EAAOS,GACvCC,EAAQnE,KAAKoD,oBAAoBK,EAAOW,GACxCC,EAAQrE,KAAKoD,oBAAoBK,EAAOa,OACxCC,EAASvE,KAAKoD,oBAAoBK,EAAOV,QACzCyB,EAAa,CAAEP,KAAMA,EAAMQ,IAAKN,EAAOE,MAAOA,EAAOE,OAAQA,GAC7DG,GAAiB,EACjBC,EAAmB,EACS,IAA5BrC,EAAY,aAC0B,KAAlCA,EAAY,mBAA8D,MAAlCA,EAAY,mBAA+D,MAAlCA,EAAY,mBAC7FkC,EAAaxE,KAAK4E,UAAUJ,EAAY3D,EAAW,EAAG6D,KAI1DA,GAAiB,EACjBF,EAAaxE,KAAK4E,UAAUJ,EAAY3D,EAAW,EAAG6D,GACtDC,EAAmB3E,KAAK6E,SAAShE,IAErC,IAAIiE,EAAY,QAAUd,EAAUL,EAAI,IAAMK,EAAUJ,EAAI,IAAMI,EAAUH,EAA5D,MAChBiB,EAAY9E,KAAK+D,UAAUe,GAC3B,IAAIC,EAAczC,EAAY,eAC1B0C,EAAY,QAAUD,EAAYpB,EAAI,IAAMoB,EAAYnB,EAAI,IAAMmB,EAAYlB,EAAlE,MAChBmB,EAAYhF,KAAK+D,UAAUiB,GAC3B,IAAIC,EAAc3C,EAAY,eAC9BtC,KAAKQ,cAAgB,GACrB,IAAI0E,EAAkB,CAClBzB,OAAQ,CAAES,EAAGM,EAAWP,KAAMG,EAAGI,EAAWC,IAAKH,MAAOE,EAAWH,MAAOtB,OAAQyB,EAAWD,QAAUY,WAAYxC,WAAWL,EAAY,cAAgB,EAAG8C,KAAM9C,EAAY,mBAAoB+C,QAAS/C,EAAY,WACxNgD,MAAOhD,EAAY,QAASiD,UAAWjD,EAAY,YAAakD,WAAYlD,EAAY,YAAaM,WAAYA,EAAYC,UAAWA,EAAWW,gBAAiBE,EAAW+B,MAAOX,EAAWC,YAAaC,EAAWU,UAAWT,EAAanC,SAAUA,EAAU6C,YAAarD,EAAYsD,UAAWC,YAAalB,EACtTmB,WAAYxD,EAAY,cAAeyD,WAAYzD,EAAY,cAAe0D,UAAW1C,EAAe2C,QAASjG,KAAKkG,cAAc5D,GAAc9B,cAAeR,KAAKQ,cAAe2F,UAAW7D,EAAY8D,UAAWC,WAAoC,IAAxB/D,EAAYgE,QAAgB,SAAW,UAAW7D,KAAM,CAAE8D,UAAW,eAAkB9D,IAAQA,EAAKO,OAAgBwD,QAAS,eAAkB/D,IAAQA,EAAKQ,KAAcwD,aAAc,eAAkBhE,IAAQA,EAAKS,UAAmBwD,aAAc,eAAkBjE,IAAQA,EAAKU,YAEzfb,EAAYb,KAAMzB,KAAKS,UAAUkG,qBAAqBtE,IAAS,eAAkBC,EAAY,sBAC9F4C,EAAgBzD,GAAKzB,KAAKS,UAAUkG,qBAAqBtE,GAAKZ,IAEzC,aAArBa,EAAYE,MAA4C,YAArBF,EAAYE,OAC/C0C,EAAgBI,MAAQhD,EAAY,kBAGxC,IAAIsE,EAAY5G,KAAK6G,iBAAiBvE,GACtC,IAAyB,kBAArBA,EAAYE,MAAiD,mBAArBF,EAAYE,QAC/C,eAAkBxC,KAAK6G,iBAAiBvE,IAAe,CACxD,GAAIA,EAAYwE,WAAY,CACxB,IAAIpB,EAAYR,EAAgBQ,UAChCA,EAAYA,EAAY,EAAIA,EAAY,EACxCR,EAAgBQ,UAAYA,EAEhC,IAAIqB,EAAgB/G,KAAKS,UAAUuG,mBAAmBC,aAAaL,EAAW1B,GAAiB,EAAOA,EAAgBzD,IAClHsF,GAAiBA,EAAcG,gBAC/B5E,EAAYb,GAAKsF,EAAcG,cAAczF,GAAGW,MAAM,KAAK,IAExB,WAAnC2E,EAAcI,MAAMd,aACpBU,EAAcK,WAAW,GAAGC,UAAW,GAIjC,mBAAdT,GAAgD,iBAAdA,IAClC5G,KAAKsH,iBAAiBhF,EAAaX,GAC9B,eAAkBW,EAAYiF,SAC/BvH,KAAKwH,qBAAqBlF,EAAaK,WAAWL,EAAY,cAAgB,EAAG,KAAMoC,GACvF1E,KAAKM,qBAAsB,EAC3BqB,MAGR3B,KAAKU,cAAc+G,wBAAyB,QAKhD,GAAI9E,WAAWL,EAAY,eAAiBzB,EAAW,CAEnD,IAAI6G,EAAQ1H,KAAK2H,iBAAiBrF,EAAazB,EAAWwB,EAAK,KAAMV,GACjEiG,EAAaF,EAAMG,aACnBC,EAAYJ,EAAM/F,MACtB,GAAIiG,EAAY,CAEZ,IAAIG,EAAa/H,KAAKgI,oBAAoB1F,EAAazB,GAInDoH,GAFAxE,EAASnB,EAAY,cAEZA,EAAY,SAGrBuD,GADAnB,GAAiB,EACH,GAqBlB,GApBgC,IAA5BpC,EAAY,aACZoC,GAAiB,EACjBmB,EAAc7F,KAAK6E,SAAShE,GACxBkH,EACAA,EAAWZ,MAAMe,UAAY,UAAYrC,EAAc,OAGvD+B,EAAWT,MAAMe,UAAY,UAAYrC,EAAc,QAIvDkC,EACAA,EAAWZ,MAAMe,UAAY,UAAYrC,EAAc,OAGvD+B,EAAWT,MAAMe,UAAY,UAAYrC,EAAc,OAG/D7F,KAAKmI,cAAcP,EAAYnE,EAAQwE,EAAQpH,EAAW,EAAG6D,GAC7DkD,EAAWQ,aAAe9F,EAAY8F,aAClCR,EAAWQ,aAAc,CACzB,IAAIC,EAAarI,KAAKU,cAAc4H,gBAEhCC,EAAWrG,SAAS0F,EAAWT,MAAM9C,OAASuD,EAAWzB,UAAcxD,WAAWiF,EAAWT,MAAMrE,UAAY,EAAO,GAAMuF,EAEhIT,EAAWT,MAAMqB,cAAqBD,EAAS,KAC/CX,EAAWT,MAAMvE,WAAa,YAC9BgF,EAAWT,MAAMsB,YAAeF,EAAS,EAAK,KAGlDjG,EAAY,YAActC,KAAKS,UAAUe,QAAQC,GAAK,SAAWZ,EAAY,IAAMwB,EACnF,IAAK,IAAIqG,EAAI,EAAGA,EAAI1I,KAAKS,UAAUkG,qBAAqB7E,OAAQ4G,IACnC,SAApBd,EAAWe,MAAuC,aAApBf,EAAWe,MAA2C,aAApBf,EAAWe,MAA6C,mBAArBrG,EAAYE,MAC5GF,EAAY,cAAgBtC,KAAKS,UAAUkG,qBAAqB+B,GAAGjH,KACnEzB,KAAKS,UAAUkG,qBAAqB+B,GAAGpD,MAAQhD,EAAY,SAInE,eAAkBA,EAAYiF,SAC9BjF,EAAYiF,MAAQjF,EAAY,SAEpCtC,KAAK4I,sBAAsBhB,EAAY/G,EAAWwB,EAAKC,EAAaoC,GACpE1E,KAAK6I,gBAAgBvG,EAAasF,GAClC5H,KAAK8I,cAAcxG,EAAasF,EAAY/G,GAC5Cb,KAAK+I,qBAAqBzG,EAAasF,GACvC5H,KAAKgJ,kBAAkBpB,GACvB5H,KAAKiJ,2BAA2B3G,GAC5ByF,GACAA,EAAWmB,YAAYtB,GACvBvG,EAAU6H,YAAYnB,KAGtBH,EAAWT,MAAMgC,SAAW,WAC5B9H,EAAU6H,YAAYtB,IAE1BA,EAAWwB,iBAAiB,QAASpJ,KAAKqJ,gBAAgBC,KAAKtJ,OAC/D4H,EAAWwB,iBAAiB,OAAQpJ,KAAKuJ,eAAeD,KAAKtJ,OAC7D4H,EAAWwB,iBAAiB,QAASpJ,KAAKwJ,iBAAiBF,KAAKtJ,OAChE4H,EAAWwB,iBAAiB,SAAUpJ,KAAKyJ,iBAAiBH,KAAKtJ,OACjE4H,EAAWwB,iBAAiB,UAAWpJ,KAAK0J,sBAAsBJ,KAAKtJ,OACvE4H,EAAWwB,iBAAiB,QAASpJ,KAAK2J,sBAAsBL,KAAKtJ,OACrE2B,EAAQmG,KAMvB9H,KAAKS,UAAUiC,eAChBkH,OAAOC,eAAeC,WAAW9J,KAAKU,cAAcqJ,WAAa,eACjE/J,KAAKU,cAAcsJ,wBAAwBhK,KAAKkB,eAAgB,iBAI5E,GAAIlB,KAAKU,cAAcuJ,cAAgBjK,KAAKU,cAAcwJ,WAAY,CAClE,IAAIrC,EAAevG,SAASC,eAAevB,KAAKU,cAAcwJ,WAAWzI,IACzE,GAAIoG,EAAc,CACd,GAA4C,mBAAvC7H,KAAKU,cAAcwJ,WAAWvB,MAAoE,iBAAvC3I,KAAKU,cAAcwJ,WAAWvB,OAA4B3I,KAAKS,UAAUuG,mBAMrIa,EAAasC,YAN4I,CACzJ,IAAIC,EAAIpK,KAAKU,cAAcwJ,WAAWzG,OAAO2G,EACzC7F,EAASvE,KAAKU,cAAc2J,cAAcrK,KAAKU,cAAcwJ,WAAWrJ,WAC5Eb,KAAKS,UAAU6J,SAASC,aAAavK,KAAKU,cAAcwJ,WAAWrJ,UAAW0D,EAAS6F,GAK3FpK,KAAKU,cAAcuJ,cAAe,EAClCjK,KAAKU,cAAcwJ,WAAa,MAI5CrK,EAAWc,UAAU6J,KAAO,SAAUC,GAClC,OAAOA,EAAIC,QAAQ,cAAe,KAEtC7K,EAAWc,UAAUoD,UAAY,SAAU4G,GACvC,IAAIC,EAAUD,EAAKE,UAAUF,EAAKG,QAAQ,MAAM1I,MAAM,KAClD2I,EAAI7I,SAASlC,KAAKwK,KAAKI,EAAQ,GAAGC,UAAU,IAAK,IACjDG,EAAI9I,SAASlC,KAAKwK,KAAKI,EAAQ,IAAK,IACpCK,EAAI/I,SAASlC,KAAKwK,KAAKI,EAAQ,IAAK,IACpCM,EAAIvI,WAAWA,WAAW3C,KAAKwK,KAAKI,EAAQ,GAAGC,UAAU,EAAGD,EAAQ,GAAG9I,OAAS,KAAKqJ,QAAQ,IAC7FC,EAAW,CACXL,EAAEM,SAAS,IACXL,EAAEK,SAAS,IACXJ,EAAEI,SAAS,IACXC,KAAKC,MAAU,IAAJL,GAASG,SAAS,IAAIR,UAAU,EAAG,IAQlD,OALAO,EAASI,SAAQ,SAAUC,EAAM5J,GACT,IAAhB4J,EAAK3J,SACLsJ,EAASvJ,GAAK,IAAM4J,MAGpB,IAAML,EAASM,KAAK,KAEhC7L,EAAWc,UAAUuF,cAAgB,SAAU5D,GAG3C,IAFA,IAAIqJ,EAAWrJ,EAAY,YACvB2D,EAAU,GACLpE,EAAI,EAAGA,EAAI8J,EAAS7J,OAAQD,IAC7B8J,EAAS9J,KAAOS,EAAY,kBAC5BtC,KAAKQ,cAAcoL,KAAK/J,GAC5BoE,EAAQ2F,KAAK,CAAEC,SAAUF,EAAS9J,GAAIiK,UAAWH,EAAS9J,KAK9D,MAH2C,YAAvC7B,KAAK6G,iBAAiBvE,KACtBtC,KAAKQ,cAAgB8B,EAAY,iBAE9B2D,GAGXpG,EAAWc,UAAUqH,oBAAsB,SAAUhH,EAAMH,GAEvD,IAAIkH,EAEJ,GAAqB,YAAjB/G,EAAK,SAA0C,aAAjBA,EAAK,QAAwB,CAC3D+G,EAAazG,SAASyK,cAAc,OACpChE,EAAWZ,MAAM6E,WAAa,QAC1BhL,EAAKoH,eACLL,EAAWZ,MAAM6E,WAAa,eAGlC,IAAIvI,EAASzC,EAAK,cAEdyB,EAAOzB,EAAK,QAEhB+G,EAAWZ,MAAMgC,SAAW,WAE5B,IAAIzE,GAAiB,EACI,IAArB1D,EAAK,cACL0D,GAAiB,GAErB1E,KAAKmI,cAAcJ,EAAYtE,EAAQhB,EAAM5B,EAAW,EAAG6D,GAE/D,OAAOqD,GAKXlI,EAAWc,UAAUkE,SAAW,SAAUhE,GAEtC,IAAIoL,EAAQ,EAERC,EAAclM,KAAKU,cAAcyL,SAAStL,GAC9C,GAAIqL,GAAeA,EAAYE,SAC3B,OAAQF,EAAYE,UAChB,KAAK,EACDH,EAAQ,EACR,MACJ,KAAK,EACDA,EAAQ,GACR,MACJ,KAAK,EACDA,EAAQ,IACR,MACJ,KAAK,EACDA,EAAQ,IACR,MAGZ,OAAOA,GAEXpM,EAAWc,UAAU0L,UAAY,WAC7BrM,KAAKsM,wBAAuB,IAEhCzM,EAAWc,UAAU4L,cAAgB,WACjCvM,KAAKsM,wBAAuB,IAEhCzM,EAAWc,UAAU2L,uBAAyB,SAAUE,GACpD,IAOI3E,EAPA4E,EAAkBD,EAElBE,EAAkB1M,KAAKO,yBAM3B,GAL+B,IAA3BmM,EAAgB5K,SAChB4K,EAAkB1M,KAAK2M,gBAIvB3M,KAAK4M,eACL,IAAK,IAAI/K,EAAI,EAAGA,EAAI6K,EAAgB5K,OAAQD,IAExC,GADAgG,EAAe7H,KAAKS,UAAUuG,mBAAqB0F,EAAgB7K,GAAGgL,UAAYH,EAAgB7K,GAC9F7B,KAAK4M,cAAcnL,KAAOoG,EAAaiF,SAAU,CACjD9M,KAAK4M,cAAgBtL,SAASC,eAAesG,EAAaiF,UAC1D9M,KAAK+M,kBAAkBlL,EAAG6K,EAAgB5K,OAAQ2K,GAClD,YAKJD,IACA3E,EAAe7H,KAAKS,UAAUuG,mBAAqB0F,EAAgB,GAAGG,UAAYH,EAAgB,GAC9F7E,EAAaiF,WACb9M,KAAK4M,cAAgBtL,SAASC,eAAesG,EAAaiF,UAC1D9M,KAAK+M,kBAAkB,EAAGL,EAAgB5K,OAAQ2K,GAAiB,MAKnF5M,EAAWc,UAAUoM,kBAAoB,SAAUC,EAAuBC,EAAgBC,EAAYC,GAClG,IAAIC,EAAiBJ,EAChBG,IACGD,EACAE,IAGAA,KAGe,IAAnBH,EACAjN,KAAKqN,qBAAqB,GAGtBD,EAAiBH,GAAkBG,GAAkB,EACrDpN,KAAKqN,qBAAqBD,GAGtBF,EACIE,GAAkBH,GAClBjN,KAAKqN,qBAAqB,GAI1BD,GAAkB,GAClBpN,KAAKqN,qBAAqBJ,EAAiB,IAM/DpN,EAAWc,UAAU0M,qBAAuB,SAAUC,GAClD,IAIIzF,EAJA0F,EAAeD,EAEfZ,EAAkB1M,KAAKO,yBAG3B,GAAIgN,EAAeb,EAAgB5K,OAAQ,CACvC,IAAK,IAAID,EAAI,EAAGA,EAAI6K,EAAgB5K,OAAQD,IAAK,CAC7C,IAAI2L,EAAiBxN,KAAKS,UAAUuG,mBAAqB0F,EAAgBa,GAAcV,UAAUC,SAAWJ,EAAgBa,GAAcT,SACtIW,EAAqBzN,KAAKS,UAAUuG,mBAAqB0F,EAAgB7K,GAAGgL,UAAYH,EAAgB7K,GAC5G,GAAI2L,IAAmBC,EAAmBX,SAAU,CAChD,IAAIjM,EAAY4M,EAAmBxL,WAAa,EAAIwL,EAAmBxL,UAAYwL,EAAmBtI,WAClGuI,EAAW1N,KAAKS,UAAUkN,iBAAiBC,mBAAmB/M,GAC7D6M,GACD1N,KAAKS,UAAUoN,WAAWC,SAASjN,GAEvCb,KAAK4M,cAAgBtL,SAASC,eAAekM,EAAmBX,UAChEjF,EAAe4F,EACf,OAGR,GAA2B,OAAvBzN,KAAK4M,cAAwB,CACzB/L,EAAYgH,EAAa5F,WAAa,EAAI4F,EAAa5F,UAAY4F,EAAa1C,WACpFnF,KAAKS,UAAUoN,WAAWC,SAASjN,GACnCb,KAAK4M,cAAgBtL,SAASC,eAAesG,EAAaiF,UAE1D9M,KAAK4M,gBACgC,8CAAjC5M,KAAK4M,cAAcmB,WACnBzM,SAASC,eAAevB,KAAK4M,cAAcnL,IAAI0I,QAC/CnK,KAAKS,UAAUuN,OAAO,CAAChO,KAAK4M,cAAcnL,IAAK,OAET,oCAAjCzB,KAAK4M,cAAcmB,YACpB/N,KAAKS,UAAUuG,mBACf1F,SAASC,eAAevB,KAAK4M,cAAcnL,IAAIyF,cAAciD,QAG7D7I,SAASC,eAAevB,KAAK4M,cAAcnL,IAAI0I,YASnEtK,EAAWc,UAAUsN,SAAW,SAAUxM,GACtC,GAAKA,EAKA,CACDzB,KAAKkO,cACL,IAAIC,EAAmB7M,SAASC,eAAeE,GAC/C0M,EAAiBC,UAAUC,IAAI,6BAP3BrO,KAAK4M,eACLtL,SAASC,eAAevB,KAAK4M,cAAcnL,IAAI0I,SAY3DtK,EAAWc,UAAUuN,YAAc,WAC/B,GAAIlO,KAAKO,yBAA0B,CAE/B,IAAImM,EAAkB1M,KAAKO,yBACI,IAA3BmM,EAAgB5K,SAChB4K,EAAkB1M,KAAK2M,gBAE3B,IAAK,IAAI9K,EAAI,EAAGA,EAAI7B,KAAKO,yBAAyBuB,OAAQD,IAAK,CAC3D,IAAIyM,EAAmBtO,KAAKS,UAAUuG,mBAAqBhH,KAAKO,yBAAyBsB,GAAGgL,UAAUC,SAAW9M,KAAKO,yBAAyBsB,GAAGiL,SAC9IqB,EAAmB7M,SAASC,eAAe+M,GAC3CH,GACAA,EAAiBC,UAAUG,OAAO,wBAGtCvO,KAAKS,UAAU+N,iBAAiB5B,eAChC5M,KAAKS,UAAU+N,iBAAiB5B,cAAcwB,UAAUG,OAAO,0BAK3E1O,EAAWc,UAAUgM,aAAe,WAQhC,OAPI3M,KAAKS,UAAUuG,mBACfhH,KAAKO,yBACDP,KAAKS,UAAUuG,mBAAmByH,yBAAyBzO,KAAKO,0BAGpEP,KAAKO,yBAA2BP,KAAK0O,wBAElC1O,KAAKO,0BAEhBV,EAAWc,UAAU+N,sBAAwB,WAEzC,IAEIpM,EAFAtB,EAAOhB,KAAKU,cAAcO,0BAA0B,eAGxD,GAAID,EAGA,IADA,IAAIE,EAAiBC,KAAKC,MAAMJ,GACvBa,EAAI,EAAGA,EAAIX,EAAeY,OAAQD,IACvCS,EAAcpB,EAAeW,GACJ,mBAArBS,EAAYE,OAEZF,EAAY,YAActC,KAAKS,UAAUe,QAAQC,GAAK,SAAWa,EAAYL,UAAY,IAAMJ,EAC/F7B,KAAKO,yBAAyBqL,KAAK1K,EAAeW,KAI9D,OAAO7B,KAAKO,0BAKhBV,EAAWc,UAAUgG,qBAAuB,WAExC,IAAI3F,EAAOhB,KAAKU,cAAcO,0BAA0B,eACxD,GAAID,EAGA,IADA,IAAIE,EAAiBC,KAAKC,MAAMJ,GACvBa,EAAI,EAAGA,EAAIX,EAAeY,OAAQD,IAAK,CAE5C,IAAIS,EAAcpB,EAAeW,GAE7B8G,EAAOrG,EAAY,QACvB,GAAItC,KAAKS,UAAUuG,mBACU,QAArB1E,EAAYE,MAAuC,mBAArBF,EAAYE,MAAkD,kBAArBF,EAAYE,MACnFxC,KAAK2O,uBAAuBrM,GAAa,QAI7C,GAAyB,QAArBA,EAAYE,KAAgB,CAE5B,IAAIoM,EAAsB,CAAExJ,KAAMpF,KAAK6O,iBAAiBvM,GAAcb,GAAIzB,KAAKS,UAAUe,QAAQC,GAAK,SAAWkB,WAAWL,EAAY,cAAgB,IAAMT,EAAGiE,YAAY,EAAO6C,KAAMrG,EAAYC,eAAiB,eAAiBoG,EAAMrD,MAAOtF,KAAK8O,oBAAoBxM,GAAcyM,SAAU,GAAIhJ,WAAYzD,EAAYwE,YAClU9G,KAAKS,UAAUkG,qBAAqBiF,KAAKgD,MAM7D/O,EAAWc,UAAUgO,uBAAyB,SAAUrM,EAAa0M,GACjE,IAAIpM,EACAC,EACAC,EACJ,GAA8B,KAA1BR,EAAYH,UAAkB,CAC1BG,EAAYC,iBACZD,EAAYE,KAAO,gBAGvB,IAAIC,EAAOH,EAAY,QACV,OAATG,GAAiBA,EAAKM,SACtBH,EAAaH,EAAKD,KACdC,EAAKO,SACLH,EAAY,UAEZJ,EAAKQ,OACLJ,EAAY,QAEZJ,EAAKS,YACLL,EAAY,iBAEZJ,EAAKU,YACLN,EAAY,aAEhBC,EAAW9C,KAAKoD,oBAAoBX,EAAKY,OAE7C,IAAIC,EAA0C,IAA1BhB,EAAYiB,UAAkB,QAAqC,IAA1BjB,EAAYiB,UAAkB,SAAW,OAClGC,EAAkBlB,EAAY,aAC9BmB,EAASnB,EAAY,cACrBoB,EAAY,QAAUF,EAAgBG,EAAI,IAAMH,EAAgBI,EAAI,IAAMJ,EAAgBK,EAA9E,MAChBH,EAAY1D,KAAK+D,UAAUL,GAET,cAAdA,IACAA,EAAY,aAGhB,IAAIM,EAAY1B,EAAY,aACxB2B,EAAOjE,KAAKoD,oBAAoBK,EAAOS,GACvC+K,EAAQjP,KAAKoD,oBAAoBK,EAAOW,GACxCC,EAAQrE,KAAKoD,oBAAoBK,EAAOa,OACxCC,EAASvE,KAAKoD,oBAAoBK,EAAOV,QACzCyB,EAAa,CAAEP,KAAMA,EAAMQ,IAAKwK,EAAO5K,MAAOA,EAAOE,OAAQA,GAC7DO,EAAY,QAAUd,EAAUL,EAAI,IAAMK,EAAUJ,EAAI,IAAMI,EAAUH,EAA5D,MAChBiB,EAAY9E,KAAK+D,UAAUe,GAC3B,IAAIC,EAAczC,EAAY,eAC1B0C,EAAY,QAAUD,EAAYpB,EAAI,IAAMoB,EAAYnB,EAAI,IAAMmB,EAAYlB,EAAlE,MAChBmB,EAAYhF,KAAK+D,UAAUiB,GAC3B,IAAIC,EAAc3C,EAAY,eAC9BtC,KAAKQ,cAAgB,GACrB,IAAI0E,EAAkB,CAClBzB,OAAQ,CAAES,EAAGM,EAAWP,KAAMG,EAAGI,EAAWC,IAAKH,MAAOE,EAAWH,MAAOtB,OAAQyB,EAAWD,QAAUY,WAAYxC,WAAWL,EAAY,cAAgB,EAAG8C,KAAM9C,EAAY,mBAAoB+C,QAAS/C,EAAY,WACxNgD,MAAOhD,EAAY,QAASiD,UAAWjD,EAAY,YAAakD,WAAYlD,EAAY,YAAaM,WAAYA,EAAYC,UAAWA,EAAWW,gBAAiBE,EAAW+B,MAAOX,EAAWC,YAAaC,EAAWU,UAAWT,EAAanC,SAAUA,EAAU6C,YAAarD,EAAYsD,UAC9RE,WAAYxD,EAAY,cAAeyD,WAAYzD,EAAY,cAAe0D,UAAW1C,EAAe2C,QAASjG,KAAKkG,cAAc5D,GAAc9B,cAAeR,KAAKQ,cAAe2F,UAAW7D,EAAY8D,UAAWC,WAAoC,IAAxB/D,EAAYgE,QAAgB,SAAW,UAAW7D,KAAM,CAAE8D,UAAW,eAAkB9D,IAAQA,EAAKO,OAAgBwD,QAAS,eAAkB/D,IAAQA,EAAKQ,KAAcwD,aAAc,eAAkBhE,IAAQA,EAAKS,UAAmBwD,aAAc,eAAkBjE,IAAQA,EAAKU,YAEre,aAArBb,EAAYE,MAA4C,YAArBF,EAAYE,OAC/C0C,EAAgBI,MAAQhD,EAAY,kBAGxC,IAAIsE,EAAY5G,KAAK6G,iBAAiBvE,GACpB,mBAAdsE,GAAgD,iBAAdA,IAClC5G,KAAKsH,iBAAiBhF,GAClBtC,KAAKG,mBACL+E,EAAgBI,MAAQhD,EAAYiF,QAG5C,IAAI2H,EAAelP,KAAKS,UAAUuG,mBAAmBC,aAAaL,EAAW1B,EAAiB8J,GAC9F,OAAOE,EAEX,OAAO,MAMXrP,EAAWc,UAAUsI,2BAA6B,SAAUlH,GACxD,IAAI4G,EAAO5G,EAAU,QACjB6M,EAAsB,CACtBxJ,KAAMpF,KAAK6O,iBAAiB9M,GAAYN,GAAIM,EAAU+K,SAAUhH,WAAY/D,EAAUoN,WAAYpJ,WAAYhE,EAAU+E,WAAYtB,WAAqB,aAATmD,GAA8B5G,EAAUqN,SACxL7J,UAAoB,gBAAToD,GAAiC5G,EAAUqN,SAAUzG,KAAMA,EAAMrD,MAAgB,YAATqD,GAA+B,aAATA,EAAsB5G,EAAUsN,cAAgBtN,EAAUwF,MAAOwH,SAAUhN,EAAUuN,WAAavN,EAAUuN,WAAa,IAEtOtP,KAAKS,UAAUkG,qBAAqB3G,KAAKS,UAAUkG,qBAAqB4I,WAAU,SAAUC,GAAM,OAAOA,EAAG/N,KAAOmN,EAAoBnN,OAAUmN,GAGrJ/O,EAAWc,UAAU8O,sBAAwB,SAAUC,GAEnD,GADA1P,KAAKK,mBAAmBuL,KAAK8D,EAAWjO,IACpCiO,EAAY,CAEZ,IAAIC,EAAiBrO,SAASC,eAAemO,EAAWjO,IACpDkO,IACID,EAAW5J,YACX6J,EAAetI,UAAW,EAC1BsI,EAAexI,MAAM3D,gBAAkB,GACvCmM,EAAexI,MAAMyI,OAAS,YAGe,KAAzCD,EAAexI,MAAM3D,kBACrBmM,EAAexI,MAAM3D,gBAAkB,yBAE3CmM,EAAetI,UAAW,EAC1BsI,EAAexI,MAAMyI,OAAS,KAGtC5P,KAAK6P,oBAAoBF,KAQjC9P,EAAWc,UAAUkO,iBAAmB,SAAUvM,GAE9C,IAAIuF,EAEJ,OAAQvF,EAAY,SAChB,IAAK,UACL,IAAK,WACL,IAAK,iBACL,IAAK,eACDuF,EAAevF,EAAYH,UAC3B,MACJ,IAAK,cACL,IAAK,WACD0F,EAAevF,EAAYwN,UAC3B,MACJ,IAAK,WACL,IAAK,UACDjI,EAAevF,EAAYyN,KAC3B,MAER,OAAOlI,GAGXhI,EAAWc,UAAUmO,oBAAsB,SAAUxM,GAEjD,IAAIuF,EAEJ,OAAQvF,EAAY,SAChB,IAAK,UACL,IAAK,WACDuF,EAAevF,EAAYyN,KAC3B,MACJ,IAAK,iBACDlI,EAAevF,EAAYiF,MAC3B,MACJ,IAAK,cACL,IAAK,WACDM,EAAevF,EAAY8M,SAC3B,MACJ,IAAK,WACDvH,EAAevF,EAAY+M,cAC3B,MACJ,IAAK,UACDxH,EAAevF,EAAY0N,aAC3B,MAER,OAAOnI,GAGXhI,EAAWc,UAAUsP,mBAAqB,SAAUC,EAAYzM,EAAQ5C,GAEpE,IAAIqL,EAAclM,KAAKU,cAAcyL,SAAStL,GAE1CsP,EAAQ,EACZ,OAAQjE,EAAYE,UAChB,KAAK,EACD+D,EAAQ1M,EACR,MACJ,KAAK,EACD0M,EAAQ,CAAEC,EAAG3M,EAAO2M,EAAIF,EAAW5L,MAASb,EAAOY,MAAQ,IAAM+F,EAAG8B,EAAY7H,MAAQ6L,EAAWhM,EAAKT,EAAOc,OAAS,GACxH,MACJ,KAAK,EACD4L,EAAQ,CAAEC,EAAGlE,EAAY7H,MAAQZ,EAAO2M,EAAI3M,EAAOY,MAAO+F,EAAG8B,EAAY3H,OAASd,EAAO2G,EAAI3G,EAAOc,QACpG,MACJ,KAAK,EACD4L,EAAQ,CAAEC,EAAG3M,EAAO2G,EAAK3G,EAAOY,MAAQ,EAAKZ,EAAOc,OAAQ6F,EAAG3G,EAAO2M,EAAK3M,EAAOY,MAAQ,GAC1F,MAER,OAAO8L,GAMXtQ,EAAWc,UAAU0P,uBAAyB,WAE1C,IAAIrP,EAAOhB,KAAKU,cAAcO,0BAA0B,eACxD,GAAID,EAAM,CAMN,IAJA,IAAIE,EAAiBC,KAAKC,MAAMJ,GAE5BsP,EAAQ,GACRC,EAAa,GACRC,EAAI,EAAGA,EAAItP,EAAeY,OAAQ0O,IAAK,CAE5C,IAAIlO,EAAcpB,EAAesP,GAC7BzK,EAAazD,EAAYwE,WAC7B,GAAyB,YAArBxE,EAAYE,MAA2C,aAArBF,EAAYE,MAAuBF,EAAYsD,WAC7EG,GAAoC,KAArBzD,EAAYyN,MAAoC,OAArBzN,EAAYyN,YAK9C/P,KAAKU,cAAc+P,kBAAkBnO,EAAYH,YAJzDnC,KAAKU,cAAcgQ,cAAe,EAClC1Q,KAAKU,cAAc+P,kBAAkBnO,EAAYH,WAAaG,EAAYyN,MAK9EQ,EAAa,CAAEI,WAAYrO,EAAYyN,KAAMjK,WAAYxD,EAAY6M,YACrEmB,EAAMhO,EAAYH,WAAaoO,OAE9B,GAAyB,gBAArBjO,EAAYE,MAA0BF,EAAY8M,SACnDrJ,IAAuC,IAAzBzD,EAAY8M,UAC1BpP,KAAKU,cAAcgQ,cAAe,EAClC1Q,KAAKU,cAAc+P,kBAAkBnO,EAAYwN,WAAaxN,EAAYiF,cAGlEvH,KAAKU,cAAc+P,kBAAkBnO,EAAYwN,WAE7DS,EAAa,CAAEI,WAAYrO,EAAYiF,MAAOzB,WAAYxD,EAAY6M,YACtEmB,EAAMhO,EAAYwN,WAAaS,OAE9B,GAAyB,aAArBjO,EAAYE,KACbuD,IAAuC,IAAzBzD,EAAY8M,UAC1BpP,KAAKU,cAAcgQ,cAAe,EAClC1Q,KAAKU,cAAc+P,kBAAkBnO,EAAYwN,WAAaxN,EAAY8M,iBAGlEpP,KAAKU,cAAc+P,kBAAkBnO,EAAYwN,WAEzDxN,EAAYsO,eAAiBtO,EAAY8M,UACzCmB,EAAa,CAAEI,WAAYrO,EAAYsO,cAAe9K,WAAYxD,EAAY6M,YAC9EmB,EAAMhO,EAAYwN,WAAaS,QAEOM,IAAjCP,EAAMhO,EAAYwN,YAA6D,OAAjCQ,EAAMhO,EAAYwN,aACrES,EAAa,CAAEI,WAAYrO,EAAY8M,SAAUtJ,WAAYxD,EAAY6M,YACzEmB,EAAMhO,EAAYwN,WAAaS,QAGlC,GAAyB,aAArBjO,EAAYE,KACbuD,GAA4C,KAA9BzD,EAAY+M,eAC1BrP,KAAKU,cAAcgQ,cAAe,EAClC1Q,KAAKU,cAAc+P,kBAAkBnO,EAAYyN,MAAQzN,EAAY+M,sBAG7DrP,KAAKU,cAAc+P,kBAAkBnO,EAAYyN,MAE7DQ,EAAa,CAAEI,WAAYrO,EAAY+M,cAAevJ,WAAYxD,EAAY6M,YAC9EmB,EAAMhO,EAAYyN,MAAQQ,OAEzB,GAAyB,YAArBjO,EAAYE,KAAoB,CAIrC,IAFA,IAAIsO,EAAaxO,EAAY,YACzByO,EAAiB,GACZC,EAAM,EAAGA,EAAM1O,EAAY0N,aAAalO,OAAQkP,IAAO,CAE5D,IAAIrB,EAAiBrN,EAAY0N,aAAagB,GAC9CD,EAAenF,KAAKkF,EAAWnB,IAEnCY,EAAa,CAAEI,WAAYxP,KAAK8P,UAAUF,GAAiBjL,WAAYxD,EAAY6M,YACnFmB,EAAMhO,EAAYyN,MAAQQ,OAEzB,GAAyB,mBAArBjO,EAAYE,MAAkD,iBAArBF,EAAYE,KAAyB,CAEnF,IAAI0O,OAAS,EAIb,GAH0B,OAAtB5O,EAAYiF,OAAwC,KAAtBjF,EAAYiF,OAC1CvH,KAAKsH,iBAAiBhF,GAEtBA,EAAYiF,OAA+B,KAAtBjF,EAAYiF,MAAc,CAC/C2J,EAAS5O,EAAYiF,MACrB,IAAI3E,EAAaN,EAAYM,WAAaN,EAAYM,WAAaN,EAAYgN,WAC/E,GAAI1M,EACA0N,EAAMhO,EAAYH,UAAY,YAAcS,EAC5C0N,EAAMhO,EAAYH,UAAY,YAAcG,EAAYQ,SAAWR,EAAYQ,SAAWR,EAAY6O,cAErG,GAAI7O,EAAYiF,MAAMnF,MAAM,WAAW,GACxCkO,EAAMhO,EAAYH,UAAY,cAAe,MAE5C,CAED,IAAIiP,EAAiB,eAAgB9O,EAAYiF,OACjD2J,EAAS,eAAqBE,IAWtC,GARIrL,GAAoC,OAAtBzD,EAAYiF,OAAwC,KAAtBjF,EAAYiF,OACxDvH,KAAKU,cAAcgQ,cAAe,EAClC1Q,KAAKU,cAAc+P,kBAAkBnO,EAAYH,WAAahB,KAAK8P,UAAUC,WAGrElR,KAAKU,cAAc+P,kBAAkBnO,EAAYH,WAE7DmO,EAAMhO,EAAYH,WAAahB,KAAK8P,UAAUC,GAC1C5O,EAAY+O,OAAQ,CAEpB,IAAI5N,EAASzD,KAAKiQ,mBAAmB3N,EAAY4N,WAAY5N,EAAY+O,OAAQ/O,EAAYL,WAC7FK,EAAY+O,OAAOjB,EAAI3M,EAAO2M,EAC9B9N,EAAY+O,OAAOjH,EAAI3G,EAAO2G,EAC9BkG,EAAMhO,EAAYH,UAAY,UAAYhB,KAAK8P,UAAU3O,EAAY+O,YAEpE,CAED,IAAIC,EAAahP,EAAY4N,WAEzBzM,EAAS,CAAE2M,EAAGpQ,KAAKoD,oBAAoBkO,EAAWpN,GAAIkG,EAAGpK,KAAKoD,oBAAoBkO,EAAWlN,GAAIC,MAAOrE,KAAKoD,oBAAoBkO,EAAWhN,OAAQC,OAAQvE,KAAKoD,oBAAoBkO,EAAWvO,SACpMuN,EAAMhO,EAAYH,UAAY,UAAYhB,KAAK8P,UAAUxN,GAE7D6M,EAAMhO,EAAYH,UAAY,cAAgBG,EAAY6M,YAGlE,OAAQhO,KAAK8P,UAAUX,KAG/BzQ,EAAWc,UAAU0I,gBAAkB,SAAUkI,GAE7C,IAAI3E,EAAgB2E,EAAMC,OAE1B,GAAI5E,GAA8C,oCAA5BA,EAAcmB,WAA+E,yDAA5BnB,EAAcmB,UAAuE,CAExK,IAAI0D,EAAkB7E,EAAczF,MAAM3D,gBAEtCkO,EAAeD,EAAgBE,YAAY,KAE3CC,EAAeH,EAAgBI,MAAM,EAAGH,EAAe,GAAK,EAAI,IACpE9E,EAAczF,MAAM3D,gBAAkBoO,OAEjChF,IAE2B,oCAA5BA,EAAcmB,WAA+E,8CAA5BnB,EAAcmB,WAAyF,yDAA5BnB,EAAcmB,WAAoG,oEAA5BnB,EAAcmB,WAChP/N,KAAKiO,SAASrB,EAAcnL,MAIxC5B,EAAWc,UAAU4I,eAAiB,SAAUgI,GAE5C,IAAI3E,EAAgB2E,EAAMC,OAC1B,GAAI5E,EAAcxE,cAAgBpI,KAAKI,eAAgB,CAEnD,IAAIqC,EAAOP,SAAS0K,EAAczF,MAAM9C,OAAUnC,SAAS0K,EAAczF,MAAM5C,QAAU,EACzFqI,EAAczF,MAAM9C,MAAa5B,EAAO,KACxCzC,KAAKI,gBAAiB,EAEC,aAAvBwM,EAAcjE,KACd3I,KAAKS,UAAUqR,sBAAsBlF,EAAcxH,KAAMwH,EAAcmF,SAGvE/R,KAAKS,UAAUqR,sBAAsBlF,EAAcxH,KAAMwH,EAActH,OAG3E,IAAImM,EAAkB7E,EAAczF,MAAM3D,gBAEtCkO,EAAeD,EAAgBE,YAAY,KAE3CC,EAAeH,EAAgBI,MAAM,EAAGH,EAAe,GAAK,GAAM,IACtE9E,EAAczF,MAAM3D,gBAAkBoO,GAE1C/R,EAAWc,UAAU6I,iBAAmB,SAAU+H,GAE9C,IAAI3E,EAAgB2E,EAAMC,OACM,wBAA5B5E,EAAcmB,WACdnB,EAAgBA,EAAc1F,cAC9BlH,KAAK6P,oBAAoBjD,IAEQ,oCAA5BA,EAAcmB,WAA+E,yDAA5BnB,EAAcmB,UACpF/N,KAAK4M,cAAgBA,EAEY,oBAA5BA,EAAcmB,WAA0D,WAAvBnB,EAAcjE,MACpE3I,KAAKS,UAAUuR,0BAA0BpF,EAActH,MAAOsH,EAAcxH,KAAMwH,EAAcnL,IAEpG,IAAK,IAAI+O,EAAI,EAAGA,EAAIxQ,KAAKS,UAAUkG,qBAAqB7E,OAAQ0O,IACxD5D,EAAcnL,KAAOzB,KAAKS,UAAUkG,qBAAqB6J,GAAG/O,MACxDzB,KAAKS,UAAUuG,oBAAsBhH,KAAKS,UAAUkN,mBACpD3N,KAAKS,UAAUwR,wBAAwB,mBAAoBjS,KAAKS,UAAUkG,qBAAqB6J,IAGnE,oCAA5B5D,EAAcmB,WAA+E,8CAA5BnB,EAAcmB,WAAyF,yDAA5BnB,EAAcmB,WAAoG,oEAA5BnB,EAAcmB,WAChP/N,KAAKiO,SAASrB,EAAcnL,MAiB5C5B,EAAWc,UAAUuR,cAAgB,SAAUC,EAAe7M,EAAOkM,EAAQY,GACzE,IAAIC,EAEA5O,EACA6O,EACAC,EACAvR,EAEAA,EADAhB,KAAKS,UAAUiC,aACR1C,KAAKU,cAAcO,0BAA0B,iBAG7CjB,KAAKU,cAAcO,0BAA0B,eAIxD,IAFA,IAAIC,EAAiBC,KAAKC,MAAMJ,GAC5BwR,EAAahB,EAASA,EAAOpM,KAAOoM,EAAOpM,KAAOoM,EAAOiB,aAAarN,KAAOpF,KAAK4M,cAAcxH,KAC3FvD,EAAI,EAAGA,EAAIX,EAAeY,OAAQD,IAAK,CAC5C,IAAI6Q,EAAY1S,KAAKS,UAAUiC,aAAexB,EAAeW,GAAGgL,UAAUzH,KAAOlE,EAAeW,GAAGG,gBACnG,GAAI0Q,IAAcF,EAAY,CAC1BhB,EAASxR,KAAKS,UAAUiC,aAAepB,SAASC,eAAeL,EAAeW,GAAG8Q,IAAIvQ,MAAM,KAAK,IAAMd,SAASC,eAAeL,EAAeW,GAAGiL,UAEhJ,IAAIjF,EAAe2J,EACfoB,EAAY/K,EAAa4K,aAAaA,aAAahR,GAAGW,MAAM,KAAK,GACjEyQ,EAAiB7S,KAAKS,UAAUqS,UAAUF,GAC1CpB,GAAUA,EAAOiB,cAAgBI,IACjCP,EAAed,EAAOuB,wBACtBR,EAAsBf,EAAOiB,aAAaA,aAAaA,aAAaM,wBACpE/S,KAAKU,cAAcsS,uBAAwB,EACvCxB,EAAOyB,cAA6D,IAA9CzB,EAAOyB,YAAYxR,GAAGqJ,QAAQ,aACpD9K,KAAKS,UAAUyS,gCAAiC,IAGxD,IAAIC,EAAe7N,GAAgBtF,KAAKU,cAAc0S,gBAAgBC,aAClEC,EAAclB,GAAsBpS,KAAKU,cAAc0S,gBAAgBrE,SACvEwE,EAAYvT,KAAKU,cAAc4H,gBAC/BkL,EAAexT,KAAKU,cAAcsS,sBAAwBV,EAAajO,MAAQkP,EAAY5Q,WAAWkF,EAAaV,MAAM9C,OAASkP,EAClIE,EAAgBzT,KAAKU,cAAcsS,sBAAwBV,EAAa/N,OAASgP,EAAY5Q,WAAWkF,EAAaV,MAAM5C,QAAUgP,EACrIG,EAAc1T,KAAKU,cAAcsS,uBAA0BV,EAAarO,KAAOsO,EAAoBtO,MAASsP,EAAY5Q,WAAWkF,EAAaV,MAAMlD,MAAQsP,EAC9JI,EAAa3T,KAAKU,cAAcsS,uBAA0BV,EAAa7N,IAAM8N,EAAoB9N,KAAQ8O,EAAY5Q,WAAWkF,EAAaV,MAAM1C,KAAO8O,EAC1JK,EAAc5T,KAAKU,cAAcsS,uBAAwBxB,EAAOqC,mBAAqBlR,WAAW6O,EAAOqC,mBAAmBpS,GAAGW,MAAM,KAAK,GAAG0R,OAAOtC,EAAOqC,mBAAmBpS,GAAGW,MAAM,KAAK,GAAGN,OAAS,IAAkDa,WAAWkF,EAAapG,GAAGW,MAAM,KAAK,IAC9RsP,EAAe1R,KAAKU,cAAcsS,uBAAwBxB,EAAOqC,mBAAqBlR,WAAW6O,EAAOqC,mBAAmBpS,GAAGW,MAAM,KAAK,IAAkDO,WAAWkF,EAAapG,GAAGW,MAAM,KAAK,IACjO2R,EAAa/T,KAAKU,cAAc0S,gBAAgBY,gBAChDC,OAAsB,EACtBC,OAAoB,EACpBC,EAAoBtM,EAAa4K,aAAaA,aAAatL,MAAMe,UAAYL,EAAa4K,aAAaA,aAAatL,MAAMe,UAAYL,EAAaV,MAAMe,UAC7JiM,EAAoBA,EAAkBtJ,UAAUsJ,EAAkBrJ,QAAQ,KAAO,EAAGqJ,EAAkBrJ,QAAQ,MAC9G,IAAIjF,EAAcsO,EAAoBjS,SAASiS,GAAqB,EACpE,GAAsB,SAAlBhC,EAA0B,CAc1B,GAbKmB,IACDA,EAAc,aAGlB7P,EAASzD,KAAKoU,cAAc1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYH,EAAcC,GAC9E,YAApCzT,KAAKS,UAAU4T,mBACf5Q,EAASzD,KAAKsU,wBAAwB7Q,IAE1C4O,EAAQ,CAEJ5Q,GAAIoG,EAAapG,GAAIgC,OAAQ,CAAE2M,EAAG3M,EAAO2M,EAAGhG,EAAG3G,EAAO2G,EAAG/F,MAAOZ,EAAOY,MAAOE,OAAQd,EAAOc,QAAU1D,UAAW+S,EAAa5S,KAAMmS,EAAcoB,aAAc,GACjKC,oBAAqB,gBAAiBC,QAAS,EAAG5O,YAAaA,EAAa6O,UAAW,gBAAiBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,IAAMnS,WAAY0Q,EAAaxQ,SAA0B,KAAhB+C,GAAsC,MAAhBA,EAAuBpC,EAAOY,MAAQ,EAAMZ,EAAOc,OAAS,GAElR,kBAA9B8N,EAAMmC,oBAAyC,CAC/C,IAAIQ,EAAYhV,KAAKiV,aAAa5C,EAAMrR,KAAMqR,EAAMvP,SAAUuP,EAAMzP,YAChEsS,EAAa,EACbF,EAAYvR,EAAOY,QACnB6Q,EAAazR,EAAOY,MAAQ2Q,GAChC3C,EAAMvP,SAAW9C,KAAKmV,YAAY7J,KAAK8J,MAAO/C,EAAMvP,SAAWoS,IAEnEnB,EAAa1B,EAAMrR,KACnBiT,EAAsB5B,EAAMzP,WAC5BsR,EAAoB7B,EAAMvP,cAEzB,GAAsB,UAAlBqP,EAA2B,CAEhC1O,EAASzD,KAAKoU,cAAc1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYH,EAAcC,GACtH,IAAI4B,EAAQ,IAAIC,MAEhB,GADAD,EAAME,IAAMpC,EAC4B,YAApCnT,KAAKS,UAAU4T,iBAAgC,CAE/C,IAAImB,EAAa,GACbC,EAAkB,EAClBC,EAAc,EAClB,GAAIpK,KAAKqK,IAAIN,EAAM9Q,OAAS8Q,EAAMhR,OAASmR,EACnC/R,EAAOY,MAAQZ,EAAOc,QACtBd,EAAO2M,EAAI3M,EAAO2M,EAAK3M,EAAOY,MAAQqR,EAAgBjS,EAAOc,OAASmR,EACtEjS,EAAOY,MAAQZ,EAAOc,SAGtBd,EAAO2G,EAAI3G,EAAO2G,EAAK3G,EAAOc,OAASmR,EAAgBjS,EAAOY,MAAQqR,EACtEjS,EAAOc,OAASd,EAAOY,YAI3B,GAAIZ,EAAOY,MAAQZ,EAAOc,OAAQ,CAC9Bd,EAAO2G,EAAI3G,EAAO2G,EAAK3G,EAAOc,OAASkR,EACvChS,EAAO2M,EAAI3M,EAAO2M,EAAK3M,EAAOc,OAASkR,EACvC,IAAIlR,EAASd,EAAOc,OAASmR,EAC7BjS,EAAS,CAAE2M,EAAG3M,EAAO2M,EAAGhG,EAAG3G,EAAO2G,EAAG/F,MAAOZ,EAAOY,MAAQE,EAAQA,OAAQd,EAAOc,OAASA,QAG3Fd,EAAO2G,EAAI3G,EAAO2G,EAAK3G,EAAOc,OAASkR,EACvChS,EAAOc,OAASd,EAAOc,OAASmR,EAI5CrD,EAAQ,CAEJ5Q,GAAIoG,EAAapG,GAAIgC,OAAQ,CAAE2M,EAAG3M,EAAO2M,EAAGhG,EAAG3G,EAAO2G,EAAG/F,MAAOZ,EAAOY,MAAOE,OAAQd,EAAOc,QAAU1D,UAAW+S,EAAa5S,KAAMmS,EAAcoB,aAAc,GACjKC,oBAAqB,iBAAkBC,QAAS,EAAG5O,YAAaA,EAAa6O,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,KAE3LhB,EAAa1B,EAAMrR,UAGnB,IAA0C,IAArCmS,EAAarI,QAAQ,UAEtBrH,EAASzD,KAAKoU,cAAc1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYH,EAAcC,GAC9E,YAApCzT,KAAKS,UAAU4T,mBACf5Q,EAASzD,KAAKsU,wBAAwB7Q,IAE1C4O,EAAQ,CAEJ5Q,GAAIoG,EAAapG,GAAIgC,OAAQ,CAAE2M,EAAG3M,EAAO2M,EAAGhG,EAAG3G,EAAO2G,EAAG/F,MAAOZ,EAAOY,MAAOE,OAAQd,EAAOc,QAAU1D,UAAW+S,EAAa5S,KAAMmS,EAAcoB,aAAc,GACjKC,oBAAqB,iBAAkBC,QAAS,EAAG5O,YAAaA,EAAa6O,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,KAE3LhB,EAAa1B,EAAMrR,SAElB,CAED,GAAwC,YAApChB,KAAKS,UAAU4T,iBAAgC,CAE/C,IAAIuB,EAAkB5V,KAAK6V,2BAA2B1C,GAAc,EAAOtL,GAE3EpE,EAASzD,KAAKoU,cAAc1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYiC,EAAgBvR,MAAOuR,EAAgBrR,QAAQ,GACvJd,EAAO2M,EAAI3M,EAAO2M,EAAIwF,EAAgB3R,KACtCR,EAAO2G,EAAI3G,EAAO2G,EAAIwL,EAAgBnR,SAGtChB,EAASzD,KAAKoU,cAAc1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYH,EAAcC,GAE1HpB,EAAQ,CAEJ5Q,GAAIoG,EAAapG,GAAIgC,OAAQ,CAAE2M,EAAG3M,EAAO2M,EAAGhG,EAAG3G,EAAO2G,EAAG/F,MAAOZ,EAAOY,MAAOE,OAAQd,EAAOc,QAAU1D,UAAW+S,EAAa5S,KAAMmS,EAAcoB,aAAc,GACjKC,oBAAqB,OAAQC,QAAS,EAAG5O,YAAaA,EAAa6O,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,KAIzL,GAAI/U,KAAKU,cAAcsS,uBAAyBH,EAAgB,CAC5DR,EAAM5Q,GAAKoR,EAAepR,GAAK,WAC/B,IAAIqU,EAAM9V,KAAKS,UAAU4N,IAAIgE,GAC7BQ,EAAekD,QAAQC,SAASpK,KAAKkK,EAAIC,cAGzC/V,KAAKS,UAAU4N,IAAIgE,GAEvB,GAAIA,GAAuC,SAA9BA,EAAMmC,qBAAmD,KAAjBrB,EAAqB,CACtEnT,KAAKU,cAAcuV,sBAAwB5D,EAE3C,IAAIlJ,EAAW,CAAEsK,cAAeA,EAAeD,aAAcA,EAAcE,YAAaA,EAAaC,WAAYA,GACjH3T,KAAKU,cAAc0S,gBAAgB8C,uBAAuBzS,EAAQ0F,GAClE4K,EAAa/T,KAAKU,cAAc0S,gBAAgBY,gBAChDhU,KAAKU,cAAcuV,sBAAwB,KAG/C,IAAIE,EAAU7U,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,qBAAuBmS,GAUzF,GARA5T,KAAKS,UAAU2V,cAAcD,EAASvC,GACtC5T,KAAKU,cAAc0S,gBAAgBiD,qBAAoB,GACxB,yDAA3BxO,EAAakG,UACblG,EAAakG,UAAY,iEAGzBlG,EAAakG,UAAY,4CAEzB/N,KAAKU,cAAcsS,uBAAyBH,EAAgB,CAC5D,IAAIyD,EAAM9E,EAAOiB,aAAaA,aAAahR,GAAGW,MAAM,KAAK,GAAK,WAC9DpC,KAAKuW,6BAA6BlE,EAAOiE,QAGzCtW,KAAK6P,oBAAoBhI,EAAcwK,EAAMrR,KAAMqR,EAAM5O,OAAQwQ,EAAqBC,GAE1FrM,EAAaV,MAAMqP,cAAgB,OAC/BxW,KAAKS,UAAUgW,YACfzW,KAAKS,UAAUgW,WAAWC,UAAUrE,EAAMxR,UAAW,KAAMwR,EAAO,yBAA0B,GAAIA,EAAOA,GAG3GrS,KAAKS,UAAUkW,iBAAiBtE,EAAMxR,UAAWwR,EAAM5Q,GAAI,uBAAwB4Q,EAAM5O,OAAQ4O,EAAMoC,QAAS,KAAM,KAAMV,GAC5H/T,KAAKS,UAAUqR,sBAAsBjK,EAAazC,KAAM+N,IAGhEnT,KAAKU,cAAc0S,gBAAgBwD,qBACnC5W,KAAKU,cAAcsS,uBAAwB,EAC3ChT,KAAKS,UAAUyS,gCAAiC,GAEpDrT,EAAWc,UAAU4V,6BAA+B,SAAUlE,EAAOiE,GAuDjE,IAtDA,IAAItV,EAAOhB,KAAKU,cAAcO,0BAA0B,iBACpDC,EAAiBC,KAAKC,MAAMJ,GAC5B6V,EAAU,SAAUhV,GACpB,GAAIX,EAAeW,GAAG8Q,MAAQ2D,EAAK,CAC/B,IAAIQ,EAAiBC,EAAOtW,UAAUkG,qBAAqB4I,WAAU,SAAUC,GAAM,OAAOA,EAAG/N,KAAOP,EAAeW,GAAGgL,UAAUpL,GAAGW,MAAM,KAAK,MA6BhJ,GA5BkC,kBAA9BiQ,EAAMmC,qBACNtT,EAAeW,GAAGgL,UAAUsF,cAAgB,OAC5C4E,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUsF,cAAgB,OACtE4E,EAAOtW,UAAUqS,UAAUwD,GAAKnE,cAAgB,OAChDjR,EAAeW,GAAGgL,UAAUjK,WAAayP,EAAMzP,WAC/CmU,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUjK,WAAayP,EAAMzP,WACzEmU,EAAOtW,UAAUqS,UAAUwD,GAAK1T,WAAayP,EAAMzP,WACnD1B,EAAeW,GAAGgL,UAAU/J,SAAWuP,EAAMvP,SAC7CiU,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAU/J,SAAWuP,EAAMvP,SACvEiU,EAAOtW,UAAUqS,UAAUwD,GAAKxT,SAAWuP,EAAMvP,SACjDgU,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgB3E,cAAgB,SAExD,mBAA9BE,EAAMmC,qBACXtT,EAAeW,GAAGgL,UAAUsF,cAAgB,QAC5C4E,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUsF,cAAgB,QACtE4E,EAAOtW,UAAUqS,UAAUwD,GAAKnE,cAAgB,QAChD2E,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgB3E,cAAgB,WAG3FjR,EAAeW,GAAGgL,UAAUsF,cAAgB,OAC5C4E,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUsF,cAAgB,OACtE4E,EAAOtW,UAAUqS,UAAUwD,GAAKnE,cAAgB,OAChD2E,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgB3E,cAAgB,SAE/FjR,EAAeW,GAAGgL,UAAUmK,eAAiB3E,EAAM5O,OACnDsT,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUmK,eAAiB3E,EAAM5O,OAC7EsT,EAAOtW,UAAUqS,UAAUwD,GAAKU,eAAiB3E,EAAM5O,OACvDqT,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgBE,eAAiB3E,EAAM5O,QAChE,SAA9B4O,EAAMmC,oBAAgC,CACtC,IAAIpD,EAAiB,eAAgBiB,EAAMrR,MACvCkQ,EAAS,eAAqBE,GAClClQ,EAAeW,GAAGgL,UAAUvH,MAAQnE,KAAK8P,UAAUC,GACnD6F,EAAOtW,UAAUqS,UAAUwD,GAAKhR,MAAQ+M,EAAMrR,KAC9C+V,EAAOtW,UAAUqS,UAAUwD,EAAIlU,MAAM,KAAK,IAAIkD,MAAQ+M,EAAMrR,KAC5D+V,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUvH,MAAQnE,KAAK8P,UAAUC,GAC7E4F,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgBxR,MAAQnE,KAAK8P,UAAUC,SAGlGhQ,EAAeW,GAAGgL,UAAUvH,MAAQ+M,EAAMrR,KAC1C+V,EAAOrW,cAAckO,oBAAoB/M,GAAGgL,UAAUvH,MAAQ+M,EAAMrR,KACpE+V,EAAOtW,UAAUqS,UAAUwD,EAAIlU,MAAM,KAAK,IAAIkD,MAAQ+M,EAAMrR,KAC5D+V,EAAOtW,UAAUqS,UAAUwD,GAAKhR,MAAQ+M,EAAMrR,KAC9C8V,GAAkB,IAAIC,EAAOtW,UAAUmO,oBAAoBkI,GAAgBxR,MAAQ+M,EAAMrR,MAE7F+V,EAAOtW,UAAUiC,aAAauU,2BAA2B/V,EAAeW,GAAGgL,WAC3EkK,EAAOtW,UAAUiC,aAAawU,iCAAiC,4BAA6BhW,EAAeW,GAAGgL,WAAW,GAAM,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,GAAO,EAAO,GAAI3L,EAAeW,GAAGgL,UAAUvH,SAGrQyR,EAAS/W,KACJ6B,EAAI,EAAGA,EAAIX,EAAeY,OAAQD,IACvCgV,EAAQhV,GAEZ7B,KAAKU,cAAcsJ,wBAAwB9I,EAAgB,kBAK/DrB,EAAWc,UAAU2T,wBAA0B,SAAU7Q,GACrD,MAAO,CAAE2M,EAAG3M,EAAO2M,EAAI,GAAIhG,EAAG3G,EAAO2G,EAAI,GAAI/F,MAAOZ,EAAOY,MAAQ,GAAIE,OAAQd,EAAOc,OAAS,KAMnG1E,EAAWc,UAAUyT,cAAgB,SAAU1C,EAAc7L,EAAa+N,EAAaL,EAAWG,EAAaC,EAAYH,EAAcC,EAAe0D,GAEpJ,IACIC,EAAcpX,KAAKS,UAAUyS,+BAAiC,cAAgB,WAC9EmE,EAAW/V,SAASC,eAAe6V,EAAcxD,EAAc,IAAMlC,GACrE4F,EAAWD,EAAW1U,WAAW0U,EAASlQ,MAAMlD,MAAQsP,EAAY,EACpEiC,EAAc9B,EAAcH,EAAc+D,EAAW/D,EACzD,OAAoB,KAAhB1N,GAAsC,MAAhBA,GACtB7F,KAAK6F,YAAc,EACS,KAAxBwR,EAASlQ,MAAMlD,KACXkT,EACgB,CAAE/G,EAAGsD,EAAe8B,EAAajC,EAAaA,EAAWnJ,EAAGuJ,EAAc6B,EAAajC,EAAaA,EAAWlP,MAAOmP,EAAcjP,OAAQkP,GAG5I,CAAErD,EAAGsD,EAAe8B,EAAajC,EAAaA,EAAWnJ,EAAGuJ,EAAc6B,EAAajC,EAAaA,EAAWlP,MAAOoP,EAAelP,OAAQiP,IAIjKgC,EAAa,GACT2B,EACgB,CAAE/G,EAAGsD,EAAcF,EAAcpJ,EAAGuJ,EAAaH,EAAcnP,MAAOoP,EAAelP,OAAQiP,GAG7F,CAAEpD,EAAGsD,EAAcF,EAAegC,EAAa,EAAGpL,EAAGuJ,EAAaH,EAAegC,EAAYnR,MAAOoP,EAAelP,OAAQiP,MAKnJxT,KAAK6F,YAAc,EACH,CAAEuK,EAAGsD,EAAatJ,EAAGuJ,EAAYtP,MAAOmP,EAAcjP,OAAQkP,KAItF5T,EAAWc,UAAUgJ,sBAAwB,SAAU4H,GACnD,GAAIvR,KAAKkB,eACL,IAAK,IAAIW,EAAI,EAAGA,EAAI7B,KAAKkB,eAAeY,OAAQD,IAAK,CAEjD,IAAIgG,EAAe7H,KAAKkB,eAAeW,GACvC,GAAI0P,EAAMC,OAAOpM,OAASyC,EAAa1F,WAAaoP,EAAMC,OAAO/P,KAAOoG,EAAaiF,SAAU,CAE3F,IAAIF,EAAgBtL,SAASC,eAAevB,KAAKkB,eAAeW,GAAGiL,UAC/DF,EACAA,EAActH,MAAQiM,EAAMC,OAAOlM,OAGnCuC,EAAakI,KAAOwB,EAAMC,OAAOlM,MACjCtF,KAAKU,cAAcsJ,wBAAwBhK,KAAKkB,eAAgB,mBAMpFrB,EAAWc,UAAU+I,sBAAwB,SAAU6H,GAEnD,IAAI3E,EAAgB2E,EAAMC,OAC1B,GAAI5E,EAAcxE,eAAiBpI,KAAKI,eAAgB,CAEpD,IAAIqC,EAAOP,SAAS0K,EAAczF,MAAM9C,OAAUnC,SAAS0K,EAAczF,MAAM5C,QAAU,EACzFqI,EAAczF,MAAM9C,MAAa5B,EAAO,KACxCzC,KAAKI,gBAAiB,EAE1B,GAAoB,IAAhBmR,EAAMgG,OAAe3K,GAA6C,2BAA5BA,EAAcmB,UAAwC,CAE5F,IAAItM,EAAKmL,EAAcnL,GAAGW,MAAM,UAAU,GAAGA,MAAM,KAAK,GACxD,GAAIpC,KAAKC,iBAAiBwB,KAAQmL,EAAc4K,SAAU,CAEtD,IAAInW,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,eAAiBS,SAAST,GAAM,IACpG,GAAIJ,EAAW,CAEX,IAAIoW,EAAgBpW,EAAUqW,uBAAuB,0BACjDD,GAAiBA,EAAc3V,OAAS,IACxC2V,EAAc,GAAGtN,QACjBoH,EAAMoG,uBAOV,IAHA,IAAIC,EAActW,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAvBzB,gBAGjCwQ,GADLiH,EAAgBG,EAAYF,uBAAuB,0BAC1C,GAAGlH,EAAIiH,EAAc3V,OAAQ0O,IACtC,GAAIiH,EAAcjH,GAAGgH,WAAaxX,KAAKE,mBAAmB,KAAM,CAC5DuX,EAAcjH,GAAGrG,QACjBoH,EAAMoG,iBACN,WAKX,CAEGtW,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,cAAgBS,SAAST,IAEzFgW,EAAgBpW,EAAUqW,uBAAuB,0BAFrD,IAGIG,GAAe,EACnB,IAASrH,EAAI,EAAGA,EAAIiH,EAAc3V,OAAQ0O,IAEtC,GADAqH,GAAe,EACXJ,EAAcjH,GAAGgH,WAAc5K,EAAc4K,SAAW,EAAI,CAC5DC,EAAcjH,GAAGrG,QACjB0N,GAAe,EACftG,EAAMoG,iBACN,MAGR,IAAIG,EAAWlL,EAAc4K,SAAW,EACxC,OAAQK,EAAc,CAClB,IAAK,IAAIE,EAAI,EAAGA,EAAIN,EAAc3V,OAAQiW,IAEtC,GADAF,GAAe,EACXJ,EAAcM,GAAGP,WAAa,EAAY,CAC1CC,EAAcM,GAAG5N,QACjB0N,GAAe,EACftG,EAAMoG,iBACN,MAGJ3X,KAAKC,iBAAiBwB,KAAQqW,IAC9BD,GAAe,GAEnBC,GAAsB,IAIlC,GAAIvG,EAAM3E,cAAcwB,UAAU4J,SAAS,oCACvCzG,EAAM3E,cAAcwB,UAAU4J,SAAS,6CACvC,GAAkB,UAAdzG,EAAM+E,IAEN,KAAI2B,EAAkB1G,EAAMC,OAC5B,IAAShB,EAAI,EAAGA,EAAIxQ,KAAKS,UAAUkG,qBAAqB7E,OAAQ0O,IACxDyH,EAAgBxW,KAAOzB,KAAKS,UAAUkG,qBAAqB6J,GAAG/O,KAC9DzB,KAAKiO,SAASgK,EAAgBxW,IAC9BzB,KAAKS,UAAUwR,wBAAwB,mBAAoBjS,KAAKS,UAAUkG,qBAAqB6J,UAKvGe,EAAMoG,kBAIlB9X,EAAWc,UAAU8I,iBAAmB,SAAU8H,GAE9C,IAAI3E,EAAgB2E,EAAMC,OAC1BxR,KAAK6P,oBAAoBjD,IAE7B/M,EAAWc,UAAUuX,yBAA2B,SAAUC,EAAqBC,EAAsBC,EAAgBC,EAAgBC,EAAa1Q,EAAcvF,GAC5J,IAAIkW,EAASH,EAAiBF,EAC1BM,EAASH,EAAiBF,EAC1B7E,EAAYvT,KAAKU,cAAc4H,gBAC/BkL,EAAe,EACfC,EAAgB,EAChBiF,GAAuB,EACvBC,GAAoB,EACpBC,EAAiB,EACjBC,EAAgB,EACpB,GAAIN,EACA/E,EAAexT,KAAKS,UAAUqY,6BAA6BzU,MAAQrE,KAAKS,UAAUqY,6BAA6BzU,MAAQ,IACvHoP,EAAgBzT,KAAKS,UAAUqY,6BAA6BvU,OAASvE,KAAKS,UAAUqY,6BAA6BvU,OAAS,QAEzH,CACD,IAAIwU,EAAalR,EAA4C,SAA7BA,EAAaV,MAAM9C,MAAmBwD,EAAamR,YAAcrW,WAAWkF,EAAaV,MAAM9C,OAASrE,KAAKoD,oBAAoBd,EAAY4N,WAAW5L,OACpL2U,EAAcpR,EAA6C,SAA9BA,EAAaV,MAAM5C,OAAoBsD,EAAaqR,aAAevW,WAAWkF,EAAaV,MAAM5C,QAAUvE,KAAKoD,oBAAoBd,EAAY4N,WAAWnN,QACxLoW,EAAkBJ,EAAaE,EAC/BG,EAAmBH,EAAcF,EACjCM,EAAmBlB,EAAsBC,EACzCkB,EAAoBlB,EAAuBD,EAC3CoB,EAAgB1R,EAAeA,EAAa4K,aAAaA,aAAatL,MAAMe,UAAYL,EAAa4K,aAAaA,aAAatL,MAAMe,UAAYL,EAAaV,MAAMe,UAAY5F,EAAYkX,cAChM,GAAKL,EAAkBE,GAAsBD,EAAmBC,GAAuB/N,KAAKqK,IAAIwD,EAAkBC,IAAsB,EAAI,CACxI,IAAIK,EAAkB,EACjBL,EAAmBC,GAAuB/N,KAAKqK,IAAIwD,EAAkBC,IAAsB,GAC5FT,GAAoB,EACpBc,EAAkBL,EAAmBE,IAGrCZ,GAAuB,EACvBe,EAAkBN,EAAkBE,GAElB,kBAAlBE,GAAuD,mBAAlBA,GAErC/F,EAAeyF,EAAc1F,EAE7BE,EAAgBsF,EAAaxF,IAGzBmF,IAEAE,EAAiBG,EAAaxF,EAE9BC,EAAgBuF,EAAaU,EAAmBlG,EAEhDE,EAAgBwF,EAAc1F,GAE9BoF,IAEAE,EAAgBI,EAAc1F,EAE9BC,EAAeuF,EAAaxF,EAE5BE,EAAiBwF,EAAcQ,EAAmBlG,QAKpC,kBAAlBgG,GAAuD,mBAAlBA,GAErC/F,EAAeyF,EAAc1F,EAE7BE,EAAgBsF,EAAaxF,IAI7BC,EAAeuF,EAAaxF,EAE5BE,EAAgBwF,EAAc1F,GAI1C,IAAImG,GAAmBvB,EAAsBE,GAAkB,EAC3DsB,GAAkBvB,EAAuBE,GAAkB,EAC/D,GAAII,EAAsB,CACtBgB,EAAmBA,EAAkBvB,EAAuBS,EAC5D,IAAIgB,GAAkBhB,EAAiBJ,EAAWhF,EAAegF,GAAW,EAC5EkB,GAAoCE,EACpCD,EAAkBA,EAAiBvB,EAAwB3E,OAE1D,GAAIkF,EAAmB,CACxBe,EAAmBA,EAAkBvB,EAAuB3E,EAC5DmG,EAAkBA,EAAiBvB,EAAwBS,EAC3D,IAAIgB,GAAiBhB,EAAgBJ,EAAWhF,EAAgBgF,GAAW,EAC3EkB,GAAkCE,OAGlCH,EAAmBA,EAAkBvB,EAAuB3E,EAC5DmG,EAAkBA,EAAiBvB,EAAwB3E,EAI/D,OAFAD,GAA8BgF,EAC9B/E,GAAgCgF,EACzB,CAAEiB,gBAAiBA,EAAiBC,eAAgBA,EAAgBnG,aAAcA,EAAcC,cAAeA,IAe1H5T,EAAWc,UAAUkV,2BAA6B,SAAU7U,EAAMuX,EAAa1Q,EAAcvF,GAYzF,IAVA,IAAI8O,EAAiB,eAAgBpQ,GAEjCkQ,EAAS,eAAqBE,GAC9B0I,GAAY,EACZC,GAAY,EACZC,GAAY,EACZC,GAAY,EACZC,EAAkB5Y,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,qBACtE0W,EAAsB,EACtBC,EAAuB,EAClB5H,EAAI,EAAGA,EAAIU,EAAOpP,OAAQ0O,IAAK,CAEpC,IAAI2J,EAAMjJ,EAAOV,GACjB,IAAkB,IAAdsJ,EAEAA,EAAWnX,WAAWwX,EAAI,KAAK9O,YAE/B2O,EAAWrX,WAAWwX,EAAI,KAAK9O,YAE/B0O,EAAWpX,WAAWwX,EAAI,KAAK9O,YAE/B4O,EAAWtX,WAAWwX,EAAI,KAAK9O,gBAE9B,CAED,IAAI+O,EAASzX,WAAWwX,EAAI,KAAK9O,YAE7BgP,EAAS1X,WAAWwX,EAAI,KAAK9O,YAC7ByO,GAAYM,IACZN,EAAWM,GAEXL,GAAYM,IACZN,EAAWM,GAEXL,GAAYI,IACZJ,EAAWI,GAEXH,GAAYI,IACZJ,EAAWI,IAIvBlC,EAAsB+B,EAAkBA,EAAgBlB,YAAc,IACtEZ,EAAuB8B,EAAkBA,EAAgBhB,aAAe,IACxE,IAAIb,EAAiB2B,EAAWF,EAC5BxB,EAAiB2B,EAAWF,EAC5BO,EAAata,KAAKkY,yBAAyBC,EAAqBC,EAAsBC,EAAgBC,EAAgBC,EAAa1Q,EAAcvF,GACrJ,GAAIiW,EAAa,CACb,IAAIhF,EAAYvT,KAAKU,cAAc4H,gBAC/BzH,EAAYb,KAAKU,cAAc6Z,kBAAoB,EACnDC,EAAUlZ,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,YAAcZ,GAC5E6S,GAAgB/Q,WAAW6X,EAAQrT,MAAM9C,OAAS,EAAMiW,EAAW9G,aAAe,GAAMD,EAExFI,GAAehR,WAAW6X,EAAQrT,MAAM5C,QAAU,EAAM+V,EAAW7G,cAAgB,GAAMF,EAC7F,MAAO,CAAEnD,EAAGsD,EAAatJ,EAAGuJ,EAAYtP,MAAOiW,EAAW9G,aAAcjP,OAAQ+V,EAAW7G,eAG3F,MAAO,CAAExP,KAAMqW,EAAWZ,gBAAiBjV,IAAK6V,EAAWX,eAAgBtV,MAAOiW,EAAW9G,aAAcjP,OAAQ+V,EAAW7G,gBAgCtI5T,EAAWc,UAAUkP,oBAAsB,SAAU2B,EAAQiJ,EAAe7E,EAAiB3B,EAAqBC,GAC9GlU,KAAKU,cAAcga,8BAA6B,GAEhD,IAAI1Z,EAAOhB,KAAKU,cAAcO,0BAA0B,eACxD,GAAID,EAAM,CAGN,IADA,IAAI2Z,EAAiBxZ,KAAKC,MAAMJ,GACvBwP,EAAI,EAAGA,EAAImK,EAAe7Y,OAAQ0O,IAAK,CAE5C,IAAIlO,EAAcqY,EAAenK,GACjC,GAAIlO,EAAYwK,WAAa0E,EAAO/P,GAAI,CACpC,GAAI+P,GAA0B,SAAhBA,EAAO7I,MAAmC,aAAhB6I,EAAO7I,MAAuC,aAAhB6I,EAAO7I,KAAqB,CAC9F,IAAIiS,EAAYpJ,EACZoJ,EAAUxM,UAAU4J,SAAS,oCAAsC4C,EAAUxM,UAAU4J,SAAS,8CAC5FyC,IACAnY,EAAYiF,MAAQkT,GAEpB7E,IACAtT,EAAY+O,OAASuE,GAErB3B,IACA3R,EAAYgN,WAAa2E,EACzB3R,EAAY6O,SAAW+C,KAI3B5R,EAAYyN,KAAOyB,EAAOlM,MAC1BhD,EAAYiF,MAAQiK,EAAOlM,YAG9B,GAAoB,UAAhBkM,EAAO7I,KAAkB,CAC9B,IAAK,IAAIoP,EAAI,EAAGA,EAAI4C,EAAe7Y,OAAQiW,IAAK,CAE1B4C,EAAe5C,GAC7B4C,EAAe5C,GAAGjI,YAAc0B,EAAOpM,OACvCuV,EAAe5C,GAAG3I,UAAW,GAGrC9M,EAAY8M,UAAW,OAEtB,GAAoB,aAAhBoC,EAAO7I,KAAqB,CACjC,IAASoP,EAAI,EAAGA,EAAI4C,EAAe7Y,OAAQiW,IAAK,CAE1B4C,EAAe5C,GACjC,GAAI4C,EAAe5C,GAAGjI,YAAc0B,EAAOpM,KAAM,CAC7CuV,EAAe5C,GAAG3I,UAAW,EAE7B,IAAIxC,EAAgBtL,SAASC,eAAeoZ,EAAe5C,GAAGjL,UAC1DF,GACKtK,EAAYwN,YAAc0B,EAAOpM,MAAU9C,EAAYwK,WAAaF,EAAcnL,KACnFa,EAAY8M,UAAW,EACvBxC,EAAcmF,SAAU,IAKpCP,EAAOO,QACPzP,EAAY8M,UAAW,EAGvB9M,EAAY8M,UAAW,OAG1B,GAAoB,eAAhBoC,EAAO7I,MAAyC,IAAhB6I,EAAOqJ,KAM5C,IAJA,IAAI1H,EAAe3B,EAAOvL,QAAQuL,EAAOhR,eAAesa,KAEpDC,EAAYvJ,EAAOwE,SAEdgF,EAAI,EAAGA,EAAID,EAAUjZ,OAAQkZ,IAC9BD,EAAUC,GAAGF,OAAS3H,IACtB7Q,EAAY+M,cAAgB8D,QAInC,GAAoB,oBAAhB3B,EAAO7I,MAA8B6I,EAAOqJ,KAAO,EAAG,CAEvD1H,EAAe3B,EAAOyJ,gBAC1B3Y,EAAY0N,aAAe,GAC3B,IAAK,IAAIkL,EAAI,EAAGA,EAAI/H,EAAarR,OAAQoZ,IAGrC,IADIH,EAAYvJ,EAAOwE,SACdgF,EAAI,EAAGA,EAAID,EAAUjZ,OAAQkZ,IAC9BD,EAAUC,KAAO7H,EAAa+H,IAC9B5Y,EAAY0N,aAAapE,KAAKoP,GAI1C1Y,EAAY+M,cAAgBmC,EAAOlM,MACnC,IAAI6V,EAAQ7Y,EAAY8Y,SAAW9Y,EAAY8Y,SAAStQ,QAAQ0G,EAAOlM,OAAS,EAChFhD,EAAY9B,cAAgB2a,GAAS,EAAIA,EAAQ,EACjD7Y,EAAY0N,aAAe,CAAC1N,EAAY9B,eAExCgR,EAAOnK,WACP/E,EAAY6M,YAAa,GAE7BnP,KAAKiJ,2BAA2B3G,GAChC,MAEKkP,GAAyC,MAA/BA,EAAO6J,aAAa,SAAmC,SAAhB7J,EAAO7I,MAAmBrG,EAAYwK,WAAa0E,EAAO8J,KAAK7Z,KACrHa,EAAY+M,cAAgBmC,EAAOlM,OAEvCtF,KAAKiJ,2BAA2B3G,GAEpCsH,OAAOC,eAAeC,WAAW9J,KAAKU,cAAcqJ,WAAa,eACjE/J,KAAKU,cAAcsJ,wBAAwB2Q,EAAgB,eAE/D,GAAI3a,KAAKS,UAAUuG,oBAAsBwK,GAAUA,EAAO/P,GAAI,CAC1D,IAAI8Z,EAAevb,KAAKS,UAAUqS,UAAUtB,EAAO/P,GAAGW,MAAM,KAAK,IACjE,GAAImZ,GAAgBA,EAAaxF,SAAWwF,EAAaxF,QAAQC,SAAS,GAAI,CAC1EuF,EAAajW,MAAQkM,EAAOlM,MAC5B,IAAIkW,EAAQ,eAA4BD,EAAaxF,QAAQC,SAAS,IAAIyF,QAC1Ezb,KAAKS,UAAUuG,mBAAmB0U,wCAAwCF,EAAOD,EAAaxF,QAAQC,SAAS,GAAIuF,EAAaI,wBAAyBJ,MAOrK1b,EAAWc,UAAUib,yBAA2B,WAC5C,IAAI5a,EAAOhB,KAAKU,cAAcO,0BAA0B,iBACpDC,EAAiBC,KAAKC,MAAMJ,GAChC,GAAIE,EACA,IAAK,IAAIW,EAAI,EAAGA,EAAIX,EAAeY,OAAQD,IACvC7B,KAAKS,UAAUuG,mBAAmB6U,gBAAgB3a,EAAeW,GAAG8Q,IAAIvQ,MAAM,KAAK,KAK/FvC,EAAWc,UAAUiI,sBAAwB,SAAUkT,EAAUjb,EAAWsa,EAAO7Y,EAAaoC,GAE5F,IAAIkD,EAAatG,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,SAAWZ,EAAY,IAAMsa,GAClG,GAAIvT,EAAY,CACZ,IAAIvG,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,cAAgBZ,GAC9D,SAAlBib,EAASnT,MAAmBf,EAAWV,gBAAkB7F,GACzDuG,EAAWV,cAAcqH,SAE7B3G,EAAW2G,SAGf,IAKIwN,EACAC,EACAvG,EACAwG,EARA5E,EAAW/V,SAASC,eAAe,WAAaV,EAAY,IAAMA,GAClEoD,EAAOtB,WAAWmZ,EAAS3U,MAAMlD,MACjCQ,EAAMvC,SAAS4Z,EAAS3U,MAAM1C,KAC9BJ,EAAQ1B,WAAWmZ,EAAS3U,MAAM9C,OAClCE,EAAS5B,WAAWmZ,EAAS3U,MAAM5C,QAKnCgP,EAAYvT,KAAKU,cAAc4H,gBAC/B+O,IAAa3S,IACbqX,EAAgBpZ,WAAW0U,EAASlQ,MAAM9C,OAC1C2X,EAAgBrZ,WAAW0U,EAASlQ,MAAM5C,QACV,iBAA5B8S,EAASlQ,MAAMe,YACfmP,EAASlQ,MAAMe,UAAY,eAC3BuN,EAAkBlR,EAAS,EAC3B0X,EAAkBF,EAAgBxI,EAClC8D,EAASlQ,MAAMlD,KAASA,GAAQwR,EAAmBsG,EAAgBxI,GAAgB0I,EAAkB,EAAM,MAE/E,kBAA5B5E,EAASlQ,MAAMe,YACfmP,EAASlQ,MAAMe,UAAY,eAC3BmP,EAASlQ,MAAMlD,KAAOA,EAAO,KAC7BoT,EAASlQ,MAAM1C,IAAM,EAAQ,MAED,kBAA5B4S,EAASlQ,MAAMe,YACfmP,EAASlQ,MAAMe,UAAY,eAC3BuN,EAAkBlR,EAAS,EAC3B0X,EAAkBF,EAAgBxI,EAClC8D,EAASlQ,MAAMlD,KAASA,GAAQwR,EAAkBwG,GAAqBA,EAAkB,EAAM,KAC/F5E,EAASlQ,MAAM1C,IAAQA,GAAOJ,EAAS2X,EAAgBzI,GAAgByI,EAAgBzI,EAAa,EAAO,OAG/GjR,EAAY4Z,kBAAoBlc,KAAKG,kBACrC2b,EAAS/N,UAAY,4CACrB+N,EAAS3U,MAAMqP,cAAgB,QAE1BlU,EAAY4Z,iBACb5Z,EAAYiF,OACZuU,EAAS/N,UAAY,4CACrB+N,EAAS3U,MAAMqP,cAAgB,QAG/BsF,EAAS/N,UAAY,kCAGC,WAArBzL,EAAYE,OACjBsZ,EAAS/N,UAAY,0BAEzB+N,EAASra,GAAKzB,KAAKS,UAAUe,QAAQC,GAAK,SAAWZ,EAAY,IAAMsa,EACvEW,EAAS3U,MAAMgV,OAAS,KAc5Btc,EAAWc,UAAUgH,iBAAmB,SAAUrF,EAAazB,EAAWsa,EAAOiB,EAAgBza,GAE7F,IAAIkG,EAEJ,OAAQvF,EAAY,SAChB,IAAK,UACDuF,EAAe7H,KAAKqc,mBAAmB/Z,EAAazB,EAAW,QAC/D,MACJ,IAAK,WACDgH,EAAe7H,KAAKqc,mBAAmB/Z,EAAazB,EAAW,YAC/D,MACJ,IAAK,cACDgH,EAAe7H,KAAKsc,oBAAoBha,EAAazB,EAAW,SAChE,MACJ,IAAK,WACDgH,EAAe7H,KAAKsc,oBAAoBha,EAAazB,EAAW,WAAYub,GAC5E,MACJ,IAAK,WACDvU,EAAe7H,KAAKuc,oBAAoBja,EAAazB,EAAWsa,EAAOiB,GACvE,MACJ,IAAK,UACDvU,EAAe7H,KAAKwc,mBAAmBla,EAAazB,GACpD,MACJ,IAAK,eACL,IAAK,iBACDgH,EAAe7H,KAAKyc,qBAAqBna,EAAazB,EAAWsa,EAAOiB,EAAgBza,GACxF,IAAI+C,GAAiB,EACW,IAA5BpC,EAAY,cACZoC,GAAiB,GAEjBpC,EAAYiF,OAA+B,KAAtBjF,EAAYiF,QACjCvH,KAAKwH,qBAAqBlF,EAAa6Y,EAAOiB,EAAgB1X,GAC9D1E,KAAKM,qBAAsB,EAC3BqB,KAEJ,MACJ,IAAK,SACDkG,EAAe7H,KAAK0c,kBAAkBpa,EAAazB,GACnD,MACJ,IAAK,MACGb,KAAKS,UAAUuG,oBACX1E,EAAYiF,OAA+B,KAAtBjF,EAAYiF,QAAiBvH,KAAKM,qBACvDN,KAAKwH,qBAAqBlF,EAAa6Y,EAAOiB,GAGtD,MACJ,IAAK,gBACL,IAAK,iBACG9Z,EAAYiF,OAA+B,KAAtBjF,EAAYiF,QAAiBvH,KAAKM,qBACvDN,KAAKwH,qBAAqBlF,EAAa6Y,EAAOiB,GAElD,MAER,MAAO,CAAEvU,aAAcA,EAAclG,MAAOA,IAEhD9B,EAAWc,UAAUkG,iBAAmB,SAAUvE,GAE9C,IAAIuF,EAEJ,OAAQvF,EAAY,SAChB,IAAK,UACDuF,EAAe,UACf,MACJ,IAAK,WACDA,EAAe,WACf,MACJ,IAAK,cACDA,EAAe,cACf,MACJ,IAAK,WACDA,EAAe,WACf,MACJ,IAAK,WACDA,EAAe,WACf,MACJ,IAAK,UACDA,EAAe,UACf,MACJ,IAAK,iBACDA,EAAe,iBACXvF,EAAYC,iBACZsF,EAAe,gBAEnB,MACJ,IAAK,eACDA,EAAe,eACf,MAER,OAAOA,GAGXhI,EAAWc,UAAU+b,kBAAoB,SAAU1b,EAAMH,GAErD,IAAI+G,EAAatG,SAASyK,cAAc,SAgBxC,OAfI/K,EAAKuG,OACLK,EAAWe,KAAO,QAClBf,EAAW2N,IAAMvU,EAAKuG,OAGtBK,EAAWe,KAAO,SAEtBf,EAAWmG,UAAY,kBACL,KAAd/M,EAAK+O,KACLnI,EAAWtC,MAAQtE,EAAK+O,KAGxBnI,EAAWtC,MAAQ,GAEvBsC,EAAWxC,KAAOpE,EAAKmB,UAChByF,GAGX/H,EAAWc,UAAU0b,mBAAqB,SAAUrb,EAAMH,EAAW8H,GAEjE,IAAIf,EACJ,GAAqB,IAAjB5G,EAAKsF,QAyBT,OAtBItF,EAAK4E,WACLgC,EAAatG,SAASyK,cAAc,YACpCnE,EAAWT,MAAMwV,OAAS,SAG1B/U,EAAatG,SAASyK,cAAc,SACpCnE,EAAWe,KAAOA,GAElB3H,EAAKoF,UAAY,IACjBwB,EAAWzB,UAAYnF,EAAKoF,WAEhCpG,KAAK4c,oBAAoB5b,EAAM4G,GACb,KAAd5G,EAAK+O,KACLnI,EAAWtC,MAAQtE,EAAK+O,KAGxBnI,EAAWtC,MAAQ,GAElBtF,KAAKS,UAAUoc,qBAChBjV,EAAWkV,aAAe,OAE9BlV,EAAWxC,KAAOpE,EAAKmB,UAChByF,GAGX/H,EAAWc,UAAUkI,gBAAkB,SAAU7H,EAAM4G,GAEnD,IADA,IAAImV,GAAa,EACRC,EAAI,EAAGA,EAAIhd,KAAKK,mBAAmByB,OAAQkb,IAChD,GAAIpV,EAAWnG,KAAOzB,KAAKK,mBAAmB2c,GAAI,CAC9CD,GAAa,EACb,MAMR,GAHK/c,KAAKS,UAAUuG,oBAAuBhH,KAAKS,UAAUkN,mBAAqB3M,EAAKuB,iBAAkBvB,EAAKkb,mBACvGa,GAAa,GAEb/b,EAAKmO,aAAgBnP,KAAKS,UAAUwc,kBAAqBF,EACzDnV,EAAWP,UAAW,EACtBO,EAAWT,MAAMyI,OAAS,UAC1BhI,EAAWT,MAAM3D,gBAAkB,kBAElC,CAED,IAAIuB,EAAc/D,EAAKkc,UACvBtV,EAAWT,MAAM3D,gBAAkB,QAAUuB,EAAYpB,EAAI,IAAMoB,EAAYnB,EAAI,IAAMmB,EAAYlB,EAAlE,QAEnC,IAAIG,EAAYhD,EAAKmc,UACrBvV,EAAWT,MAAM1B,MAAQ,QAAUzB,EAAUL,EAAI,IAAMK,EAAUJ,EAAI,IAAMI,EAAUH,EAA5D,QAQjChE,EAAWc,UAAUyc,mBAAqB,SAAUL,GAEhD,IAAIrN,EAAapO,SAASoW,uBAAuB,0BACjD1X,KAAKqd,uBAAuB3N,EAAYqN,GAExC,IAAIrQ,EAAkBpL,SAASoW,uBAAuB,mCACtD1X,KAAKqd,uBAAuB3Q,EAAiBqQ,IAGjDld,EAAWc,UAAU0c,uBAAyB,SAAU3N,EAAYqN,GAChE,IAAK,IAAIlb,EAAI,EAAGA,EAAI6N,EAAW5N,OAAQD,IACnC,GAAI6N,EAAW7N,GAAI,CAEf,IAAI+F,EAAa8H,EAAW7N,GACvBkb,EAMDnV,EAAWP,UAAW,GALtBO,EAAWP,UAAW,EACtBO,EAAWT,MAAMyI,OAAS,aAU1C/P,EAAWc,UAAUmI,cAAgB,SAAU9H,EAAM4G,EAAY/G,GAC7D+G,EAAW4P,SAAWxW,EAAKsc,SAC3Btd,KAAKc,YAAcwK,KAAKiS,IAAIvd,KAAKc,YAAa8G,EAAW4P,WAC/B,IAAtBxX,KAAKe,cACLf,KAAKe,YAAc6G,EAAW4P,UAElCxX,KAAKe,YAAcuK,KAAKkS,IAAIxd,KAAKe,YAAa6G,EAAW4P,UACzDxX,KAAKC,iBAAiBY,EAAUwK,YAAcrL,KAAKc,YACnDd,KAAKE,mBAAmBW,EAAUwK,YAAcrL,KAAKe,aAGzDlB,EAAWc,UAAUoI,qBAAuB,SAAU/H,EAAM4G,GACxD,GAAI5G,EAAK8F,WACLc,EAAW6V,UAAW,EACtB7V,EAAWT,MAAMuW,OAAS,oBAEzB,CAED,IAAI3Y,EAAc/D,EAAK2c,YACvB/V,EAAWT,MAAMuW,OAAS1c,EAAK4c,YAC/BhW,EAAWT,MAAMpC,YAAc,QAAUA,EAAYpB,EAAI,IAAMoB,EAAYnB,EAAI,IAAMmB,EAAYlB,EAAlE,MAEnC,GAAwB,aAApB+D,EAAWe,MAA2C,UAApBf,EAAWe,KAAkB,CAC/D,IAAIkV,EAAc7c,EAAK8c,YACvB9d,KAAK+d,sBAAsBF,EAAajW,KAIhD/H,EAAWc,UAAUqI,kBAAoB,SAAUpB,GAEvB,WAApBA,EAAWe,MAA2D,6BAArCf,EAAWT,MAAM3D,iBAAuF,uBAArCoE,EAAWT,MAAM3D,kBACrHoE,EAAWT,MAAM3D,gBAAkB,yBAER,6BAA3BoE,EAAWT,MAAM1B,QACjBmC,EAAWT,MAAM1B,MAAQ,UAIjC5F,EAAWc,UAAUic,oBAAsB,SAAU5b,EAAM4G,GAEvD,IAAI5B,EAAYhF,EAAKuC,UACrB,OAAQyC,GACJ,KAAK,EACD4B,EAAWT,MAAM6W,UAAY,OAC7B,MACJ,KAAK,EACDpW,EAAWT,MAAM6W,UAAY,SAC7B,MACJ,KAAK,EACDpW,EAAWT,MAAM6W,UAAY,QAC7B,MACJ,KAAK,EACDpW,EAAWT,MAAM6W,UAAY,UAC7B,QAIZne,EAAWc,UAAUod,sBAAwB,SAAUF,EAAajW,GAEhE,OAAQiW,GACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,QAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,SAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,SAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,QAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,SAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,SAC/B,MACJ,KAAK,EACDjW,EAAWT,MAAM0W,YAAc,QAC/B,QAIZhe,EAAWc,UAAU2b,oBAAsB,SAAUtb,EAAMH,EAAW8H,EAAMyT,GAExE,IAAIxU,EAAatG,SAASyK,cAAc,SAOxC,OANAnE,EAAWe,KAAOA,EACd3H,EAAKoO,WACLxH,EAAWmK,SAAU,GAEzBnK,EAAWxC,KAAOpE,EAAK8O,UACvBlI,EAAWtC,MAAQtE,EAAKuG,MACjBK,GAGX/H,EAAWc,UAAU4b,oBAAsB,SAAUvb,EAAMH,EAAWsa,EAAOiB,GAEzE,IAAIxU,EAAatG,SAASyK,cAAc,UAEpC+E,EAAa9P,EAAK,YACtB,GAAIA,EAAKoO,WAAagN,EAAgB,CAElC,IAAI7P,EAAgBjL,SAASC,eAAe,mBAAqBV,EAAY,IAAMsa,GAC/E5O,GACAA,EAAcgC,SAGlB,IAAI0P,EAAc3c,SAASyK,cAAc,SACzCkS,EAAYxc,GAAK,mBAAqBZ,EAAY,IAAMsa,EACxD8C,EAAYC,aAAa,OAAQle,KAAKS,UAAUe,QAAQC,GAAK,SAAWZ,EAAY,IAAMsa,GAE1F,IAAI1X,EAASzC,EAAK,cAEdyB,EAAOzB,EAAK,QAUhB,GATAid,EAAY9W,MAAMgC,SAAW,WAC7B8U,EAAY9W,MAAMuW,OAAS,MAE3B1d,KAAKmI,cAAc8V,EAAaxa,EAAQhB,EAAM5B,EAAWG,EAAK,aAC9Did,EAAY9W,MAAM3D,gBAAkB,wBACpCya,EAAYlQ,UAAY,0BACI,IAAxB/M,EAAKR,gBACLyd,EAAY3Y,MAAQtE,EAAKqO,eAEzB+M,EACAA,EAAelT,YAAY+U,OAE1B,CACD,IAAI5c,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,cAAgBZ,GACpFQ,EAAU6H,YAAY+U,GAE1BA,EAAY7U,iBAAiB,QAASpJ,KAAKqJ,gBAAgBC,KAAKtJ,OAChEie,EAAY7U,iBAAiB,OAAQpJ,KAAKuJ,eAAeD,KAAKtJ,OAC9Die,EAAY7U,iBAAiB,QAASpJ,KAAKwJ,iBAAiBF,KAAKtJ,OACjEie,EAAY7U,iBAAiB,SAAUpJ,KAAKyJ,iBAAiBH,KAAKtJ,OAClEie,EAAY7U,iBAAiB,UAAWpJ,KAAK0J,sBAAsBJ,KAAKtJ,OACxE4H,EAAatG,SAASyK,cAAc,YAExC,IAAK,IAAIrD,EAAI,EAAGA,EAAIoI,EAAWhP,OAAQ4G,IAAK,CAExC,IAAIyV,EAAS7c,SAASyK,cAAc,UACpCoS,EAAOpQ,UAAY,mBACf/M,EAAKqO,gBAAkByB,EAAWpI,IAAM1H,EAAKR,gBAAkBkI,EAC/DyV,EAAOC,UAAW,EAGlBD,EAAOC,UAAW,EAEtBD,EAAOE,UAAYvN,EAAWpI,GAC9Bd,EAAWsB,YAAYiV,GAG3B,OADAvW,EAAWxC,KAAOpE,EAAK+O,KAChBnI,GAGX/H,EAAWc,UAAU6b,mBAAqB,SAAUxb,EAAMH,GAEtD,IAAI+G,EAAatG,SAASyK,cAAc,UAEpC+E,EAAa9P,EAAK,YAClBA,EAAKsd,YACL1W,EAAW2W,UAAW,GAGtB3W,EAAW2W,UAAW,EACtB3W,EAAWiT,KAAO/J,EAAWhP,QAEjC,IAAK,IAAI4G,EAAI,EAAGA,EAAIoI,EAAWhP,OAAQ4G,IAAK,CAExC,IAAIyV,EAAS7c,SAASyK,cAAc,UACpCoS,EAAOpQ,UAAY,sBACnB,IAAK,IAAIiN,EAAI,EAAGA,EAAIha,EAAKgP,aAAalO,OAAQkZ,IACtCha,EAAKgP,aAAagL,KAAOtS,IACzByV,EAAOC,UAAW,GAG1BD,EAAOE,UAAYvN,EAAWpI,GAC9Bd,EAAWsB,YAAYiV,GAG3B,OADAvW,EAAWxC,KAAOpE,EAAK+O,KAChBnI,GAGX/H,EAAWc,UAAU8b,qBAAuB,SAAUzb,EAAMH,EAAWsa,EAAOiB,EAAgBza,GAE1F,IAAIiG,EAAatG,SAASyK,cAAc,SACxCnE,EAAWe,KAAO,OAClBf,EAAWxC,KAAOpE,EAAKmB,UAEvB,IAAIoK,EAAgBjL,SAASC,eAAe,WAAaV,EAAY,IAAMsa,GACvE5O,IAAkB6P,GAClB7P,EAAcgC,SAElBvO,KAAKU,cAAc8d,eAAiBxd,EAAKuB,eACzC,IAAIkc,EAAgBze,KAAKU,cAAc8d,eAAiB,UAAY,OAEhEE,EAA0G,KAA3E1e,KAAKS,UAAUke,uBAAuBC,2BAA2Bva,MAAgBrE,KAAKU,cAAc8d,eAAiB,GAAK,GAAMxe,KAAKS,UAAUke,uBAAuBC,2BAA2Bva,MAEhOwa,EAAOvd,SAASyK,cAAc,QAC9B1K,EAAYC,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,cAAgBZ,GAEhF4C,EAASzC,EAAK,cAGdiD,GADOjD,EAAK,QACLhB,KAAKoD,oBAAoBK,EAAOS,IACvCO,EAAMzE,KAAKoD,oBAAoBK,EAAOW,GAEtCG,EAASvE,KAAKS,UAAUke,uBAAuBC,2BAA2Bra,OAASd,EAAOV,OAAS,EAAIU,EAAOV,OAAS,EAAI/C,KAAKS,UAAUke,uBAAuBC,2BAA2Bra,OAE5LF,EAAQqa,EAA+Bjb,EAAOa,MAAQ,EAAIb,EAAOa,MAAQ,EAAIoa,EAE7E5b,EAAW9C,KAAKS,UAAUke,uBAAuBC,2BAA2B9b,SAAWyB,EAAS,EAAI,GAAKvE,KAAKS,UAAUke,uBAAuBC,2BAA2B9b,SAC9K+b,EAAK1X,MAAMgC,SAAW,WACtB0V,EAAKpd,GAAK,WAAaZ,EAAY,IAAMsa,EACzC,IAAI5H,EAAYvT,KAAKU,cAAc4H,gBAC/B8D,EAAWpM,KAAK6E,SAAShE,GAEzBie,EAAc,CAAE7a,KAAMA,EAAMQ,IAAKA,EAAKJ,MAAOA,EAAOE,OAAQA,GAE5Dwa,EAAc/e,KAAK4E,UAAUka,EAAaje,GA4B9C,OA3BAge,EAAK1X,MAAMe,UAAY,UAAYkE,EAAW,OAC9CyS,EAAK1X,MAAMlD,KAAO8a,EAAY9a,KAAOsP,EAAY,KACjDsL,EAAK1X,MAAM1C,IAAMsa,EAAYta,IAAM8O,EAAY,KAC3C,OAAQyL,WAAahf,KAAKS,UAAUwe,mBACpCJ,EAAK1X,MAAM5C,OAAS,MACpBsa,EAAK1X,MAAM9C,MAAQ,OACnBwa,EAAK1X,MAAMrE,SAAW,QAGtB+b,EAAK1X,MAAM5C,OAASA,EAAS,KAC7Bsa,EAAK1X,MAAM9C,MAAQA,EAAQ,KAC3Bwa,EAAK1X,MAAMrE,SAAWA,EAAW,KAC7B,mBACA+b,EAAK1X,MAAMrE,SAAYA,EAAW,EAAK,OAG/C+b,EAAK1X,MAAM+X,QAAU,MACrBL,EAAK1X,MAAM6W,UAAY,SACvBa,EAAK1X,MAAMgY,UAAY,cAEvBN,EAAKR,UAAYre,KAAKS,UAAUke,uBAAuBC,2BAA2B9D,KAAO9a,KAAKS,UAAUke,uBAAuBC,2BAA2B9D,KAAO2D,EACjKI,EAAK1X,MAAM1B,MAAQzF,KAAKS,UAAUke,uBAAuBC,2BAA2BnZ,MAAQzF,KAAKS,UAAUke,uBAAuBC,2BAA2BnZ,MAAQ,QAErKoZ,EAAK1X,MAAM3D,gBAAkBxD,KAAKS,UAAUke,uBAAuBC,2BAA2Bpb,gBAAkBxD,KAAKS,UAAUke,uBAAuBC,2BAA2Bpb,gBAAkB,SACnMqb,EAAK1X,MAAMsN,QAAUzU,KAAKS,UAAUke,uBAAuBC,2BAA2BnK,QAAUzU,KAAKS,UAAUke,uBAAuBC,2BAA2BnK,QAAU,EAC3KpT,EAAU6H,YAAY2V,GACtB7e,KAAKsH,iBAAiBtG,EAAMW,GACrBiG,GAGX/H,EAAWc,UAAU2G,iBAAmB,SAAU8X,EAAUzd,GACxD3B,KAAKG,kBAAmB,EAExB,IAAIa,EAAOhB,KAAKU,cAAcO,0BAA0B,eACxD,GAAID,EAGA,IADA,IAAIE,EAAiBC,KAAKC,MAAMJ,GACvBwP,EAAI,EAAGA,EAAItP,EAAeY,OAAQ0O,IAAK,CAE5C,IAAIlO,EAAcpB,EAAesP,GAEjC,IAA0B,QAArBlO,EAAYE,MAAuC,mBAArBF,EAAYE,MAAkD,mBAArBF,EAAYE,MAAkD,kBAArBF,EAAYE,OAA6BF,EAAYH,YAAcid,EAASpd,gBAAkB,IAAML,GAASW,EAAYiF,OAA+B,KAAtBjF,EAAYiF,MAAc,CAC7Q6X,EAAS7X,MAAQjF,EAAYiF,MAC7B6X,EAAS9P,WAAahN,EAAYgN,WAClC8P,EAASjO,SAAW7O,EAAY6O,SAChCnR,KAAKG,kBAAmB,EACnBif,EAAS/N,SACV+N,EAAS/N,OAAS/O,EAAY4N,YAElC,OAIZ,OAAOlQ,KAAKG,kBAGhBN,EAAWc,UAAUiE,UAAY,SAAUuL,EAAOtP,EAAWuL,EAAU1H,GAEnE,IAEIjB,EAFAyI,EAAclM,KAAKU,cAAcyL,SAAStL,GAS9C,OALI4C,EADA2I,EAAW,EACFpM,KAAKqf,kBAAkBjT,EAAU+D,EAAOjE,EAAaxH,GAGrD1E,KAAKqf,kBAAkBnT,EAAYE,SAAU+D,EAAOjE,EAAaxH,GAEvEjB,GAGX5D,EAAWc,UAAU0e,kBAAoB,SAAUjT,EAAU+D,EAAOjE,EAAaxH,GAE7E,IAAIjB,EACJ,GAAKiB,EAmCA,CACD,OAAQ0H,GACJ,KAAK,EAED3I,EAAS0M,EACT,MACJ,KAAK,EAED1M,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAM1L,IAAM0L,EAAM5L,QAAU4L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAIE,IAAK0L,EAAMlM,MAAQkM,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAIF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAChM,MACJ,KAAK,EAEDd,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAMlM,KAAOkM,EAAM9L,MAAOI,IAAKyH,EAAY3H,OAAS4L,EAAM1L,IAAM0L,EAAM5L,OAAQF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QACrJ,MACJ,KAAK,EAEDd,EAAS,CAAEQ,KAAMkM,EAAM1L,KAAO0L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAIE,IAAMyH,EAAY3H,OAAS4L,EAAMlM,KAAOkM,EAAM9L,OAAS8L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAKF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAClM,MAEHd,IACDA,EAAS0M,OAvDI,CACjB,OAAQ/D,GACJ,KAAK,GAED3I,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAM1L,IAAM0L,EAAM5L,OAAQE,IAAK0L,EAAMlM,KAAMI,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OACnH,MACJ,KAAK,IAEDZ,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAMlM,KAAOkM,EAAM9L,MAAOI,IAAKyH,EAAY3H,OAAS4L,EAAM1L,IAAM0L,EAAM5L,OAAQF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QACrJ,MACJ,KAAK,IAEDd,EAAS,CAAEQ,KAAMkM,EAAM1L,IAAKA,IAAKyH,EAAY3H,OAAS4L,EAAMlM,KAAOkM,EAAM9L,MAAOA,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OACnH,MACJ,KAAK,EAEDZ,EAAS0M,EACT,MACJ,KAAK,EAED1M,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAM1L,IAAM0L,EAAM5L,OAAQE,IAAK0L,EAAMlM,KAAMI,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OACnH,MACJ,KAAK,EAEDZ,EAAS,CAAEQ,KAAMiI,EAAY7H,MAAQ8L,EAAMlM,KAAOkM,EAAM9L,MAAOI,IAAKyH,EAAY3H,OAAS4L,EAAM1L,IAAM0L,EAAM5L,OAAQF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QACrJ,MACJ,KAAK,EAEDd,EAAS,CAAEQ,KAAMkM,EAAM1L,IAAKA,IAAKyH,EAAY3H,OAAS4L,EAAMlM,KAAOkM,EAAM9L,MAAOA,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OACnH,MAEHZ,IACDA,EAAS0M,GA0BjB,OAAO1M,GAGX5D,EAAWc,UAAUwH,cAAgB,SAAUP,EAAYnE,EAAQhB,EAAM5B,EAAWuL,EAAU1H,GAC1F,GAAIjB,EAAQ,CACR,IAAIQ,EAAOjE,KAAKoD,oBAAoBK,EAAOS,GACvCob,EAAQtf,KAAKoD,oBAAoBK,EAAOW,GACxCC,EAAQrE,KAAKoD,oBAAoBK,EAAOa,OACxCC,EAASvE,KAAKoD,oBAAoBK,EAAOV,QACzCwc,EAAa,EAEbR,EAAc,CAAE9a,KAAMA,EAAMQ,IAAK6a,EAAOjb,MAAOA,EAAOE,OAAQA,GAE9Dua,EAAc9e,KAAK4E,UAAUma,EAAale,EAAWuL,EAAU1H,GACtD,OAATjC,GAAiBA,EAAKM,SACtB6E,EAAWT,MAAMvE,WAAaH,EAAKD,KAC/BC,EAAKO,SACL4E,EAAWT,MAAMtE,UAAY,UAE7BJ,EAAKQ,OACL2E,EAAWT,MAAMqY,WAAa,QAElCD,EAAavf,KAAKoD,oBAAoBX,EAAKY,OAE/CrD,KAAKU,cAAc+e,kBAAkB7X,EAAYkX,EAAY7a,KAAM6a,EAAYra,IAAK8a,EAAYT,EAAYza,MAAOya,EAAYva,QAAQ,KAI/I1E,EAAWc,UAAU6G,qBAAuB,SAAUxG,EAAMma,EAAOiB,EAAgB1X,GAC/E,IAAK0X,EAAgB,CAEjB,IAAI3Y,OAAS,EAETA,EADAzC,EAAKqQ,QAAwB,QAAdrQ,EAAKwB,KACXxB,EAAKqQ,OAGLrQ,EAAKkP,WAElB,IAAIwD,OAAc,EACdC,OAAa,EACbH,OAAe,EACfC,OAAgB,EAChBhQ,EAAO2M,GAAK3M,EAAO2G,GAAK3G,EAAOY,OAASZ,EAAOc,QAC/CmP,EAAcjQ,EAAO2M,EACrBuD,EAAalQ,EAAO2G,EACpBoJ,EAAe/P,EAAOY,MACtBoP,EAAgBhQ,EAAOc,SAGvBmP,EAAc1T,KAAKoD,oBAAoBK,EAAOS,GAC9CyP,EAAa3T,KAAKoD,oBAAoBK,EAAOW,GAC7CoP,EAAexT,KAAKoD,oBAAoBK,EAAOa,OAC/CmP,EAAgBzT,KAAKoD,oBAAoBK,EAAOV,SAGpD,IAAI6Q,EAAcjR,WAAW3B,EAAK,cAE9BmP,EAAQ,CAAElM,KAAMyP,EAAajP,IAAKkP,EAAYtP,MAAOmP,EAAcjP,OAAQkP,GAE3EiM,EAAY1f,KAAK2f,sBAAsBxP,EAAOyD,EAAalP,GAC3D2N,OAAQ,EACRzP,EAAa5B,EAAKsO,WAAatO,EAAKsO,WAAatO,EAAK4B,WAE1D,GAAK5B,EAAKuG,MAAMnF,MAAM,WAAW,GAC7BiQ,EAAQ,CAEJ5Q,GAAIzB,KAAKS,UAAUe,QAAQC,GAAK,SAAWmS,EAAc,IAAMuH,EAAO1X,OAAQic,EAAW7e,UAAW+S,EAAa5S,KAAMA,EAAKuG,MAAOgN,aAAc,GACjJC,oBAAqB,iBAAkBC,QAAS,EAAG5O,YAAanB,EAAiB1E,KAAK6E,SAAS+O,GAAe,EAAGc,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,UAG9N,IAAInS,GAAgB5B,EAAKuG,OAASvG,EAAKuG,MAAMqY,WAAW,MAAQ5e,EAAKuG,MAAMnF,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAGwd,WAAW,KASlH,CACD,IAAIC,EAAUH,EACVI,EAAa,CAAE7b,KAAMyb,EAAUtP,EAAG3L,IAAKib,EAAUtV,EAAG/F,MAAOqb,EAAUrb,MAAOE,OAAQmb,EAAUnb,QAClGsb,EAAU7f,KAAK2f,sBAAsBG,EAAYlM,GAAa,GAC9DvB,EAAQ,CAEJ5Q,GAAIzB,KAAKS,UAAUe,QAAQC,GAAK,SAAWmS,EAAc,IAAMuH,EAAO1X,OAAQoc,EAAShf,UAAW+S,EAAa5S,KAAMA,EAAKuG,MAAOgN,aAAc,GAC/IC,oBAAqB,OAAQC,QAAS,EAAG5O,YAAa,EAAG6O,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,UAfvK1C,EAAQ,CAEJ5Q,GAAIzB,KAAKS,UAAUe,QAAQC,GAAK,SAAWmS,EAAc,IAAMuH,EAAO1X,OAAQic,EAAW7e,UAAW+S,EAAa5S,KAAMA,EAAKuG,MAAOgN,aAAc,GACjJC,oBAAqB,gBAAiBC,QAAS,EAAG5O,YAAanB,EAAiB1E,KAAK6E,SAAS+O,GAAe,EAAGc,UAAW,iBAAkBC,SAAU,GAAIC,OAAQ,CAAEC,MAAO,GAAIC,WAAY,GAAIP,aAAc,GAAIQ,OAAQ,IAAMnS,WAAY5B,EAAKsO,WAAYxM,SAAU9B,EAAKmQ,UAEhRkB,EAAMzP,WAAaA,EACnByP,EAAMvP,SAAW9B,EAAKmQ,SAAWnQ,EAAKmQ,SAAWnQ,EAAK8B,SAY1D,GAAmB,mBAAd9B,EAAKwB,MAA2C,iBAAdxB,EAAKwB,MAA6B,eAAkBxB,EAAKS,IAoB3F,CACD,IAAI+P,EAASlQ,SAASC,eAAe8Q,EAAM5Q,IACvC+P,GAAUA,EAAOpD,UAAU4J,SAAS,8CACpChY,KAAKS,UAAUgW,WAAWsJ,qBAAqB1N,EAAM5Q,IAEzDzB,KAAKS,UAAU4N,IAAIgE,OAzB8E,CACjG,IAAIO,EAAY5R,EAAKS,GACjBue,EAAwB1e,SAASC,eAAeqR,EAAY,yBAC5DC,EAAiB7S,KAAKS,UAAUqS,UAAUF,GAC9CP,EAAM5Q,GAAKoR,EAAepR,GAAK,WAC/B,IAAIqU,EAAM9V,KAAKS,UAAU4N,IAAIgE,GAE7B,GADAQ,EAAekD,QAAQC,SAASpK,KAAKkK,EAAIC,UACpC,eAAkBiK,IAA0BhgB,KAAKG,iBAAkB,CACpE,IAAIyH,EAAaoY,EAAsBhK,SAAS,GAAGA,SAAS,GAC5DpO,EAAWT,MAAMqP,cAAgB,OACjC5O,EAAWmG,UAAY,4CACvBnG,EAAWV,cAAcC,MAAMqP,cAAgB,YAE9C,IAAK,eAAkBwJ,IAA0Bhf,EAAKuG,MAAO,CAC1DK,EAAaoY,EAAsBhK,SAAS,GAAGA,SAAS,GAC5DpO,EAAWT,MAAMqP,cAAgB,OACjC5O,EAAWmG,UAAY,4CACvBnG,EAAWV,cAAcC,MAAMqP,cAAgB,QAUvDxV,EAAKqQ,OAASgB,EAAM5O,OAChBzD,KAAKS,UAAUuG,oBACfhH,KAAKuW,6BAA6BlE,EAAOA,EAAM5Q,IAGnD,IAAI0U,EAAU7U,SAASC,eAAevB,KAAKS,UAAUe,QAAQC,GAAK,qBAAuBmS,GAEzF5T,KAAKS,UAAU2V,cAAcD,EAASvC,KAI9C/T,EAAWc,UAAUgf,sBAAwB,SAAUxP,EAAOtP,EAAW6D,GAErE,IAAIwH,EAAclM,KAAKU,cAAcyL,SAAStL,GAC9C,OAAIqL,EACKxH,EAmB4B,IAAzBwH,EAAYE,SAEL,CAAEgE,EAAGlE,EAAY7H,MAAQ8L,EAAM1L,IAAM0L,EAAM5L,QAAU4L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAI6F,EAAG+F,EAAMlM,MAAQkM,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAIF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAE3J,IAAzB2H,EAAYE,SAEV,CAAEgE,EAAGlE,EAAY7H,MAAQ8L,EAAMlM,KAAOkM,EAAM9L,MAAO+F,EAAG8B,EAAY3H,OAAS4L,EAAM1L,IAAM0L,EAAM5L,OAAQF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAEhH,IAAzB2H,EAAYE,SAEV,CAAEgE,EAAGD,EAAM1L,KAAO0L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAI6F,EAAI8B,EAAY3H,OAAS4L,EAAMlM,KAAOkM,EAAM9L,OAAS8L,EAAM9L,MAAQ,EAAI8L,EAAM5L,OAAS,GAAKF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAIpL,CAAE6L,EAAGD,EAAMlM,KAAMmG,EAAG+F,EAAM1L,IAAKJ,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAhC/C,IAAzB2H,EAAYE,SAEL,CAAEgE,EAAGlE,EAAY7H,MAAQ8L,EAAM1L,IAAM0L,EAAM5L,OAAQ6F,EAAG+F,EAAMlM,KAAMI,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OAE9E,IAAzB6H,EAAYE,SAEV,CAAEgE,EAAGlE,EAAY7H,MAAQ8L,EAAMlM,KAAOkM,EAAM9L,MAAO+F,EAAG8B,EAAY3H,OAAS4L,EAAM1L,IAAM0L,EAAM5L,OAAQF,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAEhH,IAAzB2H,EAAYE,SAEV,CAAEgE,EAAGD,EAAM1L,IAAK2F,EAAI8B,EAAY3H,OAAS4L,EAAMlM,KAAOkM,EAAM9L,MAAQA,MAAO8L,EAAM5L,OAAQA,OAAQ4L,EAAM9L,OAIvG,CAAE+L,EAAGD,EAAMlM,KAAMmG,EAAG+F,EAAM1L,IAAKJ,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,QAuBzE,CAAE6L,EAAGD,EAAMlM,KAAMmG,EAAG+F,EAAM1L,IAAKJ,MAAO8L,EAAM9L,MAAOE,OAAQ4L,EAAM5L,SAGhF1E,EAAWc,UAAUsf,gBAAkB,WAEnC,IADA,IAAIC,EAAgBlgB,KAAKS,UAAUkG,qBAC1B9E,EAAI,EAAGA,EAAIqe,EAAcpe,OAAQD,IAAK,CAC3C,IAAIS,EAAc4d,EAAcre,GAEhC,GADA7B,KAAK4M,cAAgBtL,SAASC,eAAee,EAAYb,IAChC,YAArBa,EAAYqG,KACZ3I,KAAK4M,cAActH,MAAQhD,EAAYgD,WAEtC,GAAyB,gBAArBhD,EAAYqG,KACjB3I,KAAK4M,cAAcmF,QAAUzP,EAAYgD,MACrChD,EAAYgD,OACZtF,KAAK6P,oBAAoB7P,KAAK4M,oBAGjC,GAAyB,aAArBtK,EAAYqG,KACjB3I,KAAK4M,cAActH,MAAQhD,EAAYgD,WAEtC,GAAyB,aAArBhD,EAAYqG,KACjB3I,KAAK4M,cAAcmF,QAAUzP,EAAYgD,WAExC,GAAyB,mBAArBhD,EAAYqG,KAA2B,CAE5C,IAAI8N,EAAazW,KAAKS,UAAUqS,UAAUxQ,EAAYb,IAClDgV,IACIzW,KAAK4M,eAAkD,8CAAjC5M,KAAK4M,cAAcmB,YACzC/N,KAAK4M,cAAcmB,UAAY,kCAC/B/N,KAAK4M,cAAczF,MAAMqP,cAAgB,GACzCxW,KAAK6P,oBAAoB7P,KAAK4M,cAAe,KAEjD5M,KAAKS,UAAU8N,OAAOkI,GACtBzW,KAAKS,UAAU2V,iBAGE,gBAArB9T,EAAYqG,MAA+C,mBAArBrG,EAAYqG,MAClD3I,KAAK6P,oBAAoB7P,KAAK4M,iBAQ1C/M,EAAWc,UAAUwf,sBAAwB,WAEzC,IAAIC,EAAc9U,KAAKC,MAAMpK,KAAK8P,UAAUrH,OAAOC,gBAAgB/H,OAAS,MACxEue,EAAiB,KACrB,GAAID,EAAcC,EAAgB,CAI9B,IAHA,IAAIC,EAAgB1W,OAAOC,eAAe/H,OAEtCye,EAAiB,GACZ1e,EAAI,EAAGA,EAAIye,EAAeze,IAC3B+H,OAAOC,eAAeyM,IAAIzU,IAAM+H,OAAOC,eAAeyM,IAAIzU,GAAGO,MAAM,KAAK,IACrB,gBAA/CwH,OAAOC,eAAeyM,IAAIzU,GAAGO,MAAM,KAAK,KAExCpC,KAAKU,cAAc8f,iBAAiB5W,OAAOC,eAAeyM,IAAIzU,IAAM+H,OAAOC,eAAe4W,QAAQ7W,OAAOC,eAAeyM,IAAIzU,IAC5H0e,EAAe3U,KAAKhC,OAAOC,eAAeyM,IAAIzU,KAI1D,GAAI0e,EACA,IAAS1e,EAAI,EAAGA,EAAI0e,EAAeze,OAAQD,IACvC+H,OAAOC,eAAeC,WAAWyW,EAAe1e,MAMhEhC,EAAWc,UAAU+f,gBAAkB,SAAU3e,GAE7C,IAAIf,EAAOhB,KAAKU,cAAcO,0BAA0B,eACxD,GAAID,EAAM,CAEN,IAAIE,OAAiB,EAEjBA,EADAa,EACiB,CAACA,GAGDZ,KAAKC,MAAMJ,GAGhC,IADA,IAAI2f,GAAe,EACVnQ,EAAI,EAAGA,EAAItP,EAAeY,OAAQ0O,IAAK,CAE5C,IAAIlO,EAAcpB,EAAesP,GAOjC,GANIzO,IACAO,EAAYwK,SAAW/K,EAAUN,GACjCa,EAAYE,KAAOT,EAAU4G,MAGjC3I,KAAK4M,cAAgBtL,SAASC,eAAee,EAAYwK,UAChC,YAArBxK,EAAYE,KACZxC,KAAK4M,cAActH,MAAQ,QAE1B,GAAyB,gBAArBhD,EAAYE,KACbme,IACA3gB,KAAK4M,cAAcmF,SAAU,EAC7B/R,KAAK6P,oBAAoB7P,KAAK4M,eAC9B+T,GAAe,QAGlB,GAAyB,aAArBre,EAAYE,KACjBxC,KAAK4M,cAActH,MAAQhD,EAAY8Y,SAAS,QAE/C,GAAyB,aAArB9Y,EAAYE,KACjBxC,KAAK4M,cAAcmF,SAAU,OAE5B,GAAyB,mBAArBzP,EAAYE,KAA2B,CAE5C,IAAIiU,EAAazW,KAAKS,UAAUqS,UAAUxQ,EAAYwK,UAClD2J,IACIzW,KAAK4M,eAAkD,8CAAjC5M,KAAK4M,cAAcmB,YACzC/N,KAAK4M,cAAcmB,UAAY,kCAC/B/N,KAAK4M,cAAczF,MAAMqP,cAAgB,GACzCxW,KAAK4M,cAAc1F,cAAcC,MAAMqP,cAAgB,GACvDxW,KAAK6P,oBAAoB7P,KAAK4M,cAAe,IACzC7K,IACAA,EAAUuD,MAAQ,GAClBvD,EAAUoQ,cAAgB,CAACpQ,EAAUoQ,eACrCpQ,EAAUoQ,cAAc,GAAK,KAGrCnS,KAAKS,UAAU8N,OAAOkI,GACtBzW,KAAKS,UAAU2V,iBAGE,mBAArB9T,EAAYE,MAAkD,QAArBF,EAAYE,MAAuC,gBAArBF,EAAYE,MACnFxC,KAAK6P,oBAAoB7P,KAAK4M,kBAU9C/M,EAAWc,UAAUyC,oBAAsB,SAAUwd,GACjD,OAAQA,GAAU,GAAK,KAK3B/gB,EAAWc,UAAUkgB,QAAU,WAC3B7gB,KAAK4M,cAAgB,KACrB5M,KAAKK,mBAAqB,GACtBL,KAAKU,eAAiBV,KAAKU,cAAc0S,iBACzCpT,KAAKU,cAAc0S,gBAAgByN,WAK3ChhB,EAAWc,UAAUmgB,cAAgB,WACjC,MAAO,cASXjhB,EAAWc,UAAUsU,aAAe,SAAU6F,EAAMrY,EAAMG,GACtD,IAEImM,EAFAgS,EAASzf,SAASyK,cAAc,UAChCiV,EAAUD,EAAOE,WAAW,MAMhC,OAJIxe,IACAsM,EAAWtM,QAAoBG,GAEnCoe,EAAQve,KAAOsM,GAAYmS,iBAAiB5f,SAAS6f,MAAM1e,KACpDue,EAAQI,YAAYtG,GAAMzW,OAOrCxE,EAAWc,UAAUwU,YAAc,SAAUrS,GACzC,OAAQA,EAAW,IAAM,EAAKA,IAAaA,GAExCjD,EA/lFoB","file":"js/chunk-vendors~50eb333b.5fbe390d.js","sourcesContent":["import { Browser, isBlazor, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { splitArrayCollection, processPathData, cornersPointsBeforeRotation } from '@syncfusion/ej2-drawings';\n/**\n * The `FormFields` module is to render formfields in the PDF document.\n *\n * @hidden\n */\nvar FormFields = /** @class */ (function () {\n    /**\n     * @param viewer\n     * @param base\n     * @param viewer\n     * @param base\n     * @private\n     */\n    function FormFields(viewer, base) {\n        // eslint-disable-next-line\n        this.maintainTabIndex = {};\n        // eslint-disable-next-line\n        this.maintanMinTabindex = {};\n        this.isSignatureField = false;\n        this.isKeyDownCheck = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.readOnlyCollection = [];\n        this.isSignatureRendered = false;\n        /**\n         * @private\n         */\n        // eslint-disable-next-line\n        this.signatureFieldCollection = [];\n        this.selectedIndex = [];\n        this.pdfViewer = viewer;\n        this.pdfViewerBase = base;\n    }\n    /**\n     * @param pageIndex\n     * @private\n     */\n    FormFields.prototype.renderFormFields = function (pageIndex) {\n        this.maxTabIndex = 0;\n        this.minTabIndex = -1;\n        // eslint-disable-next-line\n        this.data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (this.data) {\n            // eslint-disable-next-line\n            this.formFieldsData = JSON.parse(this.data);\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            var canvasElement = document.getElementById(this.pdfViewer.element.id + '_pageCanvas_' + pageIndex);\n            var count = void 0;\n            if (this.formFieldsData !== null && canvasElement !== null && textLayer !== null) {\n                var flag = false;\n                for (var i = 0; i < this.formFieldsData.length; i++) {\n                    var formField = this.formFieldsData[i];\n                    if (!flag && isNullOrUndefined(formField.ActualFieldName) && formField.PageIndex === pageIndex) {\n                        count = parseInt(formField.FieldName.split('_')[1]);\n                        flag = true;\n                    }\n                }\n                for (var i_1 = 0; i_1 < this.formFieldsData.length; i_1++) {\n                    // eslint-disable-next-line\n                    var currentData = this.formFieldsData[i_1];\n                    if (currentData.FieldName !== '') {\n                        if (currentData.IsInitialField) {\n                            currentData.Name = 'InitialField';\n                        }\n                        // eslint-disable-next-line\n                        var font = currentData['Font'];\n                        if (this.pdfViewer.formDesigner) {\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                var fontFamily = void 0;\n                                var fontStyle = void 0;\n                                var fontSize = void 0;\n                                if (font !== null && font.Height) {\n                                    fontFamily = font.Name;\n                                    if (font.Italic) {\n                                        fontStyle = 'Italic';\n                                    }\n                                    if (font.Bold) {\n                                        fontStyle = 'Bold';\n                                    }\n                                    if (font.Strikeout) {\n                                        fontStyle = 'Strikethrough';\n                                    }\n                                    if (font.Underline) {\n                                        fontStyle = 'Underline';\n                                    }\n                                    fontSize = this.ConvertPointToPixel(font.Size);\n                                }\n                                var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n                                var backgroundColor = currentData['BackColor'];\n                                var bounds = currentData['LineBounds'];\n                                var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n                                if (currentData.IsTransparent === true) {\n                                    backColor = \"rgba(0,0,0,0)\";\n                                }\n                                backColor = this.rgbaToHex(backColor);\n                                // set default color if field have black color as bg.\n                                if (backColor === '#000000ff') {\n                                    backColor = '#daeaf7ff';\n                                }\n                                // eslint-disable-next-line\n                                var fontColor = currentData['FontColor'];\n                                var left = this.ConvertPointToPixel(bounds.X);\n                                var top_1 = this.ConvertPointToPixel(bounds.Y);\n                                var width = this.ConvertPointToPixel(bounds.Width);\n                                var height = this.ConvertPointToPixel(bounds.Height);\n                                var boundArray = { left: left, top: top_1, width: width, height: height };\n                                var isFieldRotated = false;\n                                var rotateFieldAngle = 0;\n                                if (currentData[\"Rotation\"] !== 0) {\n                                    if (currentData[\"RotationAngle\"] === -90 || currentData[\"RotationAngle\"] === -270 || currentData[\"RotationAngle\"] === -180) {\n                                        boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    }\n                                }\n                                else {\n                                    isFieldRotated = true;\n                                    boundArray = this.getBounds(boundArray, pageIndex, 0, isFieldRotated);\n                                    rotateFieldAngle = this.getAngle(pageIndex);\n                                }\n                                var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n                                foreColor = this.rgbaToHex(foreColor);\n                                var borderColor = currentData['BorderColor'];\n                                var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n                                borderRGB = this.rgbaToHex(borderRGB);\n                                var borderWidth = currentData['BorderWidth'];\n                                this.selectedIndex = [];\n                                var fieldProperties = {\n                                    bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                                    value: currentData['Text'], isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline, rotateAngle: rotateFieldAngle,\n                                    isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], alignment: textAlignment, options: this.getListValues(currentData), selectedIndex: this.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }\n                                };\n                                if (!currentData.id && this.pdfViewer.formFieldCollections[i_1] && !isNullOrUndefined(currentData['ActualFieldName'])) {\n                                    fieldProperties.id = this.pdfViewer.formFieldCollections[i_1].id;\n                                }\n                                if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                                    fieldProperties.value = currentData['SelectedValue'];\n                                }\n                                // eslint-disable-next-line\n                                var fieldType = this.getFormFieldType(currentData);\n                                if (currentData.Name !== 'SignatureText' || currentData.Name !== 'SignatureImage') {\n                                    if (!isNullOrUndefined(this.getFormFieldType(currentData))) {\n                                        if (currentData.IsRequired) {\n                                            var thickness = fieldProperties.thickness;\n                                            thickness = thickness > 0 ? thickness : 1;\n                                            fieldProperties.thickness = thickness;\n                                        }\n                                        var addedElement1 = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, false, fieldProperties.id);\n                                        if (addedElement1 && addedElement1.parentElement) {\n                                            currentData.id = addedElement1.parentElement.id.split('_')[0];\n                                        }\n                                        if (addedElement1.style.visibility === \"hidden\") {\n                                            addedElement1.childNodes[0].disabled = true;\n                                        }\n                                    }\n                                }\n                                if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                                    this.addSignaturePath(currentData, count);\n                                    if (!isNullOrUndefined(currentData.Value)) {\n                                        this.renderExistingAnnnot(currentData, parseFloat(currentData['PageIndex']) + 1, null, isFieldRotated);\n                                        this.isSignatureRendered = true;\n                                        count++;\n                                    }\n                                }\n                                this.pdfViewerBase.isLoadedFormFieldAdded = true;\n                            }\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            if (parseFloat(currentData['PageIndex']) == pageIndex) {\n                                // eslint-disable-next-line\n                                var field = this.createFormFields(currentData, pageIndex, i_1, null, count);\n                                var inputField = field.currentField;\n                                var signCount = field.count;\n                                if (inputField) {\n                                    // eslint-disable-next-line\n                                    var divElement = this.createParentElement(currentData, pageIndex);\n                                    // eslint-disable-next-line\n                                    var bounds = currentData['LineBounds'];\n                                    // eslint-disable-next-line\n                                    var font_1 = currentData['Font'];\n                                    // eslint-disable-next-line\n                                    var isFieldRotated = false;\n                                    var rotateAngle = 0;\n                                    if (currentData['Rotation'] === 0) {\n                                        isFieldRotated = true;\n                                        rotateAngle = this.getAngle(pageIndex);\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    else {\n                                        if (divElement) {\n                                            divElement.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                        else {\n                                            inputField.style.transform = 'rotate(' + rotateAngle + 'deg)';\n                                        }\n                                    }\n                                    this.applyPosition(inputField, bounds, font_1, pageIndex, 0, isFieldRotated);\n                                    inputField.InsertSpaces = currentData.InsertSpaces;\n                                    if (inputField.InsertSpaces) {\n                                        var zoomFactor = this.pdfViewerBase.getZoomFactor();\n                                        // eslint-disable-next-line\n                                        var font_2 = ((parseInt(inputField.style.width) / inputField.maxLength) - (parseFloat(inputField.style.fontSize) / 2)) - (0.6 * zoomFactor);\n                                        // eslint-disable-next-line\n                                        inputField.style.letterSpacing = '' + font_2 + 'px';\n                                        inputField.style.fontFamily = 'monospace';\n                                        inputField.style.paddingLeft = (font_2 / 2) + 'px';\n                                    }\n                                    // eslint-disable-next-line\n                                    currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + i_1;\n                                    for (var j = 0; j < this.pdfViewer.formFieldCollections.length; j++) {\n                                        if ((inputField.type === 'text' || inputField.type === 'password' || inputField.type === 'textarea') && currentData.Name !== 'SignatureField') {\n                                            if (currentData['uniqueID'] === this.pdfViewer.formFieldCollections[j].id) {\n                                                this.pdfViewer.formFieldCollections[j].value = currentData['Text'];\n                                            }\n                                        }\n                                    }\n                                    if (isNullOrUndefined(currentData.Value)) {\n                                        currentData.Value = currentData['Text'];\n                                    }\n                                    this.applyCommonProperties(inputField, pageIndex, i_1, currentData, isFieldRotated);\n                                    this.checkIsReadonly(currentData, inputField);\n                                    this.applyTabIndex(currentData, inputField, pageIndex);\n                                    this.checkIsRequiredField(currentData, inputField);\n                                    this.applyDefaultColor(inputField);\n                                    this.updateFormFieldsCollection(currentData);\n                                    if (divElement) {\n                                        divElement.appendChild(inputField);\n                                        textLayer.appendChild(divElement);\n                                    }\n                                    else {\n                                        inputField.style.position = 'absolute';\n                                        textLayer.appendChild(inputField);\n                                    }\n                                    inputField.addEventListener('focus', this.focusFormFields.bind(this));\n                                    inputField.addEventListener('blur', this.blurFormFields.bind(this));\n                                    inputField.addEventListener('click', this.updateFormFields.bind(this));\n                                    inputField.addEventListener('change', this.changeFormFields.bind(this));\n                                    inputField.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n                                    inputField.addEventListener('keyup', this.updateSameFieldsValue.bind(this));\n                                    count = signCount;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!this.pdfViewer.formDesigner) {\n                    window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n                    this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                }\n            }\n        }\n        if (this.pdfViewerBase.isFocusField && this.pdfViewerBase.focusField) {\n            var currentField = document.getElementById(this.pdfViewerBase.focusField.id);\n            if (currentField) {\n                if ((this.pdfViewerBase.focusField.type === \"SignatureField\" || this.pdfViewerBase.focusField.type === \"InitialField\") && this.pdfViewer.formDesignerModule) {\n                    var y = this.pdfViewerBase.focusField.bounds.y;\n                    var height = this.pdfViewerBase.getPageHeight(this.pdfViewerBase.focusField.pageIndex);\n                    this.pdfViewer.bookmark.goToBookmark(this.pdfViewerBase.focusField.pageIndex, height - y);\n                }\n                else {\n                    currentField.focus();\n                }\n                this.pdfViewerBase.isFocusField = false;\n                this.pdfViewerBase.focusField = [];\n            }\n        }\n    };\n    FormFields.prototype.trim = function (str) {\n        return str.replace(/^\\s+|\\s+$/gm, '');\n    };\n    FormFields.prototype.rgbaToHex = function (rgba) {\n        var inParts = rgba.substring(rgba.indexOf(\"(\")).split(\",\");\n        var r = parseInt(this.trim(inParts[0].substring(1)), 10);\n        var g = parseInt(this.trim(inParts[1]), 10);\n        var b = parseInt(this.trim(inParts[2]), 10);\n        var a = parseFloat(parseFloat(this.trim(inParts[3].substring(0, inParts[3].length - 1))).toFixed(2));\n        var outParts = [\n            r.toString(16),\n            g.toString(16),\n            b.toString(16),\n            Math.round(a * 255).toString(16).substring(0, 2)\n        ];\n        // Pad single-digit output values\n        outParts.forEach(function (part, i) {\n            if (part.length === 1) {\n                outParts[i] = '0' + part;\n            }\n        });\n        return ('#' + outParts.join(''));\n    };\n    FormFields.prototype.getListValues = function (currentData) {\n        var listItem = currentData['TextList'];\n        var options = [];\n        for (var i = 0; i < listItem.length; i++) {\n            if (listItem[i] === currentData['SelectedValue'])\n                this.selectedIndex.push(i);\n            options.push({ itemName: listItem[i], itemValue: listItem[i] });\n        }\n        if (this.getFormFieldType(currentData) === 'ListBox') {\n            this.selectedIndex = currentData['SelectedList'];\n        }\n        return options;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createParentElement = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var divElement;\n        // eslint-disable-next-line\n        if (data['Name'] === 'Textbox' || data['Name'] === 'Password') {\n            divElement = document.createElement('div');\n            divElement.style.background = 'white';\n            if (data.InsertSpaces) {\n                divElement.style.background = 'transparent';\n            }\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            // eslint-disable-next-line\n            divElement.style.position = 'absolute';\n            // eslint-disable-next-line\n            var isFieldRotated = false;\n            if (data['Rotation'] === 0) {\n                isFieldRotated = true;\n            }\n            this.applyPosition(divElement, bounds, font, pageIndex, 0, isFieldRotated);\n        }\n        return divElement;\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getAngle = function (pageIndex) {\n        // eslint-disable-next-line\n        var angle = 0;\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails && pageDetails.rotation) {\n            switch (pageDetails.rotation) {\n                case 0:\n                    angle = 0;\n                    break;\n                case 1:\n                    angle = 90;\n                    break;\n                case 2:\n                    angle = 180;\n                    break;\n                case 3:\n                    angle = 270;\n                    break;\n            }\n        }\n        return angle;\n    };\n    FormFields.prototype.nextField = function () {\n        this.signatureFieldNavigate(true);\n    };\n    FormFields.prototype.previousField = function () {\n        this.signatureFieldNavigate(false);\n    };\n    FormFields.prototype.signatureFieldNavigate = function (nextSign) {\n        var isNextSignField = nextSign;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        if (signatureFields.length === 0) {\n            signatureFields = this.getSignField();\n        }\n        // eslint-disable-next-line\n        var currentField;\n        if (this.currentTarget) {\n            for (var i = 0; i < signatureFields.length; i++) {\n                currentField = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                if (this.currentTarget.id === currentField.uniqueID) {\n                    this.currentTarget = document.getElementById(currentField.uniqueID);\n                    this.getSignatureIndex(i, signatureFields.length, isNextSignField);\n                    break;\n                }\n            }\n        }\n        else {\n            if (nextSign) {\n                currentField = this.pdfViewer.formDesignerModule ? signatureFields[0].FormField : signatureFields[0];\n                if (currentField.uniqueID) {\n                    this.currentTarget = document.getElementById(currentField.uniqueID);\n                    this.getSignatureIndex(0, signatureFields.length, isNextSignField, true);\n                }\n            }\n        }\n    };\n    FormFields.prototype.getSignatureIndex = function (currentSignatureIndex, signatureCount, isNextSign, isFirstNavigate) {\n        var signatureIndex = currentSignatureIndex;\n        if (!isFirstNavigate) {\n            if (isNextSign) {\n                signatureIndex++;\n            }\n            else {\n                signatureIndex--;\n            }\n        }\n        if (signatureCount === 1) {\n            this.renderSignatureField(0);\n        }\n        else {\n            if (signatureIndex < signatureCount && signatureIndex >= 0) {\n                this.renderSignatureField(signatureIndex);\n            }\n            else {\n                if (isNextSign) {\n                    if (signatureIndex >= signatureCount) {\n                        this.renderSignatureField(0);\n                    }\n                }\n                else {\n                    if (signatureIndex <= 0) {\n                        this.renderSignatureField(signatureCount - 1);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.renderSignatureField = function (currentSignIndex) {\n        var curSignIndex = currentSignIndex;\n        // eslint-disable-next-line\n        var signatureFields = this.signatureFieldCollection;\n        // eslint-disable-next-line\n        var currentField;\n        if (curSignIndex < signatureFields.length) {\n            for (var i = 0; i < signatureFields.length; i++) {\n                var curSignIndexId = this.pdfViewer.formDesignerModule ? signatureFields[curSignIndex].FormField.uniqueID : signatureFields[curSignIndex].uniqueID;\n                var signatureFieldData = this.pdfViewer.formDesignerModule ? signatureFields[i].FormField : signatureFields[i];\n                if (curSignIndexId === signatureFieldData.uniqueID) {\n                    var pageIndex = signatureFieldData.PageIndex >= 0 ? signatureFieldData.PageIndex : signatureFieldData.pageNumber;\n                    var isRender = this.pdfViewer.annotationModule.findRenderPageList(pageIndex);\n                    if (!isRender) {\n                        this.pdfViewer.navigation.goToPage(pageIndex);\n                    }\n                    this.currentTarget = document.getElementById(signatureFieldData.uniqueID);\n                    currentField = signatureFieldData;\n                    break;\n                }\n            }\n            if (this.currentTarget === null) {\n                var pageIndex = currentField.PageIndex >= 0 ? currentField.PageIndex : currentField.pageNumber;\n                this.pdfViewer.navigation.goToPage(pageIndex);\n                this.currentTarget = document.getElementById(currentField.uniqueID);\n            }\n            if (this.currentTarget) {\n                if (this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                    document.getElementById(this.currentTarget.id).focus();\n                    this.pdfViewer.select([this.currentTarget.id], null);\n                }\n                else if (this.currentTarget.className === 'e-pdfviewer-signatureformfields') {\n                    if (this.pdfViewer.formDesignerModule) {\n                        document.getElementById(this.currentTarget.id).parentElement.focus();\n                    }\n                    else {\n                        document.getElementById(this.currentTarget.id).focus();\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.setFocus = function (id) {\n        if (!id) {\n            if (this.currentTarget) {\n                document.getElementById(this.currentTarget.id).focus();\n            }\n        }\n        else {\n            this.removeFocus();\n            var signatureElement = document.getElementById(id);\n            signatureElement.classList.add('e-pv-signature-focus');\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.removeFocus = function () {\n        if (this.signatureFieldCollection) {\n            // eslint-disable-next-line\n            var signatureFields = this.signatureFieldCollection;\n            if (signatureFields.length === 0) {\n                signatureFields = this.getSignField();\n            }\n            for (var i = 0; i < this.signatureFieldCollection.length; i++) {\n                var signatureFieldId = this.pdfViewer.formDesignerModule ? this.signatureFieldCollection[i].FormField.uniqueID : this.signatureFieldCollection[i].uniqueID;\n                var signatureElement = document.getElementById(signatureFieldId);\n                if (signatureElement) {\n                    signatureElement.classList.remove('e-pv-signature-focus');\n                }\n            }\n            if (this.pdfViewer.formFieldsModule.currentTarget) {\n                this.pdfViewer.formFieldsModule.currentTarget.classList.remove('e-pv-signature-focus');\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getSignField = function () {\n        if (this.pdfViewer.formDesignerModule) {\n            this.signatureFieldCollection =\n                this.pdfViewer.formDesignerModule.getFormDesignerSignField(this.signatureFieldCollection);\n        }\n        else {\n            this.signatureFieldCollection = this.getFormFieldSignField();\n        }\n        return this.signatureFieldCollection;\n    };\n    FormFields.prototype.getFormFieldSignField = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        // eslint-disable-next-line\n        var currentData;\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                currentData = formFieldsData[i];\n                if (currentData.Name === 'SignatureField') {\n                    // eslint-disable-next-line\n                    currentData['uniqueID'] = this.pdfViewer.element.id + 'input_' + currentData.PageIndex + '_' + i;\n                    this.signatureFieldCollection.push(formFieldsData[i]);\n                }\n            }\n        }\n        return this.signatureFieldCollection;\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.formFieldCollections = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var i = 0; i < formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[i];\n                // eslint-disable-next-line\n                var type = currentData['Name'];\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Name !== 'ink' && currentData.Name !== 'SignatureImage' && currentData.Name !== 'SignatureText') {\n                        this.retreiveFormFieldsData(currentData, true);\n                    }\n                }\n                else {\n                    if (currentData.Name !== 'ink') {\n                        // eslint-disable-next-line\n                        var formFieldCollection = { name: this.retriveFieldName(currentData), id: this.pdfViewer.element.id + 'input_' + parseFloat(currentData['PageIndex']) + '_' + i, isReadOnly: false, type: currentData.IsInitialField ? 'InitialField' : type, value: this.retriveCurrentValue(currentData), fontName: '', isRequired: currentData.IsRequired };\n                        this.pdfViewer.formFieldCollections.push(formFieldCollection);\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.retreiveFormFieldsData = function (currentData, isCollection) {\n        var fontFamily;\n        var fontStyle;\n        var fontSize;\n        if (currentData.FieldName !== '') {\n            if (currentData.IsInitialField) {\n                currentData.Name = 'InitialField';\n            }\n            // eslint-disable-next-line\n            var font = currentData['Font'];\n            if (font !== null && font.Height) {\n                fontFamily = font.Name;\n                if (font.Italic) {\n                    fontStyle = 'Italic';\n                }\n                if (font.Bold) {\n                    fontStyle = 'Bold';\n                }\n                if (font.Strikeout) {\n                    fontStyle = 'Strikethrough';\n                }\n                if (font.Underline) {\n                    fontStyle = 'Underline';\n                }\n                fontSize = this.ConvertPointToPixel(font.Size);\n            }\n            var textAlignment = currentData.Alignment === 2 ? 'right' : (currentData.Alignment === 1 ? 'center' : 'left');\n            var backgroundColor = currentData['BackColor'];\n            var bounds = currentData['LineBounds'];\n            var backColor = 'rgba(' + backgroundColor.R + ',' + backgroundColor.G + ',' + backgroundColor.B + ',' + 1 + ')';\n            backColor = this.rgbaToHex(backColor);\n            // set default color if field have black color as bg.\n            if (backColor === '#000000ff') {\n                backColor = '#daeaf7ff';\n            }\n            // eslint-disable-next-line\n            var fontColor = currentData['FontColor'];\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_2 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var boundArray = { left: left, top: top_2, width: width, height: height };\n            var foreColor = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n            foreColor = this.rgbaToHex(foreColor);\n            var borderColor = currentData['BorderColor'];\n            var borderRGB = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n            borderRGB = this.rgbaToHex(borderRGB);\n            var borderWidth = currentData['BorderWidth'];\n            this.selectedIndex = [];\n            var fieldProperties = {\n                bounds: { X: boundArray.left, Y: boundArray.top, Width: boundArray.width, Height: boundArray.height }, pageNumber: parseFloat(currentData['PageIndex']) + 1, name: currentData['ActualFieldName'], tooltip: currentData['ToolTip'],\n                value: currentData['Text'], isChecked: currentData['Selected'], isSelected: currentData['Selected'], fontFamily: fontFamily, fontStyle: fontStyle, backgroundColor: backColor, color: foreColor, borderColor: borderRGB, thickness: borderWidth, fontSize: fontSize, isMultiline: currentData.Multiline,\n                isReadOnly: currentData['IsReadonly'], isRequired: currentData['IsRequired'], alignment: textAlignment, options: this.getListValues(currentData), selectedIndex: this.selectedIndex, maxLength: currentData.MaxLength, visibility: currentData.Visible === 1 ? \"hidden\" : \"visible\", font: { isItalic: !isNullOrUndefined(font) ? font.Italic : false, isBold: !isNullOrUndefined(font) ? font.Bold : false, isStrikeout: !isNullOrUndefined(font) ? font.Strikeout : false, isUnderline: !isNullOrUndefined(font) ? font.Underline : false }\n            };\n            if (currentData.Name === 'DropDown' || currentData.Name === 'ListBox') {\n                fieldProperties.value = currentData['SelectedValue'];\n            }\n            // eslint-disable-next-line\n            var fieldType = this.getFormFieldType(currentData);\n            if (fieldType === 'SignatureField' || fieldType === 'InitialField') {\n                this.addSignaturePath(currentData);\n                if (this.isSignatureField) {\n                    fieldProperties.value = currentData.Value;\n                }\n            }\n            var addedElement = this.pdfViewer.formDesignerModule.addFormField(fieldType, fieldProperties, isCollection);\n            return addedElement;\n        }\n        return null;\n    };\n    /**\n     * @param formField\n     * @private\n     */\n    FormFields.prototype.updateFormFieldsCollection = function (formField) {\n        var type = formField['Name'];\n        var formFieldCollection = {\n            name: this.retriveFieldName(formField), id: formField.uniqueID, isReadOnly: formField.IsReadonly, isRequired: formField.IsRequired, isSelected: type === 'CheckBox' ? false : formField.Selected,\n            isChecked: type === 'RadioButton' ? false : formField.Selected, type: type, value: type === 'ListBox' || type === 'DropDown' ? formField.SelectedValue : formField.Value, fontName: formField.FontFamily ? formField.FontFamily : ''\n        };\n        this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === formFieldCollection.id; })] = formFieldCollection;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateFormFieldValues = function (formFields) {\n        this.readOnlyCollection.push(formFields.id);\n        if (formFields) {\n            // eslint-disable-next-line\n            var currentElement = document.getElementById(formFields.id);\n            if (currentElement) {\n                if (formFields.isReadOnly) {\n                    currentElement.disabled = true;\n                    currentElement.style.backgroundColor = '';\n                    currentElement.style.cursor = 'default';\n                }\n                else {\n                    if (currentElement.style.backgroundColor === '') {\n                        currentElement.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n                    }\n                    currentElement.disabled = false;\n                    currentElement.style.cursor = '';\n                }\n            }\n            this.updateDataInSession(currentElement);\n        }\n    };\n    /**\n     * @param currentData\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.retriveFieldName = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n            case 'SignatureField':\n            case 'InitialField':\n                currentField = currentData.FieldName;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.GroupName;\n                break;\n            case 'DropDown':\n            case 'ListBox':\n                currentField = currentData.Text;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.retriveCurrentValue = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n            case 'Password':\n                currentField = currentData.Text;\n                break;\n            case 'SignatureField':\n                currentField = currentData.Value;\n                break;\n            case 'RadioButton':\n            case 'CheckBox':\n                currentField = currentData.Selected;\n                break;\n            case 'DropDown':\n                currentField = currentData.SelectedValue;\n                break;\n            case 'ListBox':\n                currentField = currentData.SelectedList;\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getSignatureBounds = function (LineBounds, bounds, pageIndex) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bound = 0;\n        switch (pageDetails.rotation) {\n            case 0:\n                bound = bounds;\n                break;\n            case 1:\n                bound = { x: bounds.x + LineBounds.Width + (bounds.width / 3.5), y: pageDetails.width - LineBounds.X + (bounds.height / 4) };\n                break;\n            case 2:\n                bound = { x: pageDetails.width - bounds.x - bounds.width, y: pageDetails.height - bounds.y - bounds.height };\n                break;\n            case 3:\n                bound = { x: bounds.y - (bounds.width / 2) + bounds.height, y: bounds.x + (bounds.width / 3) };\n                break;\n        }\n        return bound;\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.downloadFormFieldsData = function () {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            // eslint-disable-next-line\n            var datas = {};\n            var fieldDatas = [];\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                var isRequired = currentData.IsRequired;\n                if (currentData.Name === 'Textbox' || currentData.Name === 'Password' || currentData.Multiline) {\n                    if (isRequired && (currentData.Text === '' || currentData.Text === null)) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = currentData.Text;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Text, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.FieldName] = fieldDatas;\n                }\n                else if (currentData.Name === 'RadioButton' && currentData.Selected) {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Value;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    fieldDatas = { fieldValue: currentData.Value, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.GroupName] = fieldDatas;\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    if (isRequired && currentData.Selected === false) {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.GroupName] = currentData.Selected;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.GroupName]);\n                    }\n                    if (currentData.CheckboxIndex && currentData.Selected) {\n                        fieldDatas = { fieldValue: currentData.CheckboxIndex, isReadOnly: currentData.IsReadonly };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                    else if (datas[currentData.GroupName] === undefined || datas[currentData.GroupName] === null) {\n                        fieldDatas = { fieldValue: currentData.Selected, isReadOnly: currentData.IsReadonly };\n                        datas[currentData.GroupName] = fieldDatas;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    if (isRequired && currentData.SelectedValue === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.Text] = currentData.SelectedValue;\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.Text]);\n                    }\n                    fieldDatas = { fieldValue: currentData.SelectedValue, isReadOnly: currentData.IsReadonly };\n                    datas[currentData.Text] = fieldDatas;\n                }\n                else if (currentData.Name === 'ListBox') {\n                    // eslint-disable-next-line\n                    var childItems = currentData['TextList'];\n                    var childItemsText = [];\n                    for (var m_1 = 0; m_1 < currentData.SelectedList.length; m_1++) {\n                        // eslint-disable-next-line\n                        var currentElement = currentData.SelectedList[m_1];\n                        childItemsText.push(childItems[currentElement]);\n                    }\n                    fieldDatas = { fieldValue: JSON.stringify(childItemsText), isReadOnly: currentData.IsReadonly };\n                    datas[currentData.Text] = fieldDatas;\n                }\n                else if (currentData.Name === 'SignatureField' || currentData.Name === 'InitialField') {\n                    // eslint-disable-next-line\n                    var csData = void 0;\n                    if (currentData.Value === null || currentData.Value === '') {\n                        this.addSignaturePath(currentData);\n                    }\n                    if (currentData.Value && currentData.Value !== '') {\n                        csData = currentData.Value;\n                        var fontFamily = currentData.fontFamily ? currentData.fontFamily : currentData.FontFamily;\n                        if (fontFamily) {\n                            datas[currentData.FieldName + 'fontName'] = fontFamily;\n                            datas[currentData.FieldName + 'fontSize'] = currentData.fontSize ? currentData.fontSize : currentData.FontSize;\n                        }\n                        else if (currentData.Value.split('base64,')[1]) {\n                            datas[currentData.FieldName + 'ImageData'] = true;\n                        }\n                        else {\n                            // eslint-disable-next-line\n                            var collectionData = processPathData(currentData.Value);\n                            csData = splitArrayCollection(collectionData);\n                        }\n                    }\n                    if (isRequired && currentData.Value === null || currentData.Value === '') {\n                        this.pdfViewerBase.validateForm = true;\n                        this.pdfViewerBase.nonFillableFields[currentData.FieldName] = JSON.stringify(csData);\n                    }\n                    else {\n                        delete (this.pdfViewerBase.nonFillableFields[currentData.FieldName]);\n                    }\n                    datas[currentData.FieldName] = JSON.stringify(csData);\n                    if (currentData.Bounds) {\n                        // eslint-disable-next-line\n                        var bounds = this.getSignatureBounds(currentData.LineBounds, currentData.Bounds, currentData.PageIndex);\n                        currentData.Bounds.x = bounds.x;\n                        currentData.Bounds.y = bounds.y;\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(currentData.Bounds);\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        var lineBounds = currentData.LineBounds;\n                        // eslint-disable-next-line\n                        var bounds = { x: this.ConvertPointToPixel(lineBounds.X), y: this.ConvertPointToPixel(lineBounds.Y), width: this.ConvertPointToPixel(lineBounds.Width), height: this.ConvertPointToPixel(lineBounds.Height) };\n                        datas[currentData.FieldName + 'bounds'] = JSON.stringify(bounds);\n                    }\n                    datas[currentData.FieldName + 'isReadOnly'] = currentData.IsReadonly;\n                }\n            }\n            return (JSON.stringify(datas));\n        }\n    };\n    FormFields.prototype.focusFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        // eslint-disable-next-line\n        if (currentTarget && (currentTarget.className !== 'e-pdfviewer-signatureformfields' && currentTarget.className !== 'e-pdfviewer-signatureformfields e-pv-signature-focus')) {\n            // eslint-disable-next-line\n            var backgroundcolor = currentTarget.style.backgroundColor;\n            // eslint-disable-next-line\n            var currentIndex = backgroundcolor.lastIndexOf(',');\n            // eslint-disable-next-line\n            var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0 + ')';\n            currentTarget.style.backgroundColor = currentColor;\n        }\n        else if (currentTarget) {\n            // eslint-disable-next-line\n            if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                this.setFocus(currentTarget.id);\n            }\n        }\n    };\n    FormFields.prototype.blurFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.InsertSpaces && this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) - (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = false;\n        }\n        if (currentTarget.type === 'checkbox') {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.checked);\n        }\n        else {\n            this.pdfViewer.fireFocusOutFormField(currentTarget.name, currentTarget.value);\n        }\n        // eslint-disable-next-line\n        var backgroundcolor = currentTarget.style.backgroundColor;\n        // eslint-disable-next-line\n        var currentIndex = backgroundcolor.lastIndexOf(',');\n        // eslint-disable-next-line\n        var currentColor = backgroundcolor.slice(0, currentIndex + 1) + 0.2 + ')';\n        currentTarget.style.backgroundColor = currentColor;\n    };\n    FormFields.prototype.updateFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.className === 'e-pdfviewer-ListBox') {\n            currentTarget = currentTarget.parentElement;\n            this.updateDataInSession(currentTarget);\n        }\n        else if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n            this.currentTarget = currentTarget;\n        }\n        else if (currentTarget.className === 'e-pv-buttonItem' || currentTarget.type === 'button') {\n            this.pdfViewer.fireButtonFieldClickEvent(currentTarget.value, currentTarget.name, currentTarget.id);\n        }\n        for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n            if (currentTarget.id === this.pdfViewer.formFieldCollections[m].id) {\n                if (this.pdfViewer.formDesignerModule || this.pdfViewer.annotationModule) {\n                    this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                }\n                // eslint-disable-next-line\n                if (currentTarget.className === 'e-pdfviewer-signatureformfields' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature' || currentTarget.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus' || currentTarget.className === 'e-pdfviewer-signatureformfields-signature  e-pv-signature-focus') {\n                    this.setFocus(currentTarget.id);\n                }\n            }\n        }\n    };\n    /**\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @param signatureType\n     * @param value\n     * @param target\n     * @param fontname\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.drawSignature = function (signatureType, value, target, fontname) {\n        var annot;\n        // eslint-disable-next-line\n        var bounds;\n        var targetBounds;\n        var parentElementBounds;\n        var data;\n        if (this.pdfViewer.formDesigner) {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        }\n        else {\n            data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        }\n        var formFieldsData = JSON.parse(data);\n        var targetName = target ? target.name ? target.name : target.offsetParent.name : this.currentTarget.name;\n        for (var i = 0; i < formFieldsData.length; i++) {\n            var fieldName = this.pdfViewer.formDesigner ? formFieldsData[i].FormField.name : formFieldsData[i].ActualFieldName;\n            if (fieldName === targetName) {\n                target = this.pdfViewer.formDesigner ? document.getElementById(formFieldsData[i].Key.split(\"_\")[0]) : document.getElementById(formFieldsData[i].uniqueID);\n                // eslint-disable-next-line\n                var currentField = target;\n                var elementId = currentField.offsetParent.offsetParent.id.split(\"_\")[0];\n                var signatureField = this.pdfViewer.nameTable[elementId];\n                if (target && target.offsetParent && signatureField) {\n                    targetBounds = target.getBoundingClientRect();\n                    parentElementBounds = target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();\n                    this.pdfViewerBase.drawSignatureWithTool = true;\n                    if (target.nextSibling && target.nextSibling.id.indexOf(\"initial\") !== -1) {\n                        this.pdfViewer.isInitialFieldToolbarSelection = true;\n                    }\n                }\n                var currentValue = value ? value : this.pdfViewerBase.signatureModule.outputString;\n                var currentFont = fontname ? fontname : this.pdfViewerBase.signatureModule.fontName;\n                var zoomvalue = this.pdfViewerBase.getZoomFactor();\n                var currentWidth = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.width / zoomvalue : parseFloat(currentField.style.width) / zoomvalue;\n                var currentHeight = this.pdfViewerBase.drawSignatureWithTool ? targetBounds.height / zoomvalue : parseFloat(currentField.style.height) / zoomvalue;\n                var currentLeft = this.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.left - parentElementBounds.left)) / zoomvalue : parseFloat(currentField.style.left) / zoomvalue;\n                var currentTop = this.pdfViewerBase.drawSignatureWithTool ? ((targetBounds.top - parentElementBounds.top)) / zoomvalue : parseFloat(currentField.style.top) / zoomvalue;\n                var currentPage = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split(\"_\")[0].charAt(target.nextElementSibling.id.split(\"_\")[0].length - 1)) : parseFloat(currentField.id.split('_')[1]) : parseFloat(currentField.id.split('_')[1]);\n                var currentIndex = this.pdfViewerBase.drawSignatureWithTool ? target.nextElementSibling ? parseFloat(target.nextElementSibling.id.split('_')[1]) : parseFloat(currentField.id.split('_')[2]) : parseFloat(currentField.id.split('_')[2]);\n                var signString = this.pdfViewerBase.signatureModule.saveImageString;\n                var signatureFontFamily = void 0;\n                var signatureFontSize = void 0;\n                var rotateAngleString = currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform;\n                rotateAngleString = rotateAngleString.substring(rotateAngleString.indexOf(\"(\") + 1, rotateAngleString.indexOf(\"d\"));\n                var rotateAngle = rotateAngleString ? parseInt(rotateAngleString) : 0;\n                if (signatureType === 'Type') {\n                    if (!currentFont) {\n                        currentFont = 'Helvetica';\n                    }\n                    // eslint-disable-next-line\n                    bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                    if (this.pdfViewer.signatureFitMode === 'Default') {\n                        bounds = this.getDefaultBoundsforSign(bounds);\n                    }\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                        shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureText', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: currentFont, fontSize: rotateAngle === 90 || rotateAngle === 270 ? (bounds.width / 2) : (bounds.height / 2)\n                    };\n                    if (annot.shapeAnnotationType === 'SignatureText') {\n                        var textWidth = this.getTextWidth(annot.data, annot.fontSize, annot.fontFamily);\n                        var widthRatio = 1;\n                        if (textWidth > bounds.width)\n                            widthRatio = bounds.width / textWidth;\n                        annot.fontSize = this.getFontSize(Math.floor((annot.fontSize * widthRatio)));\n                    }\n                    signString = annot.data;\n                    signatureFontFamily = annot.fontFamily;\n                    signatureFontSize = annot.fontSize;\n                }\n                else if (signatureType === 'Image') {\n                    // eslint-disable-next-line\n                    bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                    var image = new Image();\n                    image.src = currentValue;\n                    if (this.pdfViewer.signatureFitMode === 'Default') {\n                        // To check whether the image shape is square or rectangle\n                        var difference = 20;\n                        var hightDifference = 4;\n                        var heightRatio = 2;\n                        if (Math.abs(image.height - image.width) < difference) {\n                            if (bounds.width > bounds.height) {\n                                bounds.x = bounds.x + (bounds.width / heightRatio) - (bounds.height / heightRatio);\n                                bounds.width = bounds.height;\n                            }\n                            else {\n                                bounds.y = bounds.y + (bounds.height / heightRatio) - (bounds.width / heightRatio);\n                                bounds.height = bounds.width;\n                            }\n                        }\n                        else {\n                            if (bounds.width > bounds.height) {\n                                bounds.y = bounds.y + (bounds.height / hightDifference);\n                                bounds.x = bounds.x + (bounds.height / hightDifference);\n                                var height = bounds.height / heightRatio;\n                                bounds = { x: bounds.x, y: bounds.y, width: bounds.width - height, height: bounds.height - height };\n                            }\n                            else {\n                                bounds.y = bounds.y + (bounds.height / hightDifference);\n                                bounds.height = bounds.height / heightRatio;\n                            }\n                        }\n                    }\n                    annot = {\n                        // eslint-disable-next-line max-len\n                        id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                        shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                    };\n                    signString = annot.data;\n                }\n                else {\n                    if ((currentValue.indexOf('base64')) !== -1) {\n                        // eslint-disable-next-line\n                        bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        if (this.pdfViewer.signatureFitMode === 'Default') {\n                            bounds = this.getDefaultBoundsforSign(bounds);\n                        }\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                            shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                        };\n                        signString = annot.data;\n                    }\n                    else {\n                        // eslint-disable-next-line\n                        if (this.pdfViewer.signatureFitMode === 'Default') {\n                            // eslint-disable-next-line\n                            var signatureBounds = this.updateSignatureAspectRatio(currentValue, false, currentField);\n                            // eslint-disable-next-line\n                            bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, signatureBounds.width, signatureBounds.height, true);\n                            bounds.x = bounds.x + signatureBounds.left;\n                            bounds.y = bounds.y + signatureBounds.top;\n                        }\n                        else {\n                            bounds = this.getSignBounds(currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight);\n                        }\n                        annot = {\n                            // eslint-disable-next-line max-len\n                            id: currentField.id, bounds: { x: bounds.x, y: bounds.y, width: bounds.width, height: bounds.height }, pageIndex: currentPage, data: currentValue, modifiedDate: '',\n                            shapeAnnotationType: 'Path', opacity: 1, rotateAngle: rotateAngle, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                        };\n                    }\n                }\n                if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n                    annot.id = signatureField.id + \"_content\";\n                    var obj = this.pdfViewer.add(annot);\n                    signatureField.wrapper.children.push(obj.wrapper);\n                }\n                else {\n                    this.pdfViewer.add(annot);\n                }\n                if (annot && annot.shapeAnnotationType === 'Path' && currentValue !== '') {\n                    this.pdfViewerBase.currentSignatureAnnot = annot;\n                    // eslint-disable-next-line\n                    var position = { currentHeight: currentHeight, currentWidth: currentWidth, currentLeft: currentLeft, currentTop: currentTop };\n                    this.pdfViewerBase.signatureModule.addSignatureCollection(bounds, position);\n                    signString = this.pdfViewerBase.signatureModule.saveImageString;\n                    this.pdfViewerBase.currentSignatureAnnot = null;\n                }\n                // eslint-disable-next-line\n                var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n                // eslint-disable-next-line\n                this.pdfViewer.renderDrawing(canvass, currentPage);\n                this.pdfViewerBase.signatureModule.showSignatureDialog(false);\n                if (currentField.className === 'e-pdfviewer-signatureformfields e-pv-signature-focus') {\n                    currentField.className = 'e-pdfviewer-signatureformfields-signature e-pv-signature-focus';\n                }\n                else {\n                    currentField.className = 'e-pdfviewer-signatureformfields-signature';\n                }\n                if (this.pdfViewerBase.drawSignatureWithTool && signatureField) {\n                    var key = target.offsetParent.offsetParent.id.split('_')[0] + '_content';\n                    this.updateSignatureDataInSession(annot, key);\n                }\n                else {\n                    this.updateDataInSession(currentField, annot.data, annot.bounds, signatureFontFamily, signatureFontSize);\n                }\n                currentField.style.pointerEvents = 'none';\n                if (this.pdfViewer.annotation) {\n                    this.pdfViewer.annotation.addAction(annot.pageIndex, null, annot, 'FormField Value Change', '', annot, annot);\n                }\n                // eslint-disable-next-line\n                this.pdfViewer.fireSignatureAdd(annot.pageIndex, annot.id, 'HandWrittenSignature', annot.bounds, annot.opacity, null, null, signString);\n                this.pdfViewer.fireFocusOutFormField(currentField.name, currentValue);\n            }\n        }\n        this.pdfViewerBase.signatureModule.hideSignaturePanel();\n        this.pdfViewerBase.drawSignatureWithTool = false;\n        this.pdfViewer.isInitialFieldToolbarSelection = false;\n    };\n    FormFields.prototype.updateSignatureDataInSession = function (annot, key) {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        var _loop_1 = function (i) {\n            if (formFieldsData[i].Key === key) {\n                var formFieldIndex = this_1.pdfViewer.formFieldCollections.findIndex(function (el) { return el.id === formFieldsData[i].FormField.id.split('_')[0]; });\n                if (annot.shapeAnnotationType === \"SignatureText\") {\n                    formFieldsData[i].FormField.signatureType = \"Text\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Text\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Text\";\n                    formFieldsData[i].FormField.fontFamily = annot.fontFamily;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.fontFamily = annot.fontFamily;\n                    this_1.pdfViewer.nameTable[key].fontFamily = annot.fontFamily;\n                    formFieldsData[i].FormField.fontSize = annot.fontSize;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.fontSize = annot.fontSize;\n                    this_1.pdfViewer.nameTable[key].fontSize = annot.fontSize;\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Text\" : null;\n                }\n                else if (annot.shapeAnnotationType === \"SignatureImage\") {\n                    formFieldsData[i].FormField.signatureType = \"Image\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Image\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Image\";\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Image\" : null;\n                }\n                else {\n                    formFieldsData[i].FormField.signatureType = \"Path\";\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureType = \"Path\";\n                    this_1.pdfViewer.nameTable[key].signatureType = \"Path\";\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureType = \"Path\" : null;\n                }\n                formFieldsData[i].FormField.signatureBound = annot.bounds;\n                this_1.pdfViewerBase.formFieldCollection[i].FormField.signatureBound = annot.bounds;\n                this_1.pdfViewer.nameTable[key].signatureBound = annot.bounds;\n                formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].signatureBound = annot.bounds : null;\n                if (annot.shapeAnnotationType === \"Path\") {\n                    var collectionData = processPathData(annot.data);\n                    var csData = splitArrayCollection(collectionData);\n                    formFieldsData[i].FormField.value = JSON.stringify(csData);\n                    this_1.pdfViewer.nameTable[key].value = annot.data;\n                    this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.value = JSON.stringify(csData);\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = JSON.stringify(csData) : null;\n                }\n                else {\n                    formFieldsData[i].FormField.value = annot.data;\n                    this_1.pdfViewerBase.formFieldCollection[i].FormField.value = annot.data;\n                    this_1.pdfViewer.nameTable[key.split('_')[0]].value = annot.data;\n                    this_1.pdfViewer.nameTable[key].value = annot.data;\n                    formFieldIndex > -1 ? this_1.pdfViewer.formFieldCollection[formFieldIndex].value = annot.data : null;\n                }\n                this_1.pdfViewer.formDesigner.updateFormFieldCollections(formFieldsData[i].FormField);\n                this_1.pdfViewer.formDesigner.updateFormFieldPropertiesChanges(\"formFieldPropertiesChange\", formFieldsData[i].FormField, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false, \"\", formFieldsData[i].FormField.value);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < formFieldsData.length; i++) {\n            _loop_1(i);\n        }\n        this.pdfViewerBase.setItemInSessionStorage(formFieldsData, '_formDesigner');\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getDefaultBoundsforSign = function (bounds) {\n        return { x: bounds.x + 10, y: bounds.y + 10, width: bounds.width - 23, height: bounds.height - 23 };\n    };\n    /**\n     * @private\n      */\n    // eslint-disable-next-line\n    FormFields.prototype.getSignBounds = function (currentIndex, rotateAngle, currentPage, zoomvalue, currentLeft, currentTop, currentWidth, currentHeight, isDraw) {\n        // eslint-disable-next-line\n        var bounds;\n        var signatureId = this.pdfViewer.isInitialFieldToolbarSelection ? 'initialIcon' : 'signIcon';\n        var signIcon = document.getElementById(signatureId + currentPage + '_' + currentIndex);\n        var signLeft = signIcon ? parseFloat(signIcon.style.left) * zoomvalue : 0;\n        var difference = (currentLeft * zoomvalue) - (signLeft / zoomvalue);\n        if (rotateAngle === 90 || rotateAngle === 270) {\n            this.rotateAngle = 0;\n            if (signIcon.style.left !== '') {\n                if (isDraw) {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentWidth, height: currentHeight };\n                }\n                else {\n                    return bounds = { x: currentLeft - (difference / zoomvalue) - zoomvalue, y: currentTop + (difference / zoomvalue) + zoomvalue, width: currentHeight, height: currentWidth };\n                }\n            }\n            else {\n                difference = 10;\n                if (isDraw) {\n                    return bounds = { x: currentLeft - currentWidth, y: currentTop + currentWidth, width: currentHeight, height: currentWidth };\n                }\n                else {\n                    return bounds = { x: currentLeft - currentWidth - difference / 2, y: currentTop + currentWidth + difference, width: currentHeight, height: currentWidth };\n                }\n            }\n        }\n        else {\n            this.rotateAngle = 0;\n            return bounds = { x: currentLeft, y: currentTop, width: currentWidth, height: currentHeight };\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateSameFieldsValue = function (event) {\n        if (this.formFieldsData) {\n            for (var i = 0; i < this.formFieldsData.length; i++) {\n                // eslint-disable-next-line\n                var currentField = this.formFieldsData[i];\n                if (event.target.name === currentField.FieldName && event.target.id !== currentField.uniqueID) {\n                    // eslint-disable-next-line\n                    var currentTarget = document.getElementById(this.formFieldsData[i].uniqueID);\n                    if (currentTarget) {\n                        currentTarget.value = event.target.value;\n                    }\n                    else {\n                        currentField.Text = event.target.value;\n                        this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData, '_formfields');\n                    }\n                }\n            }\n        }\n    };\n    FormFields.prototype.updateFormFieldsValue = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        if (currentTarget.InsertSpaces && !this.isKeyDownCheck) {\n            // eslint-disable-next-line\n            var font = parseInt(currentTarget.style.width) + (parseInt(currentTarget.style.height) / 2);\n            currentTarget.style.width = '' + font + 'px';\n            this.isKeyDownCheck = true;\n        }\n        if (event.which === 9 && currentTarget && currentTarget.className === 'e-pdfviewer-formFields') {\n            // eslint-disable-next-line\n            var id = currentTarget.id.split('input_')[1].split('_')[0];\n            if (this.maintainTabIndex[id] === currentTarget.tabIndex) {\n                // eslint-disable-next-line\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + (parseInt(id) + 1));\n                if (textLayer) {\n                    // eslint-disable-next-line\n                    var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n                    if (currentFields && currentFields.length > 0) {\n                        currentFields[0].focus();\n                        event.preventDefault();\n                    }\n                }\n                else {\n                    var textLayer_1 = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + 0);\n                    // eslint-disable-next-line\n                    var currentFields = textLayer_1.getElementsByClassName('e-pdfviewer-formFields');\n                    for (var m = 0; m < currentFields.length; m++) {\n                        if (currentFields[m].tabIndex === this.maintanMinTabindex['0']) {\n                            currentFields[m].focus();\n                            event.preventDefault();\n                            break;\n                        }\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + parseInt(id));\n                // eslint-disable-next-line\n                var currentFields = textLayer.getElementsByClassName('e-pdfviewer-formFields');\n                var istabindexed = true;\n                for (var m = 0; m < currentFields.length; m++) {\n                    istabindexed = false;\n                    if (currentFields[m].tabIndex === (currentTarget.tabIndex + 1)) {\n                        currentFields[m].focus();\n                        istabindexed = true;\n                        event.preventDefault();\n                        break;\n                    }\n                }\n                var tabindex = currentTarget.tabIndex + 1;\n                while (!istabindexed) {\n                    for (var l = 0; l < currentFields.length; l++) {\n                        istabindexed = false;\n                        if (currentFields[l].tabIndex === (tabindex)) {\n                            currentFields[l].focus();\n                            istabindexed = true;\n                            event.preventDefault();\n                            break;\n                        }\n                    }\n                    if (this.maintainTabIndex[id] === tabindex) {\n                        istabindexed = true;\n                    }\n                    tabindex = tabindex + 1;\n                }\n            }\n        }\n        if (event.currentTarget.classList.contains('e-pdfviewer-signatureformfields') ||\n            event.currentTarget.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n            if (event.key === 'Enter') {\n                // eslint-disable-next-line\n                var currentTarget_1 = event.target;\n                for (var m = 0; m < this.pdfViewer.formFieldCollections.length; m++) {\n                    if (currentTarget_1.id === this.pdfViewer.formFieldCollections[m].id) {\n                        this.setFocus(currentTarget_1.id);\n                        this.pdfViewer.fireFormFieldClickEvent('formFieldClicked', this.pdfViewer.formFieldCollections[m]);\n                    }\n                }\n            }\n            else {\n                event.preventDefault();\n            }\n        }\n    };\n    FormFields.prototype.changeFormFields = function (event) {\n        // eslint-disable-next-line\n        var currentTarget = event.target;\n        this.updateDataInSession(currentTarget);\n    };\n    FormFields.prototype.calculateSignatureBounds = function (signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData) {\n        var ratioX = newdifferenceX / signatureCavasWidth;\n        var ratioY = newdifferenceY / signatureCavasHeight;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var currentWidth = 0;\n        var currentHeight = 0;\n        var isSignatureStretched = false;\n        var isHeightStretched = false;\n        var leftDifference = 0;\n        var topDifference = 0;\n        if (isSignature) {\n            currentWidth = this.pdfViewer.handWrittenSignatureSettings.width ? this.pdfViewer.handWrittenSignatureSettings.width : 150;\n            currentHeight = this.pdfViewer.handWrittenSignatureSettings.height ? this.pdfViewer.handWrittenSignatureSettings.height : 100;\n        }\n        else {\n            var fieldWidth = currentField ? currentField.style.width === '100%' ? currentField.clientWidth : parseFloat(currentField.style.width) : this.ConvertPointToPixel(currentData.LineBounds.Width);\n            var fieldHeight = currentField ? currentField.style.height === '100%' ? currentField.clientHeight : parseFloat(currentField.style.height) : this.ConvertPointToPixel(currentData.LineBounds.Height);\n            var fieldWidthRatio = fieldWidth / fieldHeight;\n            var fieldHeightRatio = fieldHeight / fieldWidth;\n            var canvasWidthRatio = signatureCavasWidth / signatureCavasHeight;\n            var canvasHeightRatio = signatureCavasHeight / signatureCavasWidth;\n            var fieldRotation = currentField ? currentField.offsetParent.offsetParent.style.transform ? currentField.offsetParent.offsetParent.style.transform : currentField.style.transform : currentData.RotationAngle;\n            if ((fieldWidthRatio > canvasWidthRatio) || (fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                var ratioDifference = 0;\n                if ((fieldHeightRatio > canvasWidthRatio) || ((Math.abs(fieldWidthRatio - fieldHeightRatio)) <= 1)) {\n                    isHeightStretched = true;\n                    ratioDifference = fieldHeightRatio / canvasHeightRatio;\n                }\n                else {\n                    isSignatureStretched = true;\n                    ratioDifference = fieldWidthRatio / canvasWidthRatio;\n                }\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    if (isSignatureStretched) {\n                        // eslint-disable-next-line\n                        leftDifference = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = (fieldWidth / ratioDifference) / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = fieldHeight / zoomvalue;\n                    }\n                    if (isHeightStretched) {\n                        // eslint-disable-next-line\n                        topDifference = fieldHeight / zoomvalue;\n                        // eslint-disable-next-line\n                        currentWidth = fieldWidth / zoomvalue;\n                        // eslint-disable-next-line\n                        currentHeight = (fieldHeight / ratioDifference) / zoomvalue;\n                    }\n                }\n            }\n            else {\n                if (fieldRotation === 'rotate(90deg)' || fieldRotation === 'rotate(270deg)') {\n                    // eslint-disable-next-line\n                    currentWidth = fieldHeight / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldWidth / zoomvalue;\n                }\n                else {\n                    // eslint-disable-next-line\n                    currentWidth = fieldWidth / zoomvalue;\n                    // eslint-disable-next-line\n                    currentHeight = fieldHeight / zoomvalue;\n                }\n            }\n        }\n        var currentLeftDiff = (signatureCavasWidth - newdifferenceX) / 2;\n        var currentTopDiff = (signatureCavasHeight - newdifferenceY) / 2;\n        if (isSignatureStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * leftDifference;\n            var leftValueDiff = ((leftDifference * ratioX) - (currentWidth * ratioX)) / 2;\n            currentLeftDiff = currentLeftDiff + leftValueDiff;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        else if (isHeightStretched) {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * topDifference;\n            var topValueDiff = ((topDifference * ratioY) - (currentHeight * ratioY)) / 2;\n            currentTopDiff = currentTopDiff + topValueDiff;\n        }\n        else {\n            currentLeftDiff = (currentLeftDiff / signatureCavasWidth) * currentWidth;\n            currentTopDiff = (currentTopDiff / signatureCavasHeight) * currentHeight;\n        }\n        currentWidth = currentWidth * ratioX;\n        currentHeight = currentHeight * ratioY;\n        return { currentLeftDiff: currentLeftDiff, currentTopDiff: currentTopDiff, currentWidth: currentWidth, currentHeight: currentHeight };\n    };\n    /**\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @param data\n     * @param isSignature\n     * @param currentField\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateSignatureAspectRatio = function (data, isSignature, currentField, currentData) {\n        // eslint-disable-next-line\n        var collectionData = processPathData(data);\n        // eslint-disable-next-line\n        var csData = splitArrayCollection(collectionData);\n        var minimumX = -1;\n        var minimumY = -1;\n        var maximumX = -1;\n        var maximumY = -1;\n        var signatureCanvas = document.getElementById(this.pdfViewer.element.id + '_signatureCanvas_');\n        var signatureCavasWidth = 0;\n        var signatureCavasHeight = 0;\n        for (var m = 0; m < csData.length; m++) {\n            // eslint-disable-next-line\n            var val = csData[m];\n            if (minimumX === -1) {\n                // eslint-disable-next-line\n                minimumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                maximumX = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                minimumY = parseFloat(val['y'].toString());\n                // eslint-disable-next-line\n                maximumY = parseFloat(val['y'].toString());\n            }\n            else {\n                // eslint-disable-next-line\n                var point1 = parseFloat(val['x'].toString());\n                // eslint-disable-next-line\n                var point2 = parseFloat(val['y'].toString());\n                if (minimumX >= point1) {\n                    minimumX = point1;\n                }\n                if (minimumY >= point2) {\n                    minimumY = point2;\n                }\n                if (maximumX <= point1) {\n                    maximumX = point1;\n                }\n                if (maximumY <= point2) {\n                    maximumY = point2;\n                }\n            }\n        }\n        signatureCavasWidth = signatureCanvas ? signatureCanvas.clientWidth : 650;\n        signatureCavasHeight = signatureCanvas ? signatureCanvas.clientHeight : 300;\n        var newdifferenceX = maximumX - minimumX;\n        var newdifferenceY = maximumY - minimumY;\n        var signBounds = this.calculateSignatureBounds(signatureCavasWidth, signatureCavasHeight, newdifferenceX, newdifferenceY, isSignature, currentField, currentData);\n        if (isSignature) {\n            var zoomvalue = this.pdfViewerBase.getZoomFactor();\n            var pageIndex = this.pdfViewerBase.currentPageNumber - 1;\n            var pageDiv = document.getElementById(this.pdfViewer.element.id + '_pageDiv_' + pageIndex);\n            var currentLeft = ((parseFloat(pageDiv.style.width) / 2) - (signBounds.currentWidth / 2)) / zoomvalue;\n            // eslint-disable-next-line max-len\n            var currentTop = ((parseFloat(pageDiv.style.height) / 2) - (signBounds.currentHeight / 2)) / zoomvalue;\n            return { x: currentLeft, y: currentTop, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n        else {\n            return { left: signBounds.currentLeftDiff, top: signBounds.currentTopDiff, width: signBounds.currentWidth, height: signBounds.currentHeight };\n        }\n    };\n    /**\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @param target\n     * @param signaturePath\n     * @param signatureBounds\n     * @param signatureFontFamily\n     * @param signatureFontSize\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.updateDataInSession = function (target, signaturePath, signatureBounds, signatureFontFamily, signatureFontSize) {\n        this.pdfViewerBase.updateDocumentEditedProperty(true);\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var FormFieldsData = JSON.parse(data);\n            for (var m = 0; m < FormFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = FormFieldsData[m];\n                if (currentData.uniqueID === target.id) {\n                    if (target && target.type === 'text' || target.type === 'password' || target.type === 'textarea') {\n                        var signField = target;\n                        if (signField.classList.contains('e-pdfviewer-signatureformfields') || signField.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                            if (signaturePath) {\n                                currentData.Value = signaturePath;\n                            }\n                            if (signatureBounds) {\n                                currentData.Bounds = signatureBounds;\n                            }\n                            if (signatureFontFamily) {\n                                currentData.FontFamily = signatureFontFamily;\n                                currentData.FontSize = signatureFontSize;\n                            }\n                        }\n                        else {\n                            currentData.Text = target.value;\n                            currentData.Value = target.value;\n                        }\n                    }\n                    else if (target.type === 'radio') {\n                        for (var l = 0; l < FormFieldsData.length; l++) {\n                            // eslint-disable-next-line\n                            var currentType = FormFieldsData[l];\n                            if (FormFieldsData[l].GroupName === target.name) {\n                                FormFieldsData[l].Selected = false;\n                            }\n                        }\n                        currentData.Selected = true;\n                    }\n                    else if (target.type === 'checkbox') {\n                        for (var l = 0; l < FormFieldsData.length; l++) {\n                            // eslint-disable-next-line\n                            var currentType = FormFieldsData[l];\n                            if (FormFieldsData[l].GroupName === target.name) {\n                                FormFieldsData[l].Selected = false;\n                                // eslint-disable-next-line\n                                var currentTarget = document.getElementById(FormFieldsData[l].uniqueID);\n                                if (currentTarget) {\n                                    if ((currentData.GroupName === target.name) && (currentData.uniqueID !== currentTarget.id)) {\n                                        currentData.Selected = false;\n                                        currentTarget.checked = false;\n                                    }\n                                }\n                            }\n                        }\n                        if (target.checked) {\n                            currentData.Selected = true;\n                        }\n                        else {\n                            currentData.Selected = false;\n                        }\n                    }\n                    else if (target.type === 'select-one' && target.size === 0) {\n                        // eslint-disable-next-line\n                        var currentValue = target.options[target.selectedIndex].text;\n                        // eslint-disable-next-line\n                        var childrens = target.children;\n                        var isChildElements = false;\n                        for (var k = 0; k < childrens.length; k++) {\n                            if (childrens[k].text === currentValue) {\n                                currentData.SelectedValue = currentValue;\n                            }\n                        }\n                    }\n                    else if (target.type === 'select-multiple' || target.size > 0) {\n                        // eslint-disable-next-line\n                        var currentValue = target.selectedOptions;\n                        currentData.SelectedList = [];\n                        for (var z = 0; z < currentValue.length; z++) {\n                            // eslint-disable-next-line\n                            var childrens = target.children;\n                            for (var k = 0; k < childrens.length; k++) {\n                                if (childrens[k] === currentValue[z]) {\n                                    currentData.SelectedList.push(k);\n                                }\n                            }\n                        }\n                        currentData.SelectedValue = target.value;\n                        var index = currentData.TextList ? currentData.TextList.indexOf(target.value) : 0;\n                        currentData.selectedIndex = index > -1 ? index : 0;\n                        currentData.SelectedList = [currentData.selectedIndex];\n                    }\n                    if (target.disabled) {\n                        currentData.IsReadonly = true;\n                    }\n                    this.updateFormFieldsCollection(currentData);\n                    break;\n                }\n                else if (target && target.getAttribute('list') != null && target.type === 'text' && currentData.uniqueID === target.list.id) {\n                    currentData.SelectedValue = target.value;\n                }\n                this.updateFormFieldsCollection(currentData);\n            }\n            window.sessionStorage.removeItem(this.pdfViewerBase.documentId + '_formfields');\n            this.pdfViewerBase.setItemInSessionStorage(FormFieldsData, '_formfields');\n        }\n        if (this.pdfViewer.formDesignerModule && target && target.id) {\n            var selectedItem = this.pdfViewer.nameTable[target.id.split('_')[0]];\n            if (selectedItem && selectedItem.wrapper && selectedItem.wrapper.children[0]) {\n                selectedItem.value = target.value;\n                var point = cornersPointsBeforeRotation(selectedItem.wrapper.children[0]).topLeft;\n                this.pdfViewer.formDesignerModule.updateFormDesignerFieldInSessionStorage(point, selectedItem.wrapper.children[0], selectedItem.formFieldAnnotationType, selectedItem);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.removeExistingFormFields = function () {\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formDesigner');\n        var formFieldsData = JSON.parse(data);\n        if (formFieldsData) {\n            for (var i = 0; i < formFieldsData.length; i++) {\n                this.pdfViewer.formDesignerModule.deleteFormField(formFieldsData[i].Key.split('_')[0]);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyCommonProperties = function (inputdiv, pageIndex, index, currentData, isFieldRotated) {\n        // eslint-disable-next-line\n        var inputField = document.getElementById(this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n        if (inputField) {\n            var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n            if (inputdiv.type === 'text' && inputField.parentElement !== textLayer) {\n                inputField.parentElement.remove();\n            }\n            inputField.remove();\n        }\n        // eslint-disable-next-line\n        var signIcon = document.getElementById('signIcon' + pageIndex + '_' + pageIndex);\n        var left = parseFloat(inputdiv.style.left);\n        var top = parseInt(inputdiv.style.top);\n        var width = parseFloat(inputdiv.style.width);\n        var height = parseFloat(inputdiv.style.height);\n        var signIconWidth;\n        var signIconHeght;\n        var hightDifference;\n        var widthDifference;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        if (signIcon && !isFieldRotated) {\n            signIconWidth = parseFloat(signIcon.style.width);\n            signIconHeght = parseFloat(signIcon.style.height);\n            if (signIcon.style.transform == 'rotate(90deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - (signIconWidth * zoomvalue))) + (widthDifference / 2)) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(180deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                signIcon.style.left = left + 'px';\n                signIcon.style.top = (top) + 'px';\n            }\n            if (signIcon.style.transform == 'rotate(270deg)') {\n                signIcon.style.transform = 'rotate(0deg)';\n                hightDifference = height / 2;\n                widthDifference = signIconWidth * zoomvalue;\n                signIcon.style.left = ((left - (hightDifference - widthDifference)) + (widthDifference / 2)) + 'px';\n                signIcon.style.top = ((top + (width + (signIconHeght * zoomvalue)) + ((signIconHeght * zoomvalue) / 2))) + 'px';\n            }\n        }\n        if (currentData.IsSignatureField && this.isSignatureField) {\n            inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n            inputdiv.style.pointerEvents = 'none';\n        }\n        else if (currentData.IsSignatureField) {\n            if (currentData.Value) {\n                inputdiv.className = 'e-pdfviewer-signatureformfields-signature';\n                inputdiv.style.pointerEvents = 'none';\n            }\n            else {\n                inputdiv.className = 'e-pdfviewer-signatureformfields';\n            }\n        }\n        else if (currentData.Name !== 'Button') {\n            inputdiv.className = 'e-pdfviewer-formFields';\n        }\n        inputdiv.id = this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index;\n        inputdiv.style.zIndex = 1000;\n    };\n    /**\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @param currentData\n     * @param pageIndex\n     * @param index\n     * @param printContainer\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.createFormFields = function (currentData, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'text');\n                break;\n            case 'Password':\n                currentField = this.createTextBoxField(currentData, pageIndex, 'password');\n                break;\n            case 'RadioButton':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'radio');\n                break;\n            case 'CheckBox':\n                currentField = this.createRadioBoxField(currentData, pageIndex, 'checkbox', printContainer);\n                break;\n            case 'DropDown':\n                currentField = this.createDropDownField(currentData, pageIndex, index, printContainer);\n                break;\n            case 'ListBox':\n                currentField = this.createListBoxField(currentData, pageIndex);\n                break;\n            case 'InitialField':\n            case 'SignatureField':\n                currentField = this.createSignatureField(currentData, pageIndex, index, printContainer, count);\n                var isFieldRotated = false;\n                if (currentData['Rotation'] === 0) {\n                    isFieldRotated = true;\n                }\n                if (currentData.Value && currentData.Value !== '') {\n                    this.renderExistingAnnnot(currentData, index, printContainer, isFieldRotated);\n                    this.isSignatureRendered = true;\n                    count++;\n                }\n                break;\n            case 'Button':\n                currentField = this.createButtonField(currentData, pageIndex);\n                break;\n            case 'ink':\n                if (this.pdfViewer.formDesignerModule) {\n                    if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                        this.renderExistingAnnnot(currentData, index, printContainer);\n                    }\n                }\n                break;\n            case 'SignatureText':\n            case 'SignatureImage':\n                if (currentData.Value && currentData.Value !== '' && !this.isSignatureRendered) {\n                    this.renderExistingAnnnot(currentData, index, printContainer);\n                }\n                break;\n        }\n        return { currentField: currentField, count: count };\n    };\n    FormFields.prototype.getFormFieldType = function (currentData) {\n        // eslint-disable-next-line\n        var currentField;\n        // eslint-disable-next-line\n        switch (currentData['Name']) {\n            case 'Textbox':\n                currentField = 'Textbox';\n                break;\n            case 'Password':\n                currentField = 'Password';\n                break;\n            case 'RadioButton':\n                currentField = 'RadioButton';\n                break;\n            case 'CheckBox':\n                currentField = 'CheckBox';\n                break;\n            case 'DropDown':\n                currentField = 'DropDown';\n                break;\n            case 'ListBox':\n                currentField = 'ListBox';\n                break;\n            case 'SignatureField':\n                currentField = 'SignatureField';\n                if (currentData.IsInitialField) {\n                    currentField = 'InitialField';\n                }\n                break;\n            case 'InitialField':\n                currentField = 'InitialField';\n                break;\n        }\n        return currentField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createButtonField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        if (data.Value) {\n            inputField.type = 'image';\n            inputField.src = data.Value;\n        }\n        else {\n            inputField.type = 'button';\n        }\n        inputField.className = 'e-pv-buttonItem';\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createTextBoxField = function (data, pageIndex, type) {\n        // eslint-disable-next-line\n        var inputField;\n        if (data.Visible === 1) {\n            return;\n        }\n        if (data.Multiline) {\n            inputField = document.createElement('textarea');\n            inputField.style.resize = 'none';\n        }\n        else {\n            inputField = document.createElement('input');\n            inputField.type = type;\n        }\n        if (data.MaxLength > 0) {\n            inputField.maxLength = data.MaxLength;\n        }\n        this.addAlignmentPropety(data, inputField);\n        if (data.Text !== '') {\n            inputField.value = data.Text;\n        }\n        else {\n            inputField.value = '';\n        }\n        if (!this.pdfViewer.enableAutoComplete) {\n            inputField.autocomplete = 'off';\n        }\n        inputField.name = data.FieldName;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsReadonly = function (data, inputField) {\n        var isReadonly = false;\n        for (var n = 0; n < this.readOnlyCollection.length; n++) {\n            if (inputField.id === this.readOnlyCollection[n]) {\n                isReadonly = true;\n                break;\n            }\n        }\n        if (!this.pdfViewer.formDesignerModule && !this.pdfViewer.annotationModule && (data.IsInitialField || data.IsSignatureField)) {\n            isReadonly = true;\n        }\n        if (data.IsReadonly || (!this.pdfViewer.enableFormFields) || isReadonly) {\n            inputField.disabled = true;\n            inputField.style.cursor = 'default';\n            inputField.style.backgroundColor = 'transparent';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BackColor;\n            inputField.style.backgroundColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 0.2 + ')';\n            // eslint-disable-next-line\n            var fontColor = data.FontColor;\n            inputField.style.color = 'rgba(' + fontColor.R + ',' + fontColor.G + ',' + fontColor.B + ',' + 1 + ')';\n        }\n    };\n    /**\n     * @param isReadonly\n     * @private\n     */\n    // eslint-disable-next-line max-len\n    FormFields.prototype.formFieldsReadOnly = function (isReadonly) {\n        // eslint-disable-next-line\n        var formFields = document.getElementsByClassName('e-pdfviewer-formFields');\n        this.makeformFieldsReadonly(formFields, isReadonly);\n        // eslint-disable-next-line\n        var signatureFields = document.getElementsByClassName('e-pdfviewer-signatureformfields');\n        this.makeformFieldsReadonly(signatureFields, isReadonly);\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.makeformFieldsReadonly = function (formFields, isReadonly) {\n        for (var i = 0; i < formFields.length; i++) {\n            if (formFields[i]) {\n                // eslint-disable-next-line\n                var inputField = formFields[i];\n                if (!isReadonly) {\n                    inputField.disabled = true;\n                    inputField.style.cursor = 'default';\n                }\n                else {\n                    // eslint-disable-next-line\n                    inputField.disabled = false;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyTabIndex = function (data, inputField, pageIndex) {\n        inputField.tabIndex = data.TabIndex;\n        this.maxTabIndex = Math.max(this.maxTabIndex, inputField.tabIndex);\n        if (this.minTabIndex === -1) {\n            this.minTabIndex = inputField.tabIndex;\n        }\n        this.minTabIndex = Math.min(this.minTabIndex, inputField.tabIndex);\n        this.maintainTabIndex[pageIndex.toString()] = this.maxTabIndex;\n        this.maintanMinTabindex[pageIndex.toString()] = this.minTabIndex;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.checkIsRequiredField = function (data, inputField) {\n        if (data.IsRequired) {\n            inputField.required = true;\n            inputField.style.border = '1px solid red';\n        }\n        else {\n            // eslint-disable-next-line\n            var borderColor = data.BorderColor;\n            inputField.style.border = data.BorderWidth;\n            inputField.style.borderColor = 'rgba(' + borderColor.R + ',' + borderColor.G + ',' + borderColor.B + ',' + 1 + ')';\n        }\n        if (inputField.type !== 'checkbox' && inputField.type !== 'radio') {\n            var borderStyle = data.BorderStyle;\n            this.addBorderStylePropety(borderStyle, inputField);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyDefaultColor = function (inputField) {\n        // eslint-disable-next-line max-len\n        if (inputField.type !== 'button' && (inputField.style.backgroundColor === 'rgba(255, 255, 255, 0.2)' || inputField.style.backgroundColor === 'rgba(0, 0, 0, 0.2)')) {\n            inputField.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n        }\n        if (inputField.style.color === 'rgba(255, 255, 255, 0.2)') {\n            inputField.style.color = 'black';\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addAlignmentPropety = function (data, inputField) {\n        // eslint-disable-next-line\n        var alignment = data.Alignment;\n        switch (alignment) {\n            case 0:\n                inputField.style.textAlign = 'left';\n                break;\n            case 1:\n                inputField.style.textAlign = 'center';\n                break;\n            case 2:\n                inputField.style.textAlign = 'right';\n                break;\n            case 3:\n                inputField.style.textAlign = 'justify';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addBorderStylePropety = function (borderStyle, inputField) {\n        // eslint-disable-next-line\n        switch (borderStyle) {\n            case 0:\n                inputField.style.borderStyle = 'solid';\n                break;\n            case 1:\n                inputField.style.borderStyle = 'dashed';\n                break;\n            case 2:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 3:\n                inputField.style.borderStyle = 'inset';\n                break;\n            case 4:\n                inputField.style.borderStyle = 'outset';\n                break;\n            case 5:\n                inputField.style.borderStyle = 'dotted';\n                break;\n            case 6:\n                inputField.style.borderStyle = 'inset';\n                break;\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createRadioBoxField = function (data, pageIndex, type, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = type;\n        if (data.Selected) {\n            inputField.checked = true;\n        }\n        inputField.name = data.GroupName;\n        inputField.value = data.Value;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createDropDownField = function (data, pageIndex, index, printContainer) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.Selected && !printContainer) {\n            // eslint-disable-next-line\n            var previousField = document.getElementById('editableDropdown' + pageIndex + '_' + index);\n            if (previousField) {\n                previousField.remove();\n            }\n            // eslint-disable-next-line\n            var inputFields = document.createElement('input');\n            inputFields.id = 'editableDropdown' + pageIndex + '_' + index;\n            inputFields.setAttribute('list', this.pdfViewer.element.id + 'input_' + pageIndex + '_' + index);\n            // eslint-disable-next-line\n            var bounds = data['LineBounds'];\n            // eslint-disable-next-line\n            var font = data['Font'];\n            inputFields.style.position = 'absolute';\n            inputFields.style.border = '0px';\n            // eslint-disable-next-line\n            this.applyPosition(inputFields, bounds, font, pageIndex, data['Rotation']);\n            inputFields.style.backgroundColor = 'rgba(0, 20, 200, 0.2)';\n            inputFields.className = 'e-pdfviewer-formFields';\n            if (data.selectedIndex === -1) {\n                inputFields.value = data.SelectedValue;\n            }\n            if (printContainer) {\n                printContainer.appendChild(inputFields);\n            }\n            else {\n                var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n                textLayer.appendChild(inputFields);\n            }\n            inputFields.addEventListener('focus', this.focusFormFields.bind(this));\n            inputFields.addEventListener('blur', this.blurFormFields.bind(this));\n            inputFields.addEventListener('click', this.updateFormFields.bind(this));\n            inputFields.addEventListener('change', this.changeFormFields.bind(this));\n            inputFields.addEventListener('keydown', this.updateFormFieldsValue.bind(this));\n            inputField = document.createElement('DATALIST');\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-dropdownSelect';\n            if (data.SelectedValue === childItems[j] || data.selectedIndex === j) {\n                option.selected = true;\n            }\n            else {\n                option.selected = false;\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createListBoxField = function (data, pageIndex) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('select');\n        // eslint-disable-next-line\n        var childItems = data['TextList'];\n        if (data.MultiSelect) {\n            inputField.multiple = true;\n        }\n        else {\n            inputField.multiple = false;\n            inputField.size = childItems.length;\n        }\n        for (var j = 0; j < childItems.length; j++) {\n            // eslint-disable-next-line\n            var option = document.createElement('option');\n            option.className = 'e-pdfviewer-ListBox';\n            for (var k = 0; k < data.SelectedList.length; k++) {\n                if (data.SelectedList[k] === j) {\n                    option.selected = true;\n                }\n            }\n            option.innerHTML = childItems[j];\n            inputField.appendChild(option);\n        }\n        inputField.name = data.Text;\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.createSignatureField = function (data, pageIndex, index, printContainer, count) {\n        // eslint-disable-next-line\n        var inputField = document.createElement('input');\n        inputField.type = 'text';\n        inputField.name = data.FieldName;\n        // eslint-disable-next-line\n        var previousField = document.getElementById('signIcon' + pageIndex + '_' + index);\n        if (previousField && !printContainer) {\n            previousField.remove();\n        }\n        this.pdfViewerBase.isInitialField = data.IsInitialField;\n        var signIndicator = this.pdfViewerBase.isInitialField ? \"Initial\" : \"Sign\";\n        //check whether the width for sign indicator has default value or not and then set the default width value for initial field.\n        var signatureFieldIndicatorWidth = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width === 19 ? (this.pdfViewerBase.isInitialField ? 27 : 19) : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.width;\n        // eslint-disable-next-line\n        var span = document.createElement('span');\n        var textLayer = document.getElementById(this.pdfViewer.element.id + '_textLayer_' + pageIndex);\n        // eslint-disable-next-line\n        var bounds = data['LineBounds'];\n        // eslint-disable-next-line\n        var font = data['Font'];\n        var left = this.ConvertPointToPixel(bounds.X);\n        var top = this.ConvertPointToPixel(bounds.Y);\n        // eslint-disable-next-line max-len\n        var height = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height > bounds.Height / 2 ? bounds.Height / 2 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.height;\n        // eslint-disable-next-line max-len\n        var width = signatureFieldIndicatorWidth > bounds.Width / 2 ? bounds.Width / 2 : signatureFieldIndicatorWidth;\n        // eslint-disable-next-line max-len\n        var fontSize = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize > height / 2 ? 10 : this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.fontSize;\n        span.style.position = 'absolute';\n        span.id = 'signIcon' + pageIndex + '_' + index;\n        var zoomvalue = this.pdfViewerBase.getZoomFactor();\n        var rotation = this.getAngle(pageIndex);\n        // eslint-disable-next-line\n        var annotBounds = { left: left, top: top, width: width, height: height };\n        // eslint-disable-next-line\n        var fieldBounds = this.getBounds(annotBounds, pageIndex);\n        span.style.transform = 'rotate(' + rotation + 'deg)';\n        span.style.left = fieldBounds.left * zoomvalue + 'px';\n        span.style.top = fieldBounds.top * zoomvalue + 'px';\n        if (Browser.isDevice && !this.pdfViewer.enableDesktopMode) {\n            span.style.height = 5 + 'px';\n            span.style.width = 10 + 'px';\n            span.style.fontSize = '3px';\n        }\n        else {\n            span.style.height = height + 'px';\n            span.style.width = width + 'px';\n            span.style.fontSize = fontSize + 'px';\n            if (isBlazor()) {\n                span.style.fontSize = (fontSize - 1) + 'px';\n            }\n        }\n        span.style.padding = '2px';\n        span.style.textAlign = 'center';\n        span.style.boxSizing = 'content-box';\n        // eslint-disable-next-line\n        span.innerHTML = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.text : signIndicator;\n        span.style.color = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.color : 'black';\n        // eslint-disable-next-line\n        span.style.backgroundColor = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.backgroundColor : 'orange';\n        span.style.opacity = this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity ? this.pdfViewer.signatureFieldSettings.signatureIndicatorSettings.opacity : 1;\n        textLayer.appendChild(span);\n        this.addSignaturePath(data, count);\n        return inputField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.addSignaturePath = function (signData, count) {\n        this.isSignatureField = false;\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = JSON.parse(data);\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                // eslint-disable-next-line max-len\n                if ((currentData.Name === 'ink' || currentData.Name === 'SignatureField' || currentData.Name === 'SignatureImage' || currentData.Name === 'SignatureText') && currentData.FieldName === signData.ActualFieldName + '_' + count && currentData.Value && currentData.Value !== '') {\n                    signData.Value = currentData.Value;\n                    signData.FontFamily = currentData.FontFamily;\n                    signData.FontSize = currentData.FontSize;\n                    this.isSignatureField = true;\n                    if (!signData.Bounds) {\n                        signData.Bounds = currentData.LineBounds;\n                    }\n                    break;\n                }\n            }\n        }\n        return this.isSignatureField;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBounds = function (bound, pageIndex, rotation, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        // eslint-disable-next-line\n        var bounds;\n        if (rotation > 0) {\n            bounds = this.getBoundsPosition(rotation, bound, pageDetails, isFieldRotated);\n        }\n        else {\n            bounds = this.getBoundsPosition(pageDetails.rotation, bound, pageDetails, isFieldRotated);\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.getBoundsPosition = function (rotation, bound, pageDetails, isFieldRotated) {\n        // eslint-disable-next-line\n        var bounds;\n        if (!isFieldRotated) {\n            switch (rotation) {\n                case 90:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 180:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 270:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height, top: bound.left, width: bound.height, height: bound.width };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top, top: pageDetails.height - bound.left - bound.width, width: bound.height, height: bound.width };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        else {\n            switch (rotation) {\n                case 0:\n                    // eslint-disable-next-line\n                    bounds = bound;\n                    break;\n                case 1:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), top: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                    break;\n                case 2:\n                    // eslint-disable-next-line\n                    bounds = { left: pageDetails.width - bound.left - bound.width, top: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                    break;\n                case 3:\n                    // eslint-disable-next-line\n                    bounds = { left: bound.top - (bound.width / 2 - bound.height / 2), top: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                    break;\n            }\n            if (!bounds) {\n                bounds = bound;\n            }\n        }\n        return bounds;\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.applyPosition = function (inputField, bounds, font, pageIndex, rotation, isFieldRotated) {\n        if (bounds) {\n            var left = this.ConvertPointToPixel(bounds.X);\n            var top_3 = this.ConvertPointToPixel(bounds.Y);\n            var width = this.ConvertPointToPixel(bounds.Width);\n            var height = this.ConvertPointToPixel(bounds.Height);\n            var fontHeight = 0;\n            // eslint-disable-next-line\n            var fieldBounds = { left: left, top: top_3, width: width, height: height };\n            // eslint-disable-next-line\n            var annotBounds = this.getBounds(fieldBounds, pageIndex, rotation, isFieldRotated);\n            if (font !== null && font.Height) {\n                inputField.style.fontFamily = font.Name;\n                if (font.Italic) {\n                    inputField.style.fontStyle = 'italic';\n                }\n                if (font.Bold) {\n                    inputField.style.fontWeight = 'Bold';\n                }\n                fontHeight = this.ConvertPointToPixel(font.Size);\n            }\n            this.pdfViewerBase.setStyleToTextDiv(inputField, annotBounds.left, annotBounds.top, fontHeight, annotBounds.width, annotBounds.height, false);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.renderExistingAnnnot = function (data, index, printContainer, isFieldRotated) {\n        if (!printContainer) {\n            // eslint-disable-next-line\n            var bounds = void 0;\n            if (data.Bounds && data.Name !== 'ink') {\n                bounds = data.Bounds;\n            }\n            else {\n                bounds = data.LineBounds;\n            }\n            var currentLeft = void 0;\n            var currentTop = void 0;\n            var currentWidth = void 0;\n            var currentHeight = void 0;\n            if (bounds.x || bounds.y || bounds.width || bounds.height) {\n                currentLeft = bounds.x;\n                currentTop = bounds.y;\n                currentWidth = bounds.width;\n                currentHeight = bounds.height;\n            }\n            else {\n                currentLeft = this.ConvertPointToPixel(bounds.X);\n                currentTop = this.ConvertPointToPixel(bounds.Y);\n                currentWidth = this.ConvertPointToPixel(bounds.Width);\n                currentHeight = this.ConvertPointToPixel(bounds.Height);\n            }\n            // eslint-disable-next-line\n            var currentPage = parseFloat(data['PageIndex']);\n            // eslint-disable-next-line\n            var bound = { left: currentLeft, top: currentTop, width: currentWidth, height: currentHeight };\n            // eslint-disable-next-line\n            var newBounds = this.updateSignatureBounds(bound, currentPage, isFieldRotated);\n            var annot = void 0;\n            var fontFamily = data.FontFamily ? data.FontFamily : data.fontFamily;\n            // eslint-disable-next-line\n            if ((data.Value.split('base64,')[1])) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureImage', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            else if (fontFamily && !(data.Value && data.Value.startsWith('M') && data.Value.split(',')[1].split(' ')[1].startsWith('L'))) {\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: newBounds, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'SignatureText', opacity: 1, rotateAngle: isFieldRotated ? this.getAngle(currentPage) : 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }, fontFamily: data.FontFamily, fontSize: data.FontSize\n                };\n                annot.fontFamily = fontFamily;\n                annot.fontSize = data.FontSize ? data.FontSize : data.fontSize;\n            }\n            else {\n                var bound_1 = newBounds;\n                var tempBounds = { left: newBounds.x, top: newBounds.y, width: newBounds.width, height: newBounds.height };\n                bound_1 = this.updateSignatureBounds(tempBounds, currentPage, false);\n                annot = {\n                    // eslint-disable-next-line max-len\n                    id: this.pdfViewer.element.id + 'input_' + currentPage + '_' + index, bounds: bound_1, pageIndex: currentPage, data: data.Value, modifiedDate: '',\n                    shapeAnnotationType: 'Path', opacity: 1, rotateAngle: 0, annotName: 'SignatureField', comments: [], review: { state: '', stateModel: '', modifiedDate: '', author: '' }\n                };\n            }\n            if ((data.Name === 'SignatureField' || data.Name === 'InitialField') && !isNullOrUndefined(data.id)) {\n                var elementId = data.id;\n                var signatureFieldElement = document.getElementById(elementId + '_content_html_element');\n                var signatureField = this.pdfViewer.nameTable[elementId];\n                annot.id = signatureField.id + \"_content\";\n                var obj = this.pdfViewer.add(annot);\n                signatureField.wrapper.children.push(obj.wrapper);\n                if (!isNullOrUndefined(signatureFieldElement) && this.isSignatureField) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n                else if (!isNullOrUndefined(signatureFieldElement) && data.Value) {\n                    var inputField = signatureFieldElement.children[0].children[0];\n                    inputField.style.pointerEvents = 'none';\n                    inputField.className = 'e-pdfviewer-signatureformfields-signature';\n                    inputField.parentElement.style.pointerEvents = 'none';\n                }\n            }\n            else {\n                var target = document.getElementById(annot.id);\n                if (target && target.classList.contains('e-pdfviewer-signatureformfields-signature')) {\n                    this.pdfViewer.annotation.deleteAnnotationById(annot.id);\n                }\n                this.pdfViewer.add(annot);\n            }\n            data.Bounds = annot.bounds;\n            if (this.pdfViewer.formDesignerModule) {\n                this.updateSignatureDataInSession(annot, annot.id);\n            }\n            // eslint-disable-next-line\n            var canvass = document.getElementById(this.pdfViewer.element.id + '_annotationCanvas_' + currentPage);\n            // eslint-disable-next-line\n            this.pdfViewer.renderDrawing(canvass, currentPage);\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.updateSignatureBounds = function (bound, pageIndex, isFieldRotated) {\n        // eslint-disable-next-line\n        var pageDetails = this.pdfViewerBase.pageSize[pageIndex];\n        if (pageDetails) {\n            if (!isFieldRotated) {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height, y: bound.left, width: bound.height, height: bound.width };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top, y: (pageDetails.height - bound.left - bound.width), width: bound.height, height: bound.width };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n            else {\n                if (pageDetails.rotation === 1) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.top - bound.height - (bound.width / 2 - bound.height / 2), y: bound.left + (bound.width / 2 - bound.height / 2), width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 2) {\n                    // eslint-disable-next-line max-len\n                    return { x: pageDetails.width - bound.left - bound.width, y: pageDetails.height - bound.top - bound.height, width: bound.width, height: bound.height };\n                }\n                else if (pageDetails.rotation === 3) {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.top - (bound.width / 2 - bound.height / 2), y: (pageDetails.height - bound.left - bound.width + (bound.width / 2 - bound.height / 2)), width: bound.width, height: bound.height };\n                }\n                else {\n                    // eslint-disable-next-line max-len\n                    return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n                }\n            }\n        }\n        else {\n            return { x: bound.left, y: bound.top, width: bound.width, height: bound.height };\n        }\n    };\n    FormFields.prototype.resetFormFields = function () {\n        var formFieldData = this.pdfViewer.formFieldCollections;\n        for (var i = 0; i < formFieldData.length; i++) {\n            var currentData = formFieldData[i];\n            this.currentTarget = document.getElementById(currentData.id);\n            if (currentData.type === 'Textbox') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'RadioButton') {\n                this.currentTarget.checked = currentData.value;\n                if (currentData.value) {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n            else if (currentData.type === 'DropDown') {\n                this.currentTarget.value = currentData.value;\n            }\n            else if (currentData.type === 'CheckBox') {\n                this.currentTarget.checked = currentData.value;\n            }\n            else if (currentData.type === 'SignatureField') {\n                // eslint-disable-next-line\n                var annotation = this.pdfViewer.nameTable[currentData.id];\n                if (annotation) {\n                    if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                        this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                        this.currentTarget.style.pointerEvents = '';\n                        this.updateDataInSession(this.currentTarget, '');\n                    }\n                    this.pdfViewer.remove(annotation);\n                    this.pdfViewer.renderDrawing();\n                }\n            }\n            if (currentData.type !== 'RadioButton' && currentData.type !== 'SignatureField') {\n                this.updateDataInSession(this.currentTarget);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFieldStorage = function () {\n        // eslint-disable-next-line\n        var sessionSize = Math.round(JSON.stringify(window.sessionStorage).length / 1024);\n        var maxSessionSize = 4500;\n        if (sessionSize > maxSessionSize) {\n            var storageLength = window.sessionStorage.length;\n            // eslint-disable-next-line\n            var annotationList = [];\n            for (var i = 0; i < storageLength; i++) {\n                if (window.sessionStorage.key(i) && window.sessionStorage.key(i).split('_')[3]) {\n                    if (window.sessionStorage.key(i).split('_')[3] === 'annotations') {\n                        // eslint-disable-next-line max-len\n                        this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)] = window.sessionStorage.getItem(window.sessionStorage.key(i));\n                        annotationList.push(window.sessionStorage.key(i));\n                    }\n                }\n            }\n            if (annotationList) {\n                for (var i = 0; i < annotationList.length; i++) {\n                    window.sessionStorage.removeItem(annotationList[i]);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line\n    FormFields.prototype.clearFormFields = function (formField) {\n        // eslint-disable-next-line\n        var data = this.pdfViewerBase.getItemFromSessionStorage('_formfields');\n        if (data) {\n            // eslint-disable-next-line\n            var formFieldsData = void 0;\n            if (formField) {\n                formFieldsData = [formField];\n            }\n            else {\n                formFieldsData = JSON.parse(data);\n            }\n            var isFirstRadio = true;\n            for (var m = 0; m < formFieldsData.length; m++) {\n                // eslint-disable-next-line\n                var currentData = formFieldsData[m];\n                if (formField) {\n                    currentData.uniqueID = formField.id;\n                    currentData.Name = formField.type;\n                }\n                // eslint-disable-next-line\n                this.currentTarget = document.getElementById(currentData.uniqueID);\n                if (currentData.Name === 'Textbox') {\n                    this.currentTarget.value = '';\n                }\n                else if (currentData.Name === 'RadioButton') {\n                    if (isFirstRadio) {\n                        this.currentTarget.checked = true;\n                        this.updateDataInSession(this.currentTarget);\n                        isFirstRadio = false;\n                    }\n                }\n                else if (currentData.Name === 'DropDown') {\n                    this.currentTarget.value = currentData.TextList[0];\n                }\n                else if (currentData.Name === 'CheckBox') {\n                    this.currentTarget.checked = false;\n                }\n                else if (currentData.Name === 'SignatureField') {\n                    // eslint-disable-next-line\n                    var annotation = this.pdfViewer.nameTable[currentData.uniqueID];\n                    if (annotation) {\n                        if (this.currentTarget && this.currentTarget.className === 'e-pdfviewer-signatureformfields-signature') {\n                            this.currentTarget.className = 'e-pdfviewer-signatureformfields';\n                            this.currentTarget.style.pointerEvents = '';\n                            this.currentTarget.parentElement.style.pointerEvents = '';\n                            this.updateDataInSession(this.currentTarget, '');\n                            if (formField) {\n                                formField.value = '';\n                                formField.signatureType = [formField.signatureType];\n                                formField.signatureType[0] = '';\n                            }\n                        }\n                        this.pdfViewer.remove(annotation);\n                        this.pdfViewer.renderDrawing();\n                    }\n                }\n                if (currentData.Name !== 'SignatureField' && currentData.Name !== 'ink' && currentData.Name !== 'RadioButton') {\n                    this.updateDataInSession(this.currentTarget);\n                }\n            }\n        }\n    };\n    /**\n     * @param number\n     * @private\n     */\n    // eslint-disable-next-line\n    FormFields.prototype.ConvertPointToPixel = function (number) {\n        return (number * (96 / 72));\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.destroy = function () {\n        this.currentTarget = null;\n        this.readOnlyCollection = [];\n        if (this.pdfViewerBase && this.pdfViewerBase.signatureModule)\n            this.pdfViewerBase.signatureModule.destroy();\n    };\n    /**\n     * @private\n     */\n    FormFields.prototype.getModuleName = function () {\n        return 'FormFields';\n    };\n    /**\n     * @private\n     * Get the text wdith\n     * @param text\n     * @param font\n     * @param fontFamily\n    */\n    FormFields.prototype.getTextWidth = function (text, font, fontFamily) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var fontName;\n        if (font) {\n            fontName = font + 'px' + ' ' + fontFamily;\n        }\n        context.font = fontName || getComputedStyle(document.body).font;\n        return context.measureText(text).width;\n    };\n    /**\n     * @private\n     * @param {number} fontSize - Font size.\n     * @returns {number} - Returns the font size.\n    */\n    FormFields.prototype.getFontSize = function (fontSize) {\n        return (fontSize % 2 === 0) ? fontSize : --fontSize;\n    };\n    return FormFields;\n}());\nexport { FormFields };\n"],"sourceRoot":""}