(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~90f3b56d"],{a80c:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("7de8"),o=i("d61a"),a=i("643e"),s=i("390d"),r=i("5027"),d=i("725f"),l=i("2764"),p=i("a613"),h=i("505e"),u=i("d9bf"),c=i("8faa"),f=i("d420"),g=i("c9c3"),m=i("a5aa"),w=i("da93"),v=i("1e45"),V=i("bb69"),A=i("3646"),S=i("ecd8"),M=i("a7c5"),C=i("e0d6"),b=i("6b08"),y=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function s(e){try{d(n.next(e))}catch(t){a(t)}}function r(e){try{d(n["throw"](e))}catch(t){a(t)}}function d(e){e.done?o(e.value):new i((function(t){t(e.value)})).then(s,r)}d((n=n.apply(e,t||[])).next())}))},x=function(e,t){var i,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(e){return function(t){return d([e,t])}}function d(a){if(i)throw new TypeError("Generator is already executing.");while(s)try{if(i=1,n&&(o=2&a[0]?n["return"]:a[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(r){a=[6,r],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},I=function(){function e(e){var t=this;this.pageSize=[],this.pageCount=0,this.isReRenderRequired=!0,this.currentPageNumber=0,this.activeElements=new v["a"],this.mouseDownEvent=null,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.pageLeft=5,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isNewStamp=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.focusField=[],this.clearSessionStorage=function(){var e="";e=n["c"].isIE||"edge"===n["c"].info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==e){var o={hashId:e,documentLiveCount:i,action:"Unload",elementId:t.pdfViewer.element.id},a=window.sessionStorage.getItem("unload"),s=window.sessionStorage.getItem("serviceURL");if(s&&"undefined"!==s){var r="keepalive"in new Request("");if(r){var d=t.setUnloadRequestHeaders(),l=t.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(s+"/"+a,{method:"POST",credentials:l,headers:d,body:JSON.stringify(o)})}}else Object(n["K"])()&&t.clearCache(a,o,t)}window.sessionStorage.removeItem(t.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape"),window.sessionStorage.removeItem(t.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(t.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(t.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(t.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(t.documentId+"_formfields"),window.sessionStorage.removeItem(t.documentId+"_formDesigner"),window.sessionStorage.removeItem(t.documentId+"_annotations_sign"),window.sessionStorage.removeItem(t.documentId+"_pagedata"),window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")},this.onWindowResize=function(e){var i=null;i=t,t.pdfViewer.enableRtl?(i.viewerContainer.style.right=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.left=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(i.viewerContainer.style.left=(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)+"px",i.viewerContainer.style.right=(i.navigationPane.commentPanelContainer?i.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var o=i.pdfViewer.element.clientWidth>0?i.pdfViewer.element.clientWidth:i.pdfViewer.element.style.width,a=o-(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerContainerLeft():0)-(i.navigationPane.commentPanelContainer?i.navigationPane.getViewerContainerRight():0);if(i.viewerContainer.style.width=a+"px",i.pdfViewer.toolbarModule){var s=Object(n["K"])()?i.pdfViewer.element.querySelector(".e-pv-toolbar"):i.getElement("_toolbarContainer"),r=0,d=0;if(s&&(r=s.getBoundingClientRect().height),i.isAnnotationToolbarHidden()||n["c"].isDevice&&!t.pdfViewer.enableDesktopMode){if(0===r&&t.navigationPane.isNavigationToolbarVisible){var l=i.getElement("_navigationToolbar");r=l.getBoundingClientRect().height}if(!i.isFormDesignerToolbarHidded()){var p=i.getElement("_formdesigner_toolbar");d=p?p.getBoundingClientRect().height:0}i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,r+d)}else{var h=Object(n["K"])()?i.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"):i.getElement("_annotation_toolbar"),u=0;h&&(u=h.getBoundingClientRect().height),i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,r+u)}}else i.viewerContainer.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0);if(i.pdfViewer.bookmarkViewModule&&n["c"].isDevice&&!t.pdfViewer.enableDesktopMode){var c=i.getElement("_bookmarks_container");c&&(c.style.height=i.updatePageHeight(i.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===i.viewerContainer.style.height&&("auto"===i.pdfViewer.height.toString()?(i.pdfViewer.height=500,i.viewerContainer.style.height=i.pdfViewer.height+"px"):i.viewerContainer.style.height=i.pdfViewer.element.style.height),"0px"===i.viewerContainer.style.width&&("auto"===i.pdfViewer.width.toString()?(i.pdfViewer.width=500,i.viewerContainer.style.width=i.pdfViewer.width+"px"):i.viewerContainer.style.width=i.pdfViewer.element.style.width),i.pageContainer.style.width=i.viewerContainer.clientWidth+"px",0===i.viewerContainer.clientWidth&&(i.pageContainer.style.width=i.pdfViewer.element.style.width),Object(n["K"])()||i.pdfViewer.toolbarModule&&i.pdfViewer.toolbarModule.onToolbarResize(i.navigationPane.sideBarToolbar?i.navigationPane.getViewerMainContainerWidth():i.pdfViewer.element.clientWidth),t.pdfViewer.enableToolbar&&t.pdfViewer.thumbnailViewModule&&i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),!i.pdfViewer.textSearchModule||n["c"].isDevice&&!t.pdfViewer.enableDesktopMode||i.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==a&&(i.navigationPane.isBookmarkListOpen||i.updateZoomValue()),n["c"].isDevice&&!t.pdfViewer.enableDesktopMode?(i.mobileScrollerContainer.style.left=a-parseFloat(i.mobileScrollerContainer.style.width)+"px",i.mobilePageNoContainer.style.left=a/2-parseFloat(i.mobilePageNoContainer.style.width)/2+"px",i.mobilePageNoContainer.style.top=i.pdfViewer.element.clientHeight/2+"px",i.updateMobileScrollerPosition()):(i.navigationPane.setResizeIconTop(),i.navigationPane.setCommentPanelResizeIconTop(),e&&"resize"===e.type&&i.signatureModule.updateCanvasSize()),i.navigationPane.sideBarToolbar&&(i.navigationPane.sideBarToolbar.style.height=i.viewerContainer.style.height)},this.viewerContainerOnMousedown=function(e){t.isFreeTextContextMenu=!1;var i=!1;if(t.isSelection=!0,0===e.button&&!t.getPopupNoteVisibleStatus()&&!t.isClickedOnScrollBar(e,!1)){t.isViewerMouseDown=!0;var o=e.target;1===e.detail&&"e-pdfviewer-formFields"!==o.className&&"free-text-input"!==o.className&&(i=!0,t.focusViewerContainer(!0)),t.scrollPosition=t.viewerContainer.scrollTop/t.getZoomFactor(),t.mouseX=e.clientX,t.mouseY=e.clientY,t.mouseLeft=e.clientX,t.mouseTop=e.clientY;var a=!!document.documentMode;!t.pdfViewer.textSelectionModule||t.isClickedOnScrollBar(e,!0)||t.isTextSelectionDisabled||(a||"e-pdfviewer-formFields"===o.className||"e-pdfviewer-ListBox"===o.className||"e-pv-formfield-dropdown"===o.className||"e-pv-formfield-listbox"===o.className||e.preventDefault(),"e-pv-droplet"!==o.className&&t.pdfViewer.textSelectionModule.clearTextSelection())}t.isClickedOnScrollBar(e,!1)&&(t.isViewerMouseDown=!0),t.isPanMode&&(t.dragX=e.pageX,t.dragY=e.pageY,t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="grabbing")),t.isShapeBasedAnnotationsEnabled()&&t.diagramMouseDown(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(i||(t.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,t.updateCommentPanel(),i=!0)),Object(n["K"])()&&t.mouseDownHandler(e)},this.viewerContainerOnMouseup=function(e){if(!t.getPopupNoteVisibleStatus()){t.isViewerMouseDown&&(t.scrollHoldTimer&&(clearTimeout(t.scrollHoldTimer),t.scrollHoldTimer=null),t.scrollPosition*t.getZoomFactor()!==t.viewerContainer.scrollTop&&t.pageViewScrollChanged(t.currentPageNumber));var i=!1;e.target&&("e-pv-show-designer-name"==e.target.className&&""!=e.target.id.split("_",1)&&(i=document.getElementById(e.target.id.split("_",1)).disabled),"foreign-object"==e.target.className&&e.target.children[0]&&(i=e.target.children[0].disabled)),i&&t.pdfViewer.annotation&&t.pdfViewer.annotation.clearSelection(),t.isShapeBasedAnnotationsEnabled()&&!i&&(t.diagramMouseUp(e),t.pdfViewer.annotation&&t.pdfViewer.annotation.onAnnotationMouseUp()),t.pdfViewer.selectedItems.formFields.length>0?Object(n["L"])(t.pdfViewer.toolbar)||Object(n["L"])(t.pdfViewer.toolbar.formDesignerToolbarModule)||n["c"].isDevice||t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0):Object(n["L"])(t.pdfViewer.toolbar)||Object(n["L"])(t.pdfViewer.toolbar.formDesignerToolbarModule)||n["c"].isDevice||t.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!1),t.isSelection=!1;var o=document.getElementById(t.pdfViewer.element.id+"_commantPanel");if(o&&"block"===o.style.display&&t.pdfViewer.selectedItems&&0!==t.pdfViewer.selectedItems.annotations.length){var a=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber);a&&a.ej2_instances[0].expandItem(!0);var s=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);s&&(s.classList.contains("e-pv-comments-border")||s.firstChild.click())}if(0===e.button&&!t.isClickedOnScrollBar(e,!1)){var r=e.target,d=e.clientX,l=e.clientY,p=t.getZoomFactor(),h=t.currentPageNumber;if(r){var u=r.id.split("_text_")[1]||r.id.split("_textLayer_")[1]||r.id.split("_annotationCanvas_")[1]||r.id.split("_pageDiv_")[1];h=parseInt(u)}var c=t.getElement("_pageDiv_"+h);if(c){var f=c.getBoundingClientRect();d=(e.clientX-f.left)/p,l=(e.clientY-f.top)/p}r&&r.classList&&!r.classList.contains("e-pv-hyperlink")&&!r.classList.contains("e-pv-page-container")&&(t.pdfViewer.firePageClick(d,l,h+1),t.pdfViewer.formFieldsModule&&!t.pdfViewer.formDesignerModule&&t.pdfViewer.formFieldsModule.removeFocus()),t.isTextMarkupAnnotationModule()&&!t.isToolbarInkClicked&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(e),t.pdfViewer.formDesignerModule&&!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule.updateCanvas(h),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&t.isPanMode&&(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab")}t.isViewerMouseDown=!1}},this.viewerContainerOnMouseWheel=function(e){if(t.isViewerMouseWheel=!0,t.getRerenderCanvasCreated()&&e.preventDefault(),e.ctrlKey){var i=25;t.pdfViewer.magnification.zoomFactor<1&&(i=10),t.pdfViewer.magnification.zoomFactor>=2&&(i=50),e.wheelDelta>0?t.pdfViewer.magnification.zoomTo(100*t.pdfViewer.magnification.zoomFactor+i):t.pdfViewer.magnification.zoomTo(100*t.pdfViewer.magnification.zoomFactor-i)}t.pdfViewer.magnificationModule&&(t.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),t.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||t.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(t.currentPageNumber-1))},this.onWindowKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),o=!!i&&e.metaKey;if((!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus)&&(!e.ctrlKey||!o))switch(e.keyCode){case 27:t.pdfViewer.toolbar&&(t.pdfViewer.toolbar.addInkAnnotation(),t.pdfViewer.toolbar.deSelectCommentAnnotation(),t.pdfViewer.toolbar.updateStampItems(),t.pdfViewer.toolbar.annotationToolbarModule&&(Object(n["K"])()?t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor():t.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()),t.pdfViewer.tool="",t.focusViewerContainer());break;case 9:if(e.target&&e.target.id&&t.pdfViewer.formFields)for(var a=0;a<t.pdfViewer.formFields.length;a++){var s=t.pdfViewer.formFields[a];if(e.target.id===s.id){var r={value:s.value,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,color:s.color,backgroundColor:s.backgroundColor,alignment:s.alignment,isReadonly:s.isReadonly,visibility:s.visibility,maxLength:s.maxLength,isRequired:s.isRequired,isPrint:s.isPrint,rotation:s.rotateAngle,tooltip:s.tooltip,options:s.options,isChecked:s.isChecked,isSelected:s.isSelected};t.pdfViewer.fireFocusOutFormField(r,s.pageIndex)}}break}},this.viewerContainerOnKeyDown=function(e){var i=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),n=!!i&&e.metaKey;if(!t.isFreeTextAnnotationModule()||!t.pdfViewer.annotationModule||!0!==t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==t.pdfViewer.annotationModule.inputElementModule.isInFocus){if(e.ctrlKey||n){if(e.shiftKey&&!i||i&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==t.currentPageNumber&&t.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),t.currentPageNumber!==t.pageCount&&t.updateScrollTop(t.pageCount-1);break;default:break}switch(e.keyCode){case 79:t.pdfViewer.toolbarModule&&t.pdfViewer.enableToolbar&&t.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&(e.preventDefault(),t.pdfViewer.textSelectionModule.copyText()),(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.copy(),t.contextMenuModule.previousAction="Copy");break;case 70:t.pdfViewer.textSearchModule&&t.pdfViewer.enableTextSearch&&(e.preventDefault(),t.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:t.pdfViewer.printModule&&t.pdfViewer.enablePrint&&(e.preventDefault(),t.pdfViewer.print.print());break;case 90:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.undo();break;case 88:(t.pdfViewer.selectedItems.annotations.length||t.pdfViewer.selectedItems.formFields.length)&&(t.pdfViewer.cut(),t.contextMenuModule.previousAction="Cut");break;case 89:t.pdfViewer.annotationModule&&t.pdfViewer.annotationModule.redo();break;case 86:(t.pdfViewer.annotation&&t.pdfViewer.annotation.isShapeCopied||t.pdfViewer.formFields&&t.pdfViewer.formDesigner.isShapeCopied)&&(t.pdfViewer.paste(),t.contextMenuModule.previousAction="Paste");break;default:break}}else switch(e.keyCode){case 46:t.DeleteKeyPressed(e);break}t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e)}},this.viewerContainerOnMousemove=function(e){t.mouseX=e.clientX,t.mouseY=e.clientY;var i=!!document.documentMode,n=e.target;if("Drag"===t.action&&e.preventDefault(),t.isViewerMouseDown&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"Line"!==t.action&&"DrawTool"!==t.action&&"Distance"!==t.action)if(t.pdfViewer.textSelectionModule&&t.pdfViewer.enableTextSelection&&!t.isTextSelectionDisabled&&!t.getPopupNoteVisibleStatus())if(i){var o=window.getSelection();o.type||o.isCollapsed||null===o.anchorNode||(t.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!=e.target.className&&e.preventDefault(),t.mouseX=e.clientX,t.mouseY=e.clientY;var a=t.pdfViewer.annotationModule;a&&a.textMarkupAnnotationModule&&a.textMarkupAnnotationModule.isDropletClicked&&a.textMarkupAnnotationModule.isEnableTextMarkupResizer(a.textMarkupAnnotationModule.currentTextMarkupAddMode)?a.textMarkupAnnotationModule.textSelect(e.target,t.mouseX,t.mouseY):t.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,t.mouseX,t.mouseY)}else t.skipPreventDefault(n)&&e.preventDefault();if(t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(e),t.isPanMode&&t.panOnMouseMove(e),t.isShapeBasedAnnotationsEnabled()){var s=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.parentElement.classList.contains("foreign-object")||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var r=t.pdfViewer.annotation.getEventPageNumber(e),d=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+r);if(d){var l=d.getBoundingClientRect(),p=l.x?l.x:l.left,h=l.y?l.y:l.top;s=t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===t.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new u["a"](p,h,l.width-10,l.height-10):new u["a"](p+10,h+10,l.width-10,l.height-10)}}else if(!t.pdfViewer.annotationModule&&t.pdfViewer.formDesignerModule){r=t.pdfViewer.formDesignerModule.getEventPageNumber(e),d=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+r);if(d){l=d.getBoundingClientRect(),p=l.x?l.x:l.left;var c=l.y?l.y:l.top;s=new u["a"](p+10,c+10,l.width-10,l.height-10)}}var f=t.pdfViewer.annotationModule?t.pdfViewer.annotationModule.stampAnnotationModule:null;!s||!s.containsPoint({x:t.mouseX,y:t.mouseY})||f&&f.isStampAnnotSelected?(t.diagramMouseLeave(e),t.isAnnotationDrawn&&"Ink"!==t.action&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)):(t.diagramMouseMove(e),t.annotationEvent=e),t.pdfViewer.enableStampAnnotations&&f&&f.isStampAnnotSelected&&(t.pdfViewer.tool="Stamp",t.tool=new m["j"](t.pdfViewer,t),t.isMouseDown=!0,f.isStampAnnotSelected=!1,f.isNewStampAnnot=!0),t.isSignatureAdded&&t.pdfViewer.enableHandwrittenSignature&&(t.pdfViewer.tool="Stamp",t.tool=new m["j"](t.pdfViewer,t),t.isMouseDown=!0,t.isSignatureAdded=!1,t.isNewSignatureAdded=!0)}},this.panOnMouseMove=function(e){var i=!1;if("Ink"!==t.action&&"Line"!==t.action&&"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||(i=!0),t.viewerContainer.contains(e.target)&&e.target!==t.viewerContainer&&e.target!==t.pageContainer&&!i)if(t.isViewerMouseDown){var n=t.dragX-e.pageX,o=t.dragY-e.pageY;t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+o,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+n,t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grabbing",t.viewerContainer.style.cursor="-moz-grabbing",t.viewerContainer.style.cursor="grabbing",t.dragX=e.pageX,t.dragY=e.pageY}else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="move",t.viewerContainer.style.cursor="-webkit-grab",t.viewerContainer.style.cursor="-moz-grab",t.viewerContainer.style.cursor="grab");else t.navigationPane.isNavigationPaneResized||(t.viewerContainer.style.cursor="auto")},this.viewerContainerOnMouseLeave=function(e){t.isViewerMouseDown&&t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e),t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault()},this.viewerContainerOnMouseEnter=function(e){t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clear()},this.viewerContainerOnMouseOver=function(e){var i=!!document.documentMode;t.isViewerMouseDown&&(i||e.preventDefault())},this.viewerContainerOnClick=function(e){if("dblclick"===e.type){if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getCurrentTextMarkupAnnotation())t.getCurrentTextMarkupAnnotation();else if(e.target.classList.contains("e-pv-text")){if(t.isViewerContainerDoubleClick=!0,!t.getTextMarkupAnnotationMode()){var i=parseFloat(e.target.id.split("_")[2]);t.pdfViewer.fireTextSelectionStart(i+1)}t.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),"MouseUp"===t.pdfViewer.contextMenuSettings.contextMenuAction&&t.pdfViewer.textSelectionModule.calculateContextMenuPosition(e.clientY,e.clientX),t.getTextMarkupAnnotationMode()?t.isTextMarkupAnnotationModule()&&t.getTextMarkupAnnotationMode()&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.dblClickTimer=setTimeout((function(){t.applySelection()}),100),t.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(t.action&&("Perimeter"===t.action||"Polygon"===t.action)&&t.tool){t.eventArgs.position=t.currentPosition,t.getMouseEventArgs(t.currentPosition,t.eventArgs,e,t.eventArgs.source);t.isMetaKey(e);var n={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};t.eventArgs.info=n,t.eventArgs.clickCount=e.detail,t.tool.mouseUp(t.eventArgs,!0)}if(t.pdfViewer.selectedItems||t.pdfViewer.annotation&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)if(0!==t.pdfViewer.selectedItems.annotations.length){var o=t.pdfViewer.selectedItems.annotations[0];if(t.pdfViewer.annotationModule&&!o.formFieldAnnotationType&&(t.pdfViewer.annotationModule.annotationSelect(o.annotName,o.pageIndex,o,null,!0),!1===t.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus))if(!0===t.isFreeTextAnnotation(t.pdfViewer.selectedItems.annotations)){var a={};a.x=t.pdfViewer.selectedItems.annotations[0].bounds.x,a.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(a,t.pdfViewer.selectedItems.annotations[0])}else if(!0===t.pdfViewer.selectedItems.annotations[0].enableShapeLabel){a={};a.x=t.pdfViewer.selectedItems.annotations[0].bounds.x,a.y=t.pdfViewer.selectedItems.annotations[0].bounds.y,t.pdfViewer.annotation.inputElementModule.editLabel(a,t.pdfViewer.selectedItems.annotations[0])}else{var s=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.pdfViewer.currentPageNumber);s&&s.ej2_instances[0].expandItem(!0);var r=document.getElementById(t.pdfViewer.selectedItems.annotations[0].annotName);r&&(r.classList.contains("e-pv-comments-border")||r.firstChild.click())}}else{var d=t.pdfViewer.annotation,l=t.pdfViewer.annotationModule;if(d&&l.textMarkupAnnotationModule&&l.textMarkupAnnotationModule.currentTextMarkupAnnotation){var p=t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;t.pdfViewer.annotationModule.annotationSelect(p.annotName,t.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,p,null,!0);s=document.getElementById(t.pdfViewer.element.id+"_accordionContainer"+t.currentPageNumber);s&&s.ej2_instances[0].expandItem(!0);var h=document.getElementById(p.annotName);h&&h.firstChild.click()}}if(t.pdfViewer.designerMode&&t.pdfViewer.selectedItems.formFields.length>0){var u={name:"formFieldDoubleClick",field:t.pdfViewer.selectedItems.formFields[0],cancel:!1};t.pdfViewer.fireFormFieldDoubleClickEvent(u),u.cancel||t.pdfViewer.formDesigner.createPropertiesWindow()}}else 3===e.detail&&(t.isViewerContainerDoubleClick&&(clearTimeout(t.dblClickTimer),t.isViewerContainerDoubleClick=!1),!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()||(t.pdfViewer.textSelectionModule.selectEntireLine(e),t.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),t.pdfViewer.textSelectionModule.fireTextSelectEnd(),t.applySelection()))},this.viewerContainerOnDragStart=function(e){var t=!!document.documentMode;t||e.preventDefault()},this.viewerContainerOnContextMenuClick=function(e){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){t.isFreeTextContextMenu=!1,t.isNewStamp=!1,t.signatureAdded=!1;var i=t.pdfViewer.annotationModule;if(i&&i.textMarkupAnnotationModule&&i.textMarkupAnnotationModule.isEnableTextMarkupResizer(i.textMarkupAnnotationModule.currentTextMarkupAddMode)){var n=i.textMarkupAnnotationModule;n.isLeftDropletClicked=!1,n.isDropletClicked=!1,n.isRightDropletClicked=!1,n.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?n.currentTextMarkupAnnotation||""!==n.currentTextMarkupAddMode||(n.isTextMarkupAnnotationMode=!1):n.showHideDropletDiv(!0)}if(!t.getPopupNoteVisibleStatus()){if(0===e.button){if(t.isNewFreeTextAnnotation())if(!t.pdfViewer.textSelectionModule||t.isTextSelectionDisabled||t.getTextMarkupAnnotationMode()){if(t.getTextMarkupAnnotationMode()){var o=t.pdfViewer.element,a=e.target;o&&a&&o.id.split("_")[0]===a.id.split("_")[0]&&t.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(t.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}else{1!==e.detail||t.viewerContainer.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e);var s=e.target;t.viewerContainer.contains(e.target)&&"e-pdfviewer-formFields"!==s.className&&"e-pv-formfield-input"!==s.className&&(t.isClickedOnScrollBar(e,!0)||t.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&t.pdfViewer.textSelectionModule.applySpanForSelection():t.pdfViewer.textSelectionModule.textSelectionOnMouseup(e))}}else 2===e.button&&t.viewerContainer.contains(e.target)&&t.skipPreventDefault(e.target)&&t.checkIsNormalText()&&window.getSelection().removeAllRanges();return!t.isViewerMouseDown||(t.isViewerMouseDown=!1,t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clear(),t.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)}},this.onWindowTouchEnd=function(e){t.signatureAdded=!1,t.pdfViewer.element.contains(e.target)||t.contextMenuModule.contextMenuElement.contains(e.target)||t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&t.pdfViewer.textSelectionModule.clearTextSelection()},this.viewerContainerOnTouchStart=function(e){var i=e.touches;t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(i[0].clientX,i[0].clientY);var o=e.target;if(1===i.length&&!o.classList.contains("e-pv-hyperlink")&&t.skipPreventDefault(o)&&t.preventTouchEvent(e),1===e.touches.length&&t.isTextMarkupAnnotationModule()&&!t.getPopupNoteVisibleStatus()&&(t.isToolbarInkClicked||t.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)),t.touchClientX=i[0].clientX,t.touchClientY=i[0].clientY,t.scrollY=i[0].clientY,t.previousTime=(new Date).getTime(),1===i.length&&!e.target.classList.contains("e-pv-touch-select-drop")&&!e.target.classList.contains("e-pv-touch-ellipse")){n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&t.pageCount>0&&!t.isThumb&&!e.target.classList.contains("e-pv-hyperlink")&&t.handleTaps(i),Object(n["K"])()&&n["c"].isDevice&&!t.pdfViewer.enableDesktopMode||t.handleTextBoxTaps(i);var a=t.isDesignerMode(o);a?(t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.isMoving||(t.isTouchDesignerMode=!0,t.contextMenuModule.open(t.touchClientY,t.touchClientX,t.viewerContainer))}),1e3)),t.isLongTouchPropagated=!0,t.isMoving=!1):t.pdfViewer.textSelectionModule&&!t.isTextSelectionDisabled&&(t.pdfViewer.textSelectionModule.clearTextSelection(),t.contextMenuModule.close(),t.isLongTouchPropagated||(t.longTouchTimer=setTimeout((function(){t.viewerContainerOnLongTouch(e)}),1e3)),t.isLongTouchPropagated=!0)}var s=t.pdfViewer.toolbarModule?t.pdfViewer.toolbarModule.annotationToolbarModule:"null";!o.classList.contains("e-pv-text")||s&&s.textMarkupToolbarElement&&0!==s.textMarkupToolbarElement.children.length||o.classList.add("e-pv-text-selection-none"),t.diagramMouseDown(e),"Perimeter"!==t.action&&"Polygon"!==t.action&&"DrawTool"!==t.action&&"Drag"!==t.action&&-1===t.action.indexOf("Rotate")&&-1===t.action.indexOf("Resize")||e.preventDefault()},this.viewerContainerOnLongTouch=function(e){if(t.touchClientX=e.touches[0].clientX,t.touchClientY=e.touches[0].clientY,e.preventDefault(),t.pdfViewer.textSelectionModule){var i=e.target;i.classList.contains("e-pv-text-selection-none")&&i.classList.remove("e-pv-text-selection-none"),t.pdfViewer.textSelectionModule.initiateTouchSelection(e,t.touchClientX,t.touchClientY),n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0)}},this.viewerContainerOnPointerDown=function(e){"touch"===e.pointerType&&(t.pointerCount++,t.pointerCount<=2&&(e.preventDefault(),t.pointersForTouch.push(e),2===t.pointerCount&&(t.pointerCount=0),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY)))},this.viewerContainerOnTouchMove=function(e){"Drag"===t.action&&(t.isMoving=!0),n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&(clearTimeout(t.singleTapTimer),t.tapCount=0),t.preventTouchEvent(e),t.isToolbarInkClicked&&e.preventDefault();var i,o=e.touches;if(t.pdfViewer.magnificationModule&&(t.isTouchScrolled=!0,o.length>1&&t.pageCount>0?(n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(o[0].clientX,o[0].clientY,o[1].clientX,o[1].clientY)):1===o.length&&t.getPagesPinchZoomed()&&(n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&(t.isTouchScrolled=!1),t.pdfViewer.magnificationModule.pinchMoveScroll())),t.mouseX=o[0].clientX,t.mouseY=o[0].clientY,e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&t.pdfViewer.annotation){var a=t.pdfViewer.annotation.getEventPageNumber(e),s=document.getElementById(t.pdfViewer.element.id+"_annotationCanvas_"+a);if(s){var r=s.getBoundingClientRect(),d=r.x?r.x:r.left,l=r.y?r.y:r.top;i=new u["a"](d+10,l+10,r.width-10,r.height-10)}}i&&i.containsPoint({x:t.mouseX,y:t.mouseY})?(t.diagramMouseMove(e),t.annotationEvent=e):(t.diagramMouseLeave(e),t.isAnnotationDrawn&&(t.diagramMouseUp(e),t.isAnnotationAdded=!0)),o=null},this.viewerContainerOnPointerMove=function(e){if("touch"===e.pointerType&&t.pageCount>0&&(e.preventDefault(),2===t.pointersForTouch.length)){for(var i=0;i<t.pointersForTouch.length;i++)if(e.pointerId===t.pointersForTouch[i].pointerId){t.pointersForTouch[i]=e;break}t.pdfViewer.magnificationModule&&t.pdfViewer.enablePinchZoom&&t.pdfViewer.magnificationModule.initiatePinchMove(t.pointersForTouch[0].clientX,t.pointersForTouch[0].clientY,t.pointersForTouch[1].clientX,t.pointersForTouch[1].clientY)}},this.viewerContainerOnTouchEnd=function(e){if(t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),e.cancelable&&!e.target.classList.contains("e-pv-touch-ellipse")&&t.pdfViewer.textSelectionModule&&t.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),t.isLongTouchPropagated=!1,clearInterval(t.longTouchTimer),t.longTouchTimer=null,n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&t.isTouchScrolled){t.currentTime=(new Date).getTime();var i=t.currentTime-t.previousTime,o=t.scrollY-e.changedTouches[0].pageY,a=o/i;if(Math.abs(a)>1.5){var s=o+i*a;t.viewerContainer.scrollTop+=s,t.updateMobileScrollerPosition()}}t.diagramMouseUp(e),t.renderStampAnnotation(e)},this.viewerContainerOnPointerEnd=function(e){"touch"===e.pointerType&&(e.preventDefault(),t.pdfViewer.magnificationModule&&t.pdfViewer.magnificationModule.pinchMoveEnd(),t.pointersForTouch=[],t.pointerCount=0)},this.viewerContainerOnScroll=function(e){var i=null;i=t;var o=i.pdfViewer.allowServerDataBinding;i.pdfViewer.enableServerDataBinding(!1);var a=0,s=0;if(e.touches&&n["c"].isDevice&&!t.pdfViewer.enableDesktopMode){var r=(t.viewerContainer.scrollHeight-t.viewerContainer.clientHeight)/(t.viewerContainer.clientHeight-t.toolbarHeight);if(t.isThumb){t.ispageMoved=!0,e.preventDefault(),t.mobilePageNoContainer.style.display="block",a=e.touches[0].pageX-t.scrollX,s=e.touches[0].pageY-t.viewerContainer.offsetTop,t.viewerContainer.scrollTop=s*r;var d=e.touches[0].pageY,l=t.pdfViewer.toolbarModule?0:50;0!==t.viewerContainer.scrollTop&&d<=t.viewerContainer.clientHeight-l&&(t.mobileScrollerContainer.style.top=d+"px")}else"e-pv-touch-ellipse"!==e.touches[0].target.className&&(t.isWebkitMobile&&n["c"].isDevice&&!t.pdfViewer.enableDesktopMode||(t.mobilePageNoContainer.style.display="none",s=t.touchClientY-e.touches[0].pageY,a=t.touchClientX-e.touches[0].pageX,t.viewerContainer.scrollTop=t.viewerContainer.scrollTop+s,t.viewerContainer.scrollLeft=t.viewerContainer.scrollLeft+a),t.updateMobileScrollerPosition(),t.touchClientY=e.touches[0].pageY,t.touchClientX=e.touches[0].pageX)}t.scrollHoldTimer&&clearTimeout(t.scrollHoldTimer);var p=t.currentPageNumber;t.scrollHoldTimer=null,t.contextMenuModule.close();for(var h=t.viewerContainer.scrollTop,u=0;u<t.pageCount;u++)if(null!=t.pageSize[u]){var c=t.getPageHeight(u);if(t.pageStopValue=c<150?75:c>=150&&c<300?125:c>=300&&c<500?200:300,h+t.pageStopValue<=t.getPageTop(u)+c){t.currentPageNumber=u+1,t.pdfViewer.currentPageNumber=u+1;break}}t.pdfViewer.magnificationModule&&"fitToPage"===t.pdfViewer.magnificationModule.fitType&&t.currentPageNumber>0&&t.pageSize[t.currentPageNumber-1]&&(t.isPanMode||n["c"].isDevice||!t.pdfViewer.enableDesktopMode||(t.viewerContainer.scrollTop=t.pageSize[t.currentPageNumber-1].top*t.getZoomFactor())),t.renderElementsVirtualScroll(t.currentPageNumber),(t.isViewerMouseDown||t.getPinchZoomed()||t.getPinchScrolled()||t.getPagesPinchZoomed())&&!t.isViewerMouseWheel?t.showPageLoadingIndicator(t.currentPageNumber-1,!1):(t.pageViewScrollChanged(t.currentPageNumber),t.isViewerMouseWheel=!1),t.pdfViewer.toolbarModule&&(Object(n["K"])()||t.pdfViewer.toolbarModule.updateCurrentPage(t.currentPageNumber),t.viewerContainer.setAttribute("aria-labelledby",t.pdfViewer.element.id+"_pageDiv_"+(t.currentPageNumber-1)),Object(n["K"])()||n["c"].isDevice&&!t.pdfViewer.enableDesktopMode||t.pdfViewer.toolbarModule.updateNavigationButtons()),n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&(t.mobileSpanContainer.innerHTML=t.currentPageNumber.toString(),t.mobilecurrentPageContainer.innerHTML=t.currentPageNumber.toString()),p!==t.currentPageNumber&&(!i.pdfViewer.thumbnailViewModule||n["c"].isDevice&&!t.pdfViewer.enableDesktopMode||(i.pdfViewer.thumbnailViewModule.gotoThumbnailImage(i.currentPageNumber-1),i.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),t.pdfViewer.firePageChange(p)),t.pdfViewer.magnificationModule&&(t.isPanMode||n["c"].isDevice||!t.pdfViewer.enableDesktopMode||t.pdfViewer.magnificationModule.updatePagesForFitPage(t.currentPageNumber-1));var f=t.getElement("_pageDiv_"+(t.currentPageNumber-1));if(f&&(f.style.visibility="visible"),t.isViewerMouseDown){t.getRerenderCanvasCreated()&&!t.isPanMode&&t.pdfViewer.magnificationModule.clearIntervalTimer();var g=t.getStoredData(t.currentPageNumber);if(g)t.isDataExits=!0,t.initiatePageViewScrollChanged(),t.isDataExits=!1;else{var m=t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?t.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;t.scrollHoldTimer=setTimeout((function(){t.initiatePageViewScrollChanged()}),m)}}t.pdfViewer.annotation&&t.navigationPane.commentPanelContainer&&t.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(t.currentPageNumber),n["c"].isDevice&&!t.pdfViewer.enableDesktopMode&&e.touches&&"e-pv-touch-ellipse"!==e.touches[0].target.className&&setTimeout((function(){t.updateMobileScrollerPosition()}),500),i.pdfViewer.enableServerDataBinding(o,!0)},this.pdfViewer=e,this.navigationPane=new l["a"](this.pdfViewer,this),this.textLayer=new a["a"](this.pdfViewer,this),this.signatureModule=new s["a"](this.pdfViewer,this),this.isWebkitMobile=/Chrome/.test(navigator.userAgent)||/Google Inc/.test(navigator.vendor)||-1!==navigator.userAgent.indexOf("Safari")}return e.prototype.initializeComponent=function(){var e=document.getElementById(this.pdfViewer.element.id);if(e){this.blazorUIAdaptor=Object(n["K"])()?new b["a"](this.pdfViewer,this):null,n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var t="100%",i=void 0;this.viewerMainContainer=Object(n["K"])()?e.querySelector(".e-pv-viewer-main-container"):Object(n["z"])("div",{id:this.pdfViewer.element.id+"_viewerMainContainer",className:"e-pv-viewer-main-container"}),this.viewerContainer=Object(n["K"])()?e.querySelector(".e-pv-viewer-container"):Object(n["z"])("div",{id:this.pdfViewer.element.id+"_viewerContainer",className:"e-pv-viewer-container",attrs:{"aria-label":"pdfviewer scroll view"}}),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=0,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),e.style.touchAction="pan-x pan-y",this.setMaximumHeight(e),this.mainContainer=Object(n["K"])()?e.querySelector(".e-pv-main-container"):Object(n["z"])("div",{id:this.pdfViewer.element.id+"_mainContainer",className:"e-pv-main-container"}),this.mainContainer.appendChild(this.viewerMainContainer),e.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar(t)):Object(n["K"])()&&(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,i.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(n["c"].isDevice&&this.pdfViewer.enableDesktopMode||!n["c"].isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),this.viewerContainer.style.height=i?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,56):this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var o=this.pdfViewer.element.clientWidth;n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||(o=o-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=o+"px",this.viewerMainContainer.appendChild(this.viewerContainer),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=o-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=o/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_pageViewContainer",className:"e-pv-page-container",attrs:{tabindex:"0","aria-label":"pdfviewer Page View"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&(!n["c"].isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup(),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.createGoToPagePopup();var a=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_loadingIndicator"});if(this.viewerContainer.appendChild(a),Object(C["a"])({target:a,cssClass:"e-spin-center"}),this.setLoaderProperties(a),Object(n["K"])()){this.contextMenuModule=new M["a"](this.pdfViewer,this);var s=document.getElementsByClassName(this.pdfViewer.element.id+"_spinner");s&&s[0]&&!s[0].classList.contains("e-spin-hide")&&(s[0].classList.remove("e-spin-show"),s[0].classList.add("e-spin-hide"))}else this.contextMenuModule=new r["a"](this.pdfViewer,this);this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),!this.pdfViewer.textSearchModule||n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.createTextSearchBox(),this.pdfViewer.documentPath&&(Object(n["K"])()?this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath):this.pdfViewer.load(this.pdfViewer.documentPath,null)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}},e.prototype.createMobilePageNumberContainer=function(){this.mobilePageNoContainer=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this)),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"},e.prototype.initiatePageRender=function(e,t){this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),e=this.checkDocumentData(e),this.setFileName(),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName;var i=this.constructJsonObject(e,t);this.createAjaxRequest(i,e,t)},e.prototype.initiateLoadDocument=function(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null)),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName},e.prototype.loadSuccess=function(e,t){var i=e;if(i){if("object"!==typeof i)try{i=JSON.parse(i)}catch(n){this.onControlError(500,i,this.pdfViewer.serverActionSettings.load),i=null}if(i){while("object"!==typeof i)if(i=JSON.parse(i),"number"===typeof parseInt(i)&&!isNaN(parseInt(i))){i=parseInt(i);break}i.StatusText&&"File Does not Exist"===i.StatusText&&this.showLoadingIndicator(!1),(i.uniqueId===this.documentId||"number"===typeof parseInt(i)&&!isNaN(parseInt(i)))&&(this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,i),this.requestSuccess(i,null,t))}}},e.prototype.mobileScrollContainerDown=function(e){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&n["c"].isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(t),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)},e.prototype.relativePosition=function(e){var t=this.viewerContainer.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top;return{x:i,y:n}},e.prototype.setMaximumHeight=function(e){var t=e.getBoundingClientRect();(!n["c"].isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()},e.prototype.applyViewerHeight=function(e){var t=e.getBoundingClientRect();n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")},e.prototype.updateWidth=function(){"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)},e.prototype.updateHeight=function(){"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)},e.prototype.updateViewerContainer=function(){var e=this.getElement("_sideBarContentContainer");e&&"none"===e.style.display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===e.style.display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize();var t=this.pdfViewer.toolbarModule;t&&(Object(n["K"])()?(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems"):(this.pdfViewer.enableToolbar&&t.toolbar.refreshOverflow(),this.pdfViewer.enableAnnotationToolbar&&t.annotationToolbarModule&&t.annotationToolbarModule.toolbar.refreshOverflow()))},e.prototype.updateViewerContainerSize=function(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()},e.prototype.mobileScrollContainerEnd=function(e){this.ispageMoved||this.goToPagePopup.show(),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"},e.prototype.createAjaxRequest=function(e,t,i){var n=null;n=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new h["a"](this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e["action"]="Load",e["elementId"]=this.pdfViewer.element.id,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(e){var o=e.data;if(o){if("object"!==typeof o)try{o=JSON.parse(o)}catch(a){n.onControlError(500,o,this.pdfViewer.serverActionSettings.load),o=null}if(o){while("object"!==typeof o)if(o=JSON.parse(o),"number"===typeof parseInt(o)&&!isNaN(parseInt(o))){o=parseInt(o);break}(o.uniqueId===n.documentId||"number"===typeof parseInt(o)&&!isNaN(parseInt(o)))&&(n.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,o),n.requestSuccess(o,t,i))}}else n.showLoadingIndicator(!1)},this.loadRequestHandler.onFailure=function(e){var t=e.status.toString().split("")[0];"4"===t?n.openNotificationPopup("Client error"):n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(e){n.openNotificationPopup(),n.showLoadingIndicator(!1),n.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,n.pdfViewer.serverActionSettings.load)})},e.prototype.openNotificationPopup=function(e){var t=this;if(this.pdfViewer.showNotificationDialog){if("Client error"===e)if(Object(n["K"])()){var i=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror");i.then((function(e){t.textLayer.createNotificationPopup(e)}))}else this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Client error"));else if(Object(n["K"])()){i=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror");i.then((function(e){t.textLayer.createNotificationPopup(e)}))}else this.textLayer.createNotificationPopup(this.pdfViewer.localeObj.getConstant("Server error"));this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content")}},e.prototype.showNotificationPopup=function(e){this.pdfViewer.showNotificationDialog||""===e||(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))},e.prototype.requestSuccess=function(e,t,i){if(e&&void 0!==e.pageCount){Object(n["K"])()&&this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),i&&""!=i&&(this.passwordData=i),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.pageRender(e);var o={pageCount:e.pageCount,pageSizes:e.pageSizes};if(window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify(o)),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display="";var a=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=a+"px"}this.restrictionList=e.RestrictionSummary,this.RestrictionEnabled(this.restrictionList,!1)}else this.pageCount=0,this.currentPageNumber=0,n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none"),4===e?Object(n["K"])()||this.renderPasswordPopup(t,i):3===e&&(Object(n["K"])()||this.renderCorruptPopup()),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateToolbarItems();var s=this.pdfViewer.annotationModule;s&&s.textMarkupAnnotationModule&&s.textMarkupAnnotationModule.isEnableTextMarkupResizer(s.textMarkupAnnotationModule.currentTextMarkupAddMode)&&s.textMarkupAnnotationModule.createAnnotationSelectElement()},e.prototype.RestrictionEnabled=function(e,t){if(e)for(var i=0;i<e.length;i++)this.EnableRestriction(e[i],t),Object(n["K"])()?this.pdfViewer.toolbarModule&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RestrictToolbarItems",e,t):this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.DisableToolbarItems(e[i],t)},e.prototype.EnableRestriction=function(e,t){switch(e){case"Print":this.pdfViewer.enablePrint=t;break;case"CopyContent":this.pdfViewer.enableTextSelection=t;break;case"FillFields":this.pdfViewer.enableFormFields=t,this.enableFormFieldButton(t);break;case"EditAnnotations":this.pdfViewer.enableAnnotation=t;break}},e.prototype.pageRender=function(e){this.document=null,this.passwordDialogReset(),this.passwordPopup&&this.passwordPopup.hide();var t=0;this.initPageDiv(e),this.currentPageNumber=t+1,this.pdfViewer.currentPageNumber=t+1,this.previousZoomValue=this.pdfViewer.zoomValue;var i=!1;this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(i=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.isDocumentLoaded=!0;var o=816;o=parseInt(o);this.pageSize[t].width;if(-1===this.renderedPagesList.indexOf(t)&&!i){this.createRequestForRender(t);var a=t+1;if(a<this.pageCount&&(this.createRequestForRender(a),a+=1),this.pageSize[a]){var s=this.getPageTop(a),r=this.viewerContainer.clientHeight;while(r>s){if(!this.pageSize[a])break;this.renderPageElement(a),this.createRequestForRender(a),s=this.getPageTop(a),a+=1}}}this.showLoadingIndicator(!1),Object(n["K"])()||this.pdfViewer.toolbarModule&&(this.pdfViewer.toolbarModule.uploadedDocumentName=null,this.pdfViewer.toolbarModule.updateCurrentPage(this.currentPageNumber),this.pdfViewer.toolbarModule.updateToolbarItems(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationAddTools(!0),this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1))),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())},e.prototype.renderPasswordPopup=function(e,t){var i=this;if(Object(n["K"])()){var o=document.getElementById(this.pdfViewer.element.id+"_prompt"),a=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword");a.then((function(e){o.textContent=e}));var s=document.querySelector("#"+this.pdfViewer.element.id+"_password_input");if(s.addEventListener("keyup",(function(){""===s.value&&i.passwordDialogReset()})),s.addEventListener("focus",(function(){s.parentElement.classList.add("e-input-focus")})),s.addEventListener("blur",(function(){s.parentElement.classList.remove("e-input-focus")})),this.isPasswordAvailable){this.pdfViewer.fireDocumentLoadFailed(!0,t),o.classList.add("e-pv-password-error");var r=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword");r.then((function(e){o.textContent=e})),o.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e}else this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null);this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog")}else this.isPasswordAvailable?(this.pdfViewer.fireDocumentLoadFailed(!0,t),this.promptElement.classList.add("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Invalid Password"),this.promptElement.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.passwordPopup.show()):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.createPasswordPopup(),this.pdfViewer.fireDocumentLoadFailed(!0,null),this.passwordPopup.show())},e.prototype.renderCorruptPopup=function(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&(Object(n["K"])()?this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog"):(this.createCorruptedPopup(),this.corruptPopup.show()))},e.prototype.constructJsonObject=function(e,t){var i;return t?(this.isPasswordAvailable=!0,this.passwordData=t,i={document:e,password:t,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId}):(this.isPasswordAvailable=!1,this.passwordData="",i={document:e,zoomFactor:"1",isFileName:this.isFileName.toString(),uniqueId:this.documentId}),i},e.prototype.checkDocumentData=function(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t},e.prototype.setFileName=function(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="undefined.pdf",this.jsonDocumentId=null))},e.prototype.saveDocumentInfo=function(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)},e.prototype.saveDocumentHashData=function(){var e="";e=n["c"].isIE||"edge"===n["c"].info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem("hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())},e.prototype.saveFormfieldsData=function(e){if(this.pdfViewer.isFormFieldDocument=!1,this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0){if(this.formfieldvalue)this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null;else if(this.pdfViewer.formFieldsModule){for(var t=0;t<e.PdfRenderedFormFields.length;t++)""==e.PdfRenderedFormFields[t].FieldName&&e.PdfRenderedFormFields.splice(t,1);this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields")}this.pdfViewer.enableFormFields&&this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.formFieldCollections(),this.pdfViewer.formFieldCollections.length>0&&(this.pdfViewer.isFormFieldDocument=!0,this.enableFormFieldButton(!0))}},e.prototype.enableFormFieldButton=function(e){e&&(this.pdfViewer.isFormFieldDocument=!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.submitItem&&this.pdfViewer.toolbarModule.toolbar.enableItems(this.pdfViewer.toolbarModule.submitItem.parentElement,e)},e.prototype.updateWaitingPopup=function(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}},e.prototype.getActivePage=function(e){return this.activeElements&&!Object(n["L"])(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1},e.prototype.createWaitingPopup=function(e){var t=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);t&&(Object(C["a"])({target:t}),this.setLoaderProperties(t))},e.prototype.showLoadingIndicator=function(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",Object(C["c"])(t)):(t.style.display="none",Object(C["b"])(t)))},e.prototype.showPageLoadingIndicator=function(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?Object(C["c"])(i):Object(C["b"])(i),this.updateWaitingPopup(e))},e.prototype.showPrintLoadingIndicator=function(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",Object(C["c"])(t)):(this.printMainContainer.style.display="none",Object(C["b"])(t)))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")},e.prototype.updateScrollTop=function(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout((function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.toolbarModule&&t.pdfViewer.toolbarModule.updateCurrentPage(i))}),100))},e.prototype.getZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1},e.prototype.getPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed},e.prototype.getMagnified=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified},e.prototype.getPinchScrolled=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled},e.prototype.getPagesPinchZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed},e.prototype.getPagesZoomed=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed},e.prototype.getRerenderCanvasCreated=function(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){this.pageCount>0&&this.createRequestForDownload()},e.prototype.saveAsBlob=function(){var e=this;return this.pageCount>0?new Promise((function(t,i){e.saveAsBlobRequest().then((function(e){t(e)}))})):null},e.prototype.saveAsBlobRequest=function(){var e=this,t=null;t=this;var i=new Promise((function(i,n){var o=t.constructJsonDownload();e.dowonloadRequestHandler=new h["a"](e.pdfViewer),e.dowonloadRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.download,e.dowonloadRequestHandler.responseType="text",e.dowonloadRequestHandler.send(o),e.dowonloadRequestHandler.onSuccess=function(e){var n=e.data;if(n&&("object"===typeof n&&(n=JSON.parse(n)),"object"!==typeof n&&-1===n.indexOf("data:application/pdf")&&(t.onControlError(500,n,t.pdfViewer.serverActionSettings.download),n=null),n)){t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.download,n);var o=t.createBlobUrl(n.split("base64,")[1],"application/pdf");i(o)}},e.dowonloadRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.download)},e.dowonloadRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.download)}}));return i},e.prototype.clear=function(e){var t=this,i=t.pdfViewer,o=i.printModule,a=i.textSearchModule,s=i.bookmarkViewModule,r=i.thumbnailView,d=i.annotation,l=i.magnificationModule,p=i.textSelectionModule,h=i.formFieldsModule,u=t.signatureModule;if(t.isPasswordAvailable=!1,t.isDocumentLoaded=!1,t.isInitialLoaded=!1,t.isImportAction=!1,t.annotationPageList=[],t.annotationComments=null,i.annotationCollection=[],i.signatureCollection=[],i.formFieldCollection=[],t.isAnnotationCollectionRemoved=!1,t.documentAnnotationCollections=null,t.isDrawnCompletely=!1,t.annotationRenderredList=[],t.isImportAction=!1,t.isImportedAnnotation=!1,t.importedAnnotation=[],t.isStorageExceed=!1,t.annotationStorage={},t.formFieldStorage={},t.downloadCollections={},t.annotationEvent=null,t.highestWidth=0,t.highestHeight=0,t.requestLists=[],t.tilerequestLists=[],t.isToolbarInkClicked=!1,i.formFieldCollections=[],t.passwordData="",t.isFocusField=!1,t.focusField=[],t.updateDocumentEditedProperty(!1),i.formDesignerModule&&(i.formDesignerModule.formFieldIndex=0,t.activeElements&&i.clearSelection(t.activeElements.activePageID),i.zIndexTable=[]),t.initiateTextSelectMode(),t.RestrictionEnabled(t.restrictionList,!0),t.restrictionList=null,n["c"].isDevice&&!i.enableDesktopMode||t.navigationPane.sideBarToolbar&&t.navigationPane.clear(),(!Object(n["K"])()&&n["c"].isDevice||!i.enableDesktopMode)&&t.navigationPane.clear(),r&&r.clear(),s&&s.clear(),l&&(l.isMagnified=!1,l.clearIntervalTimer()),p&&p.clearTextSelection(),a&&a.resetTextSearch(),d&&(d.clear(),d.initializeCollection()),h&&(h.readOnlyCollection=[],h.signatureFieldCollection=[],h.currentTarget=null),u&&(u.signaturecollection=[],u.outputcollection=[]),t.pageSize&&(t.pageSize=[]),t.renderedPagesList&&(t.renderedPagesList=[]),t.pageContainer)while(t.pageContainer.hasChildNodes())t.pageContainer.removeChild(t.pageContainer.lastChild);t.pageCount>0&&(t.unloadDocument(t),t.textLayer.characterBound=new Array,t.loadRequestHandler&&t.loadRequestHandler.clear(),t.virtualLoadRequestHandler&&t.virtualLoadRequestHandler.clear(),t.pageRequestHandler&&t.pageRequestHandler.clear(),t.dowonloadRequestHandler&&t.dowonloadRequestHandler.clear(),t.importAnnotationRequestHandler&&t.importAnnotationRequestHandler.clear(),t.exportAnnotationRequestHandler&&t.exportAnnotationRequestHandler.clear(),t.importFormFieldsRequestHandler&&t.importFormFieldsRequestHandler.clear(),t.exportFormFieldsRequestHandler&&t.exportFormFieldsRequestHandler.clear(),o&&o.printRequestHandler&&o.printRequestHandler.clear()),t.windowSessionStorageClear(),t.pinchZoomStorage&&(t.pinchZoomStorage=[]),!t.previousZoomValue&&0!==t.previousZoomValue||t.previousZoomValue===i.zoomValue||(i.zoomValue=t.previousZoomValue),e&&t.pageCount>0&&i.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null},e.prototype.destroy=function(){if(n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.pageContainer.parentNode&&this.pageContainer.parentNode.removeChild(this.pageContainer),this.viewerContainer.parentNode&&this.viewerContainer.parentNode.removeChild(this.viewerContainer),this.contextMenuModule){var e=this.contextMenuModule.contextMenuElement;e&&e.ej2_instances&&e.ej2_instances.length>0&&this.contextMenuModule.destroy()}this.pdfViewer.toolbarModule&&this.navigationPane.destroy();var t=document.getElementById("measureElement");t&&(t=void 0)},e.prototype.unloadDocument=function(e){var t="";t=n["c"].isIE||"edge"===n["c"].info.name?decodeURI(window.sessionStorage.getItem("hashId")):window.sessionStorage.getItem("hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var o={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},a=window.sessionStorage.getItem("unload");if(window.sessionStorage.getItem("serviceURL")&&"undefined"!==window.sessionStorage.getItem("serviceURL"))try{var s="keepalive"in new Request("");if(s){var r=this.setUnloadRequestHeaders(),d=this.pdfViewer.ajaxRequestSettings.withCredentials?"include":"omit";fetch(window.sessionStorage.getItem("serviceURL")+"/"+a,{method:"POST",credentials:d,headers:r,body:JSON.stringify(o)})}}catch(l){this.unloadRequestHandler=new h["a"](this.pdfViewer),this.unloadRequestHandler.send(o)}else Object(n["K"])()&&this.clearCache(a,o,e)}this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],window.sessionStorage.removeItem("hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId&&(window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"))},e.prototype.clearCache=function(e,t,i){this.unloadRequestHandler=new h["a"](this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(t){var n=t.data;n&&("object"!==typeof n&&-1===n.indexOf("Document")&&(i.onControlError(500,n,e),n=null),n&&i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.unload,n))},this.unloadRequestHandler.onFailure=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)},this.unloadRequestHandler.onError=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)}},e.prototype.setUnloadRequestHeaders=function(){var e=new Headers;e.append("Content-Type","application/json;charset=UTF-8");for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.append(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue);return e},e.prototype.windowSessionStorageClear=function(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[e])},e.prototype.updateCommentPanel=function(){for(var e=document.querySelectorAll("#"+this.pdfViewer.element.id+"_more-options"),t=0;t<e.length;t++)e[t].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-new-comments-div"),n=0;n<i.length;n++)i[n].style.display="none";var o=document.querySelectorAll(".e-pv-comments-border");for(n=0;n<o.length;n++)o[n].classList.remove("e-pv-comments-border");var a=document.querySelectorAll(".e-editable-inline");for(n=0;n<a.length;n++)a[n].style.display="none";for(var s=document.querySelectorAll(".e-pv-comments-select"),r=0;r<s.length;r++)s[r].classList.remove("e-pv-comments-select");var d=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<d.length;n++)d[n].style.minHeight="60px"},e.prototype.focusViewerContainer=function(e){var t=window.scrollX,i=window.scrollY,n=this.getScrollParent(this.viewerContainer),o=0,a=0;null!==n&&(o=n.scrollLeft,a=n.scrollTop),this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.element.id+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&this.updateCommentPanel(),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==n?(n.scrollLeft=o,n.scrollTop=a):null!==n&&n.scrollTo(o,a),window.scrollTo(t,i)},e.prototype.getScrollParent=function(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e},e.prototype.createCorruptedPopup=function(){var e=this,t=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_corrupted_popup",className:"e-pv-corrupted-popup"});this.pageContainer.appendChild(t),this.corruptPopup=new o["a"]({showCloseIcon:!0,closeOnEscape:!0,isModal:!0,header:'<div class="e-pv-corrupted-popup-header"> '+this.pdfViewer.localeObj.getConstant("File Corrupted")+"</div>",visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.closeCorruptPopup.bind(this)}],target:this.pdfViewer.element,beforeClose:function(){e.corruptPopup.destroy(),e.getElement("_corrupted_popup").remove(),e.corruptPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&Object(C["b"])(t)}}),this.pdfViewer.enableRtl?(this.corruptPopup.content='<div id="templatertl" class="e-pv-notification-icon-rtl"> <div class="e-pv-corrupted-popup-content-rtl" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.enableRtl=!0):this.corruptPopup.content='<div id="template" class="e-pv-notification-icon"> <div class="e-pv-corrupted-popup-content" tabindex="0">'+this.pdfViewer.localeObj.getConstant("File Corrupted Content")+"</div></div>",this.corruptPopup.appendTo(t)},e.prototype.hideLoadingIndicator=function(){var e=this.getElement("_loadingIndicator");null!==e&&Object(C["b"])(e)},e.prototype.closeCorruptPopup=function(){this.corruptPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Object(C["b"])(e)},e.prototype.createPrintPopup=function(){var e=document.getElementById(this.pdfViewer.element.id);this.printMainContainer=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),Object(C["a"])({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)},e.prototype.createGoToPagePopup=function(){var e=this,t=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),t.appendChild(this.goToPageElement);var i=Object(n["z"])("span",{className:"e-pv-text-input"});if(this.goToPageInput=Object(n["z"])("input",{id:this.pdfViewer.element.id+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=Object(n["z"])("span",{className:".e-pv-number-ofpages"}),i.appendChild(this.goToPageInput),i.appendChild(this.pageNoContainer),t.appendChild(i),this.pageContainer.appendChild(t),this.goToPagePopup=new o["a"]({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.pdfViewer.enableRtl&&(this.goToPagePopup.enableRtl=!0),this.goToPagePopup.appendTo(t),!Object(n["K"])()){var a=new p["a"]({format:"##",showSpinButton:!1});a.appendTo(this.goToPageInput)}this.goToPageInput.addEventListener("keyup",(function(){var t=e.goToPageInput.value;""!==t&&parseFloat(t)>0&&e.pdfViewer.pageCount+1>parseFloat(t)?e.EnableApplyButton():e.DisableApplyButton()}))},e.prototype.closeGoToPagePopUp=function(){this.goToPageInput.value="",this.DisableApplyButton()},e.prototype.EnableApplyButton=function(){var e=document.getElementsByClassName("e-pv-gotopage-apply-btn")[0];e.removeAttribute("disabled")},e.prototype.DisableApplyButton=function(){var e=document.getElementsByClassName("e-pv-gotopage-apply-btn")[0];e.setAttribute("disabled",!0)},e.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},e.prototype.GoToPageApplyClick=function(){this.goToPagePopup.hide();var e=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(e),this.updateMobileScrollerPosition()},e.prototype.updateMobileScrollerPosition=function(){if(n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){var e=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56),t=this.viewerContainer.scrollTop/e,i=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=i+t+"px"}},e.prototype.createPasswordPopup=function(){var e=this,t=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=Object(n["z"])("span",{id:this.pdfViewer.element.id+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=Object(n["z"])("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=Object(n["z"])("input",{id:this.pdfViewer.element.id+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new o["a"]({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&Object(C["b"])(t)}}),!n["c"].isDevice||this.pdfViewer.enableDesktopMode?this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("keyup",(function(){""===e.passwordInput.value&&e.passwordDialogReset()})),this.passwordInput.addEventListener("focus",(function(){e.passwordInput.parentElement.classList.add("e-input-focus")})),this.passwordInput.addEventListener("blur",(function(){e.passwordInput.parentElement.classList.remove("e-input-focus")}))},e.prototype.passwordCancel=function(e){e.isInteraction&&(this.clear(!1),this.passwordDialogReset(),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&Object(C["b"])(t)},e.prototype.passwordCancelClick=function(){this.clear(!1),this.passwordDialogReset(),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Object(C["b"])(e)},e.prototype.passwordDialogReset=function(){Object(n["K"])()||this.promptElement&&(this.promptElement.classList.remove("e-pv-password-error"),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),this.passwordInput.value="")},e.prototype.applyPassword=function(){if(!Object(n["K"])()){var e=this.passwordInput.value;""!==e&&this.pdfViewer.load(this.document,e)}this.focusViewerContainer()},e.prototype.createFileInputElement=function(){!n["c"].isDevice&&this.pdfViewer.enableDesktopMode||(this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement())},e.prototype.wireEvents=function(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.unloadDocument(e)},window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.unWireEvents=function(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))},e.prototype.updateZoomValue=function(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToPage());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)},e.prototype.updateFreeTextProperties=function(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))},e.prototype.mouseDownHandler=function(e){var t,i=!1,o=[],a=[];if(e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(i=this.pdfViewer.annotationModule.isEnableDelete()),i||a.push("DeleteContext"),"None"===this.pdfViewer.contextMenuOption)t=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var s=this.isClickWithinSelectionBounds(e);this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(a.push("Cut"),a.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&a.push("Paste"),o.push("HighlightContext"),o.push("UnderlineContext"),o.push("StrikethroughContext"),o.push("ScaleRatio"),o.push("Properties"),o.push("Comment"),o.push("DeleteContext")):s&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(t=!0):(n["c"].isIE||"edge"===n["c"].info.name)&&e.target.classList.contains("e-pv-page-container")&&(t=!0),o.push("Cut"),o.push("Paste"),o.push("DeleteContext"),o.push("ScaleRatio"),o.push("Comment"),o.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(o,a,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(o.push("Properties"),this.shapeMenuItems(o,a,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode?(o.push("HighlightContext"),o.push("UnderlineContext"),o.push("StrikethroughContext"),o.push("Properties"),a.push("Cut"),a.push("Copy"),a.push("Paste"),a.push("DeleteContext"),a.push("Comment")):this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(o.push("HighlightContext"),o.push("UnderlineContext"),o.push("StrikethroughContext"),o.push("Properties"),o.push("Cut"),o.push("Copy"),o.push("Paste"),o.push("ScaleRatio")):t=!0:this.shapeMenuItems(o,a,!1,!0)}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(o.push("Cut"),o.push("Paste"),o.push("DeleteContext"),o.push("ScaleRatio"),o.push("Comment"),o.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(o.push("Cut"),o.push("Paste"),o.push("DeleteContext"),o.push("ScaleRatio"),o.push("Properties"));this.pdfViewer.enableCommentPanel||a.push("Comment")}else t=!0;var r={hidenItems:o,disabledItems:a,isCancel:t};this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",r)},e.prototype.OnItemSelected=function(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected();break;default:break}},e.prototype.CommentItemSelected=function(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanel(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e=void 0;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+this.pdfViewer.currentPageNumber);t&&t.ej2_instances[0].expandItem(!0);var i=document.getElementById(e.annotName);i&&(i.classList.contains("e-pv-comments-border")||i.firstChild.click())}},e.prototype.ScaleRatioSelected=function(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()},e.prototype.DeleteItemSelected=function(){this.pdfViewer.formDesignerModule&&0!==this.pdfViewer.selectedItems.formFields.length?this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id):this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()},e.prototype.pasteItemSelected=function(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste")},e.prototype.CutItemSelected=function(e){if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName)this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close();else if(1===this.pdfViewer.selectedItems.annotations.length){this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut"}else 1===this.pdfViewer.selectedItems.formFields.length&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")},e.prototype.CopyItemSelected=function(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")},e.prototype.PropertiesItemSelected=function(){0===this.pdfViewer.selectedItems.annotations.length||"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.formDesigner.createPropertiesWindow():this.pdfViewer.annotation.createPropertiesWindow()},e.prototype.TextMarkUpSelected=function(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)},e.prototype.shapeMenuItems=function(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("HighlightContext"),e.push("UnderlineContext"),e.push("StrikethroughContext"),e.push("ScaleRatio"),i?"Line"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"LineWidthArrowHead"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Distance"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&e.push("Properties"):n?(e.push("Properties"),e.push("Comment")):(e.push("Cut"),e.push("Copy"),e.push("DeleteContext"),e.push("Comment"))},e.prototype.checkIsRtlText=function(e){var t="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF",i="\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC",n=new RegExp("^[^"+t+"]*["+i+"]");return n.test(e)},e.prototype.isClickWithinSelectionBounds=function(e){var t=!1;if(this.pdfViewer.textSelectionModule){var i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(i){var o=i;this.getHorizontalValue(o.left)<e.clientX&&this.getHorizontalValue(o.right)>e.clientX&&this.getVerticalValue(o.top)<e.clientY&&this.getVerticalValue(o.bottom)>e.clientY&&(t=!0)}(n["c"].isIE||"edge"===n["c"].info.name)&&i&&(t=!0)}return t},e.prototype.getHorizontalClientValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)),i=t.getBoundingClientRect();return e-i.left},e.prototype.getVerticalClientValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)),i=t.getBoundingClientRect();return e-i.top},e.prototype.getHorizontalValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)),i=t.getBoundingClientRect();return e*this.getZoomFactor()+i.left},e.prototype.getVerticalValue=function(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)),i=t.getBoundingClientRect();return e*this.getZoomFactor()+i.top},e.prototype.checkIsNormalText=function(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e},e.prototype.DeleteKeyPressed=function(e){if(this.pdfViewer.formDesignerModule&&this.pdfViewer.designerMode&&0!==this.pdfViewer.selectedItems.formFields.length)this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);else if(this.pdfViewer.annotation&&!this.pdfViewer.designerMode&&(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var t=this.pdfViewer.selectedItems.annotations[0],i=!0,n=t.shapeAnnotationType;if("Path"===n||"SignatureField"===t.formFieldAnnotationType||"InitialField"===t.formFieldAnnotationType||"HandWrittenSignature"===n||"SignatureText"===n||"SignatureImage"===n){var o=document.getElementById(t.id);o&&o.disabled&&(i=!0)}i||(t.annotationSettings&&t.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",t)&&(this.pdfViewer.remove(t),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(t),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}},e.prototype.initiatePanning=function(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItems()},e.prototype.initiateTextSelectMode=function(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||Object(n["K"])()||this.enableAnnotationAddTools(!0))},e.prototype.initiateTextSelection=function(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))},e.prototype.enableAnnotationAddTools=function(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(e)},e.prototype.applySelection=function(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1},e.prototype.isDesignerMode=function(e){var t=!1;return 0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?(0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.designerMode||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation||this.pdfViewer.formDesigner&&this.pdfViewer.formDesigner.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text")))&&(t=!0):t=!0,this.designerModetarget=e,t},e.prototype.handleTaps=function(e){var t=this;this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(e)):(this.singleTapTimer=setTimeout((function(){t.onSingleTap(e)}),300),this.tapCount++)},e.prototype.handleTextBoxTaps=function(e){var t=this;setTimeout((function(){t.inputTapCount=0}),300),this.inputTapCount++;setTimeout((function(){t.onTextBoxDoubleTap(e)}),200);this.inputTapCount>2&&(this.inputTapCount=0)},e.prototype.onTextBoxDoubleTap=function(e){e[0].target;if(2===this.inputTapCount&&0!==this.pdfViewer.selectedItems.annotations.length){if(this.pdfViewer.annotationModule){var t=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.annotationModule.annotationSelect(t.annotName,t.pageIndex,t,null,!0)}if(!0===this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations)){var i={};i.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,i.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(i,this.pdfViewer.selectedItems.annotations[0])}else if(!0===this.pdfViewer.selectedItems.annotations[0].enableShapeLabel){i={};i.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,i.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(i,this.pdfViewer.selectedItems.annotations[0])}}},e.prototype.onSingleTap=function(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(this.isTapHidden)Object(n["K"])()&&(this.viewerContainer.scrollTop+=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor());else if(Object(n["K"])()&&(this.viewerContainer.scrollTop-=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar").clientHeight*this.getZoomFactor()),this.pdfViewer.toolbar.moreDropDown){var o=this.getElement("_more_option-popup");o.firstElementChild&&(o.classList.remove("e-popup-open"),o.classList.add("e-popup-close"),o.removeChild(o.firstElementChild))}this.isTapHidden&&n["c"].isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()&&(Object(n["K"])()?this.blazorUIAdaptor.tapOnMobileDevice(this.isTapHidden):this.pdfViewer.enableToolbar&&this.pdfViewer.toolbarModule.showToolbar(!0),this.isTapHidden=!this.isTapHidden)}this.tapCount=0}},e.prototype.onDoubleTap=function(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),2!==this.tapCount||i||(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString())&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer)))},e.prototype.preventTouchEvent=function(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||null!=this.getSelectTextMarkupCurrentPage()||this.isWebkitMobile&&n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))},e.prototype.renderStampAnnotation=function(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),o=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var a=this.pdfViewer.annotationModule.stampAnnotationModule;if(a&&a.isStampAnnotSelected&&o){var s=o.getBoundingClientRect();if(n["c"].isDevice&&"touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var r=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;r.pageIndex=i,r.bounds.x=(e.changedTouches[0].clientX-s.left)/t,r.bounds.y=(e.changedTouches[0].clientY-s.top)/t,a.updateDeleteItems(i,r,r.opacity),this.pdfViewer.add(r)}else a.renderStamp((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t,null,null,i,null,null,null,null);a.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&o){s=o.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t),this.isSignatureAdded=!1}1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}},e.prototype.initPageDiv=function(e){if(Object(n["K"])()||this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateTotalPage(),n["c"].isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")"),this.pageCount>0){var t=0,i=0;this.isMixedSizeDocument=!1,this.pageCount>100?(i=100,this.pageLimit=i):i=this.pageCount;for(var o=!1,a=!1,s=!1,r=0;r<i;r++){if("object"!==typeof e.pageSizes[r]){var d=e.pageSizes[r].split(",");if(null!==e.pageSizes[r-1]&&0!==r){var l=e.pageSizes[r-1].split(",");t=this.pageGap+parseFloat(l[1])+t}else t=this.pageGap;var p={width:parseFloat(d[0]),height:parseFloat(d[1]),top:t};this.pageSize.push(p)}else{if(null!==e.pageSizes[r-1]&&0!==r){l=e.pageSizes[r-1];t=this.pageGap+parseFloat(l.Height)+t}else t=this.pageGap;p={width:e.pageSizes[r].Width,height:e.pageSizes[r].Height,top:t};this.pageSize.push(p)}this.pageSize[r].height>this.pageSize[r].width&&(o=!0),this.pageSize[r].width>this.pageSize[r].height&&(a=!0),r>0&&this.pageSize[r].width!==this.pageSize[r-1].width&&(s=!0);var h=this.pageSize[r].width;h>this.highestWidth&&(this.highestWidth=h);var u=this.pageSize[r].height;u>this.highestHeight&&(this.highestHeight=u)}(o&&a||s)&&(this.isMixedSizeDocument=!0);var c=this.pageCount<10?this.pageCount:10;for(r=0;r<c;r++)this.renderPageContainer(r,this.getPageWidth(r),this.getPageHeight(r),this.getPageTop(r));if(this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit){var f=this.getElement("_pageDiv_"+this.pageLimit);null===f&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}}},e.prototype.renderElementsVirtualScroll=function(e){var t=1;this.pageStopValue<=200?t=4:t=2;var i=e+t;i>this.pageCount&&(i=this.pageCount);for(var o=e-1;o<=i;o++)-1!==o&&this.renderPageElement(o);var a=e-3;a<0&&(a=0);for(o=e-1;o>=a;o--)-1!==o&&this.renderPageElement(o);for(var s=0;s<this.pageCount;s++)if(!(a<=s&&s<=i)){var r=this.getElement("_pageDiv_"+s),d=this.getElement("_pageCanvas_"+s),l=this.getElement("_textLayer_"+s);if(d){d.parentNode.removeChild(d),l&&(this.pdfViewer.textSelectionModule&&0!==l.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(s,!0),l.parentNode.removeChild(l));var p=this.renderedPagesList.indexOf(s);-1!==p&&this.renderedPagesList.splice(p,1)}if(r){r.parentNode.removeChild(r);p=this.renderedPagesList.indexOf(s);-1!==p&&this.renderedPagesList.splice(p,1)}}Object(n["K"])()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCurrentPageNumber",this.currentPageNumber)},e.prototype.renderPageElement=function(e){var t=this.getElement("_pageDiv_"+e),i=this.getElement("_pageCanvas_"+e);null==i&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))},e.prototype.renderPagesVirtually=function(){return y(this,void 0,void 0,(function(){var e,t=this;return x(this,(function(i){return e=this,setTimeout((function(){t.initiateRenderPagesVirtually(e)}),500),[2]}))}))},e.prototype.initiateRenderPagesVirtually=function(e){var t={hashId:e.hashId,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new h["a"](this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(t){var i=t.data;if(i&&"object"!==typeof i)try{i=JSON.parse(i)}catch(h){e.onControlError(500,i,"VirtualLoad")}if(i){while("object"!==typeof i)i=JSON.parse(i);if(e.documentId===i.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",i);var n=i;if(e.pageSize[e.pageLimit-1]){for(var o=e.pageSize[e.pageLimit-1].top,a=e.pageLimit;a<e.pageCount;a++)if("object"!==typeof n.pageSizes[a]){var s=n.pageSizes[a].split(",");if(null!==e.pageSize[a-1]&&0!==a){var r=e.pageSize[a-1].height;o=e.pageGap+parseFloat(r)+o}var d={width:parseFloat(s[0]),height:parseFloat(s[1]),top:o};e.pageSize.push(d)}else{if(null!==e.pageSize[a-1]&&0!==a){r=e.pageSize[a-1].height;o=e.pageGap+parseFloat(r)+o}d={width:parseFloat(n.pageSizes[a].Width),height:parseFloat(n.pageSizes[a].Height),top:o};e.pageSize.push(d)}e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var l=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){e.pdfViewer.fireDocumentLoad(l);var p=e.pdfViewer.linkAnnotationModule;p&&p.linkAnnotation&&p.linkAnnotation.length>0&&p.linkPage.length>0&&p.renderDocumentLink(p.linkAnnotation,p.linkPage,p.annotationY,e.currentPageNumber-1)}}}}},this.virtualLoadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)},this.virtualLoadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)}},e.prototype.tileRenderPage=function(e,t){var i=this,o=null;if(o=this,e&&this.pageSize[t]){var a=this.getPageWidth(t),s=this.getPageHeight(t),r=this.getElement("_pageCanvas_"+t),d=this.getElement("_pageDiv_"+t),l=e.tileX?e.tileX:0,p=e.tileY?e.tileY:0;d&&(d.style.width=a+"px",d.style.height=s+"px",d.style.background="#fff",d.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?d.style.right=this.updateLeftPosition(t)+"px":d.style.left=this.updateLeftPosition(t)+"px"),r&&(r.style.background="#fff");var h=e["image"],u=this.retrieveCurrentZoomFactor();if(this.isReRenderRequired){e.zoomFactor&&(u=e.zoomFactor);var c=this.documentId+"_"+t+"_"+u+"_"+e.tileX+"_"+e.tileY;this.tilerequestLists.push(c);var f=e["transformationMatrix"],g=e["width"];if(h){var m=e.tileX?e.tileX:0,w=e.tileY?e.tileY:0,v=Object(n["L"])(e.scaleFactor)?1.5:e.scaleFactor,V=document.getElementById(this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+m+"_"+w);V||(V=new Image,V.id=this.pdfViewer.element.id+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+m+"_"+w,d&&d.append(V)),V.src=h,V.onload=function(){if(o.showPageLoadingIndicator(t,!1),o.tileRenderCount=o.tileRenderCount+1,0===m&&0===w&&0===t&&i.isDocumentLoaded){o.renderPDFInformations(),o.isInitialLoaded=!0;var e=window.sessionStorage.getItem(o.documentId+"_pagedata");o.pageCount<=100&&o.pdfViewer.fireDocumentLoad(e),o.isDocumentLoaded=!1,o.pdfViewer.textSearch&&o.pdfViewer.isExtractText&&o.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(o.tileRenderCount===o.tileRequestCount){o.isTextMarkupAnnotationModule()&&o.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),r&&(r.style.display="none",r.src="#");for(var n=document.querySelectorAll('img[id*="'+o.pdfViewer.element.id+'_oldCanvas"]'),a=0;a<n.length;a++)d.removeChild(n[a]);o.isTileImageRendered=!1,o.tileRenderCount=0,o.pdfViewer.magnificationModule&&o.pdfViewer.magnificationModule.rerenderCountIncrement(),o.isDrawnCompletely=!0}};var A=g*this.getZoomFactor()/u/v,S=f.Elements?f.Elements:f.Values,M=S[5]*this.getZoomFactor()/u/v,C=S[4]*this.getZoomFactor()/u/v;V.width=A,V.style.width=A+"px",V.style.top=M+"px",V.style.left=C+"px",V.style.position="absolute"}0===l&&0===p&&this.onPageRender(e,t,d)}else{for(var b=document.querySelectorAll('img[id*="'+o.pdfViewer.element.id+"_tileimg_"+t+'_"]'),y=0;y<b.length;y++){var x=b[y].id.split("_"),I=o.retrieveCurrentZoomFactor(),T=JSON.parse(o.getWindowSessionStorageTile(t,parseFloat(x[x.length-2]),parseFloat(x[x.length-1]),I));if(T&&T.zoomFactor&&(I=T.zoomFactor),parseFloat(x[x.length-4])===t){var k=b[y];k.nodeType==Node.ELEMENT_NODE&&(k.onload=function(){if(o.showPageLoadingIndicator(t,!1),o.tileRenderCount=o.tileRenderCount+1,0===P&&0===F&&0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var e=window.sessionStorage.getItem(o.documentId+"_pagedata");o.pageCount<=100&&o.pdfViewer.fireDocumentLoad(e),o.isDocumentLoaded=!1,o.pdfViewer.textSearch&&o.pdfViewer.isExtractText&&o.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(o.tileRenderCount===o.tileRequestCount){r.style.display="none",r.src="#",o.isTextMarkupAnnotationModule()&&o.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var n=document.querySelectorAll('img[id*="'+o.pdfViewer.element.id+'_oldCanvas"]'),a=0;a<n.length;a++)d.removeChild(n[a]);o.isTileImageRendered=!1,o.tileRenderCount=0,o.pdfViewer.magnificationModule&&o.pdfViewer.magnificationModule.rerenderCountIncrement(),o.isDrawnCompletely=!0}},T&&(k.src=T.image))}}var P=e.tileX?e.tileX:0,F=e.tileY?e.tileY:0;0===P&&0===F&&this.onPageRender(e,t,d)}}},e.prototype.renderTileCanvas=function(e,t,i,o,a,s){var r=this.getElement("_pageTileCanvas_"+i);return r||(r=Object(n["z"])("canvas",{id:this.pdfViewer.element.id+"_pageTileCanvas_"+i,className:"e-pv-pageTile-canvas"}),r.style.width=e+"px",r.style.height=t+"px",r.style.display="none",r.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(r.style.marginLeft="auto",r.style.marginRight="auto"),o.appendChild(r)),r},e.prototype.calculateImageWidth=function(e,t,i,n){var o=e/this.getZoomFactor()*t*i;return parseInt(n.toString())===parseInt(o.toString())&&(n=o),n=n*this.getZoomFactor()/t,n},e.prototype.renderPage=function(e,t){var i=this,n=this;if(e&&this.pageSize[t]){var o=this.getPageWidth(t),a=this.getPageHeight(t),s=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t);if(r&&(r.style.width=o+"px",r.style.height=a+"px",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),s){s.style.background="#fff",s.style.display="block",s.style.width=o+"px",s.style.height=a+"px",o<parseFloat(r.style.width)&&(r.style.boxShadow="none");var d=e["image"];d&&(s.onload=function(){for(var e=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),o=n.getElement("_pageDiv_"+t),a=0;a<e.length;a++){var d=e[a].id.split("_");parseFloat(d[d.length-3])!=n.getZoomFactor()&&o.removeChild(e[a])}var l=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]');for(a=0;a<l.length;a++)r.removeChild(l[a]);if(i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.showPageLoadingIndicator(t,!1),0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var p=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(p),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pushImageObjects(s)},s.src=d),this.onPageRender(e,t,r)}}},e.prototype.onPageRender=function(e,t,i){var n=i&&i.getElementsByTagName("a"),o=!1;if(n&&0!==n.length)for(var a=n.length-1;a>=0;a--)n[a].parentNode.removeChild(n[a]);if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(e,t),this.pdfViewer.formFieldsModule&&!this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.formDesignerModule&&!this.isDocumentLoaded&&this.pdfViewer.formDesignerModule.rerenderFormFields(t),this.pdfViewer.formDesignerModule&&this.isDocumentLoaded&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed&&(this.pdfViewer.formFieldsModule.renderFormFields(t),this.pdfViewer.magnificationModule.isFormFieldPageZoomed=!1),this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(t),this.documentAnnotationCollections){for(var s=!1,r=0;r<this.annotationRenderredList.length;r++)this.annotationRenderredList[r]===t&&(s=!0);var d=this.documentAnnotationCollections[t];d&&!s&&(e.shapeAnnotation=d.shapeAnnotation,e.measureShapeAnnotation=d.measureShapeAnnotation,e.textMarkupAnnotation=d.textMarkupAnnotation,e.freeTextAnnotation=d.freeTextAnnotation,e.stampAnnotations=d.stampAnnotations,e.stickyNotesAnnotation=d.stickyNotesAnnotation,e.signatureInkAnnotation=d.signatureInkAnnotation,this.annotationRenderredList.push(t))}if(this.isImportAction){d=this.checkDocumentCollectionData(t);d&&(e.shapeAnnotation=d.shapeAnnotation,e.measureShapeAnnotation=d.measureShapeAnnotation,e.textMarkupAnnotation=d.textMarkupAnnotation,e.freeTextAnnotation=d.freeTextAnnotation,e.stampAnnotations=d.stampAnnotations,e.stickyNotesAnnotation=d.stickyNotesAnnotation,e.signatureInkAnnotation=d.signatureInkAnnotation,o=!0)}if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var l=e["stampAnnotations"];o?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(l,t,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(l,t)}o?this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,e.measureShapeAnnotation,e.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.updateCanvas(t),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(t),this.isShapeBasedAnnotationsEnabled()){var p=this.getElement("_annotationCanvas_"+t),h="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000";if(p){var u=p.getBoundingClientRect();Object(V["a"])(u,h,p,t,this.pdfViewer),this.pdfViewer.renderSelector(t,this.pdfViewer.annotationSelectorSettings)}}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(t),this.isFreeTextAnnotationModule()&&e.freeTextAnnotation&&(o?this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0):this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t)),this.isInkAnnotationModule()&&e&&e.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,o),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===t&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1},e.prototype.renderAnnotations=function(e,t){var i={};if(this.documentAnnotationCollections){for(var n=!1,o=0;o<this.annotationRenderredList.length;o++)this.annotationRenderredList[o]===e&&(n=!0);var a=this.documentAnnotationCollections[e];a&&!n&&(i.shapeAnnotation=a.shapeAnnotation,i.measureShapeAnnotation=a.measureShapeAnnotation,i.textMarkupAnnotation=a.textMarkupAnnotation,i.freeTextAnnotation=a.freeTextAnnotation,i.stampAnnotations=a.stampAnnotations,i.stickyNotesAnnotation=a.stickyNotesAnnotation,i.signatureAnnotation=a.signatureAnnotation,i.signatureInkAnnotation=a.signatureInkAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(i.shapeAnnotation=[],i.measureShapeAnnotation=[],i.textMarkupAnnotation=[],i.freeTextAnnotation=[],i.stampAnnotations=[],i.stickyNotesAnnotation=[],i.signatureInkAnnotation=[]),this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){var s=i["stampAnnotations"];this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(s,e)}this.pdfViewer.annotationModule.renderAnnotations(e,i.shapeAnnotation,i.measureShapeAnnotation,i.textMarkupAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(i.stickyNotesAnnotation,e)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(e),this.isImportAction){for(n=!1,o=0;o<this.annotationPageList.length;o++)this.annotationPageList[o]===e&&(n=!0);n||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}if(this.isShapeBasedAnnotationsEnabled()){var r=this.getElement("_annotationCanvas_"+e),d="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000";if(r){var l=r.getBoundingClientRect();Object(V["a"])(l,d,r,e,this.pdfViewer),this.pdfViewer.renderSelector(e)}}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(e),this.isFreeTextAnnotationModule()&&i.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(i.freeTextAnnotation,e,void 0,t),i&&i.signatureAnnotation&&this.signatureModule.renderExistingSignature(i.signatureAnnotation,e,!1),this.isInkAnnotationModule()&&i&&i.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(i.signatureInkAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()},e.prototype.renderTextContent=function(e,t){var i=e["textContent"],n=e["textBounds"],o=e["rotation"],a=this.getElement("_textLayer_"+t);a||(a=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),a&&i&&n&&(a.style.display="block",0===a.childNodes.length?this.textLayer.renderTextContents(t,i,n,o):this.textLayer.resizeTextContents(t,i,n,o,!0))},e.prototype.renderPageContainer=function(e,t,i,o){var a=Object(n["z"])("div",{id:this.pdfViewer.element.id+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"0"}});a.style.width=t+"px",a.style.height=i+"px",this.pdfViewer.enableRtl?a.style.right=this.updateLeftPosition(e)+"px":a.style.left=this.updateLeftPosition(e)+"px",a.style.top=o+"px",this.pageContainer.appendChild(a),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(a,e),this.renderPageCanvas(a,t,i,e,"block"),!n["c"].isDevice||this.pdfViewer.enableDesktopMode||this.isThumb||this.updateMobileScrollerPosition()},e.prototype.renderPDFInformations=function(){!this.pdfViewer.thumbnailViewModule||n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&(this.pdfViewer.toolbarModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.initializeAcccordionContainer(),this.pdfViewer.isCommandPanelOpen&&this.pdfViewer.annotation.showCommentsPanel(),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())},e.prototype.orderPageDivElements=function(e,t){var i=this.getElement("_pageDiv_"+(t+1));i?this.pageContainer.insertBefore(e,i):this.pageContainer.appendChild(e)},e.prototype.renderPageCanvas=function(e,t,i,o,a){if(e){var s=this.getElement("_pageCanvas_"+o);return s?(s.width=t,s.height=i,s.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto")):(s=Object(n["z"])("img",{id:this.pdfViewer.element.id+"_pageCanvas_"+o,className:"e-pv-page-canvas"}),s.width=t,s.height=i,s.style.display=a,this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto"),e.appendChild(s)),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,t,i,o,a),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(o,t,i,e),this.pdfViewer.formDesignerModule&&!this.pdfViewer.annotationModule&&this.pdfViewer.formDesignerModule.createAnnotationLayer(e,t,i,o,a),s}},e.prototype.applyElementStyles=function(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.element.id+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}},e.prototype.updateLeftPosition=function(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var o=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=o:t=o}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(this.pageSize[e].width>this.pageSize[e].height&&!0,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var a=t;t=t>0&&n["c"].isDevice&&!this.pdfViewer.enableDesktopMode?a:this.pageLeft,t>0&&this.isMixedSizeDocument&&a>0&&(t=a)}return t},e.prototype.applyLeftPosition=function(e){var t;if(this.pageSize[e]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[e].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2;if(this.pageSize[e].width>this.pageSize[e].height&&!0,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n)}var o=document.getElementById(this.pdfViewer.element.id+"_pageDiv_"+e);o&&(this.pdfViewer.enableRtl?o.style.right=t+"px":o.style.left=t+"px")}},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.getPageNumberFromClientPoint=function(e){for(var t=e.x+this.viewerContainer.scrollLeft,i=e.y+this.viewerContainer.scrollTop,n=0;n<this.pageCount;n++)if(i<this.pageSize[n].top+this.pageSize[n].height){var o=this.getElement("_pageViewContainer").getBoundingClientRect(),a=(o.width-this.pageSize[n].width)/2+o.x,s=0;if(s=i>this.pageSize[n].top?i-this.pageSize[n].top:this.pageSize[n].top-i,s>0&&null!=this.pageSize[n]){this.getPageHeight(n);if(t<a||t>a+this.pageSize[n].width)return-1;if(s<=this.getPageTop(n)+this.pageSize[n].height)return n+1}}return-1},e.prototype.convertClientPointToPagePoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect(),n=(i.width-this.pageSize[t-1].width)/2+i.x,o={x:e.x+this.viewerContainer.scrollLeft-n,y:e.y+this.viewerContainer.scrollTop-this.pageSize[t-1].top};return o}return null},e.prototype.convertPagePointToClientPoint=function(e,t){if(-1!==t){var i=this.getElement("_pageViewContainer").getBoundingClientRect(),n=(i.width-this.pageSize[t-1].width)/2+i.x,o={x:e.x+n,y:e.y+this.pageSize[t-1].top};return o}return null},e.prototype.convertPagePointToScrollingPoint=function(e,t){if(-1!==t){var i={x:e.x+this.viewerContainer.scrollLeft,y:e.y+this.viewerContainer.scrollTop};return i}return null},e.prototype.initiatePageViewScrollChanged=function(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))},e.prototype.renderCountIncrement=function(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()},e.prototype.pageViewScrollChanged=function(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getStoredData(t)&&(i=!0),-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||i||(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=t-1,o=(i=!1,this.getElement("_pageCanvas_"+n));this.isDataExits&&!this.getStoredData(n)&&(i=!0),null===o||i||-1!==this.renderedPagesList.indexOf(n)||this.getMagnified()||(this.renderCountIncrement(),this.createRequestForRender(n)),this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var a=t+1,s=0;if(a<this.pageCount&&(s=this.getPageHeight(a),-1===this.renderedPagesList.indexOf(a)&&!this.getMagnified()&&s)){this.createRequestForRender(a),this.renderCountIncrement();while(this.viewerContainer.clientHeight>s){if(a+=1,!(a<this.pageCount))break;this.renderPageElement(a),this.createRequestForRender(a),s+=this.getPageHeight(a),this.renderCountIncrement()}}}},e.prototype.renderPreviousPagesInScroll=function(e){var t=e-1,i=t-1;t>0&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement())))},e.prototype.downloadDocument=function(e){var t=URL||webkitURL;e=t.createObjectURL(e);var i=Object(n["z"])("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(i.download=this.downloadFileName),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var o=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,o+"$&")}window.open(e,"_parent")}},e.prototype.downloadExportAnnotationJson=function(e,t){var i=URL||webkitURL;e=i.createObjectURL(e);var o=Object(n["z"])("a");if(o.click)o.href=e,o.target="_parent","download"in o&&(null!==this.pdfViewer.exportAnnotationFileName?o.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".json":o.download=this.pdfViewer.fileName.split(".")[0]+".json"),(document.body||document.documentElement).appendChild(o),o.click(),o.parentNode.removeChild(o),t?this.pdfViewer.fireFormExportSuccess(e,o.download):this.pdfViewer.fireExportSuccess(e,o.download);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var a=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,a+"$&")}window.open(e,"_parent"),t?this.pdfViewer.fireFormExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json"):this.pdfViewer.fireExportSuccess(e,this.pdfViewer.fileName.split(".")[0]+".json")}},e.prototype.downloadExportedXFdfAnnotation=function(e){var t=URL||webkitURL;e=t.createObjectURL(e);var i=Object(n["z"])("a");i.click&&(i.href=e,i.target="_parent","download"in i&&(null!==this.pdfViewer.exportAnnotationFileName?i.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".xfdf":i.download=this.pdfViewer.fileName.split(".")[0]+".xfdf"),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i),this.pdfViewer.fireExportSuccess(e,i.download))},e.prototype.exportFormFields=function(e){this.createRequestForExportFormfields(!1,e)},e.prototype.importFormFields=function(e){this.createRequestForImportingFormfields(e)},e.prototype.createRequestForExportFormfields=function(e,t){var i=this,o=null;o=this;var a=new Promise((function(a,s){var r=o.createFormfieldsJsonData();o.pdfViewer.fireFormExportStarted(r.pdfAnnotation),r.action="ExportFormFields",r["hashId"]=o.hashId,r["fileName"]=o.pdfViewer.fileName,t&&""!==t&&!e&&(r["filePath"]=t),r["elementId"]=i.pdfViewer.element.id,o.jsonDocumentId&&(r.document=o.jsonDocumentId);var d=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.exportFormFields;o.exportFormFieldsRequestHandler=new h["a"](i.pdfViewer),o.exportFormFieldsRequestHandler.url=d,o.exportFormFieldsRequestHandler.mode=!0,o.exportFormFieldsRequestHandler.responseType="text",o.exportFormFieldsRequestHandler.send(r),o.exportFormFieldsRequestHandler.onSuccess=function(t){var i=t.data;if(i&&i)if(o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.exportFormFields,i),e){var s=decodeURIComponent(escape(atob(i.split(",")[1])));a(s),o.pdfViewer.fireFormExportSuccess(s,o.pdfViewer.fileName)}else if(i.split("base64,")[1]){var r=o.createBlobUrl(i.split("base64,")[1],"application/json");n["c"].isIE||"edge"===n["c"].info.name?window.navigator.msSaveOrOpenBlob(r,o.pdfViewer.fileName.split(".")[0]+".json"):o.downloadExportAnnotationJson(r,!0)}},o.exportFormFieldsRequestHandler.onFailure=function(e){o.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)},o.exportFormFieldsRequestHandler.onError=function(e){o.pdfViewer.fireFormExportFailed(r.pdfAnnotation,e.statusText)}}));return!e||a},e.prototype.createRequestForImportingFormfields=function(e){var t=null;t=this;var i={};"object"===typeof e?i.data=JSON.stringify(e):(i.data=e,"json"===e.split(".")[1]&&(i["fileName"]=t.pdfViewer.fileName)),t.pdfViewer.fireFormImportStarted(e),i.action="ImportFormFields",i["hashId"]=t.hashId,i["elementId"]=this.pdfViewer.element.id,t.jsonDocumentId&&(i.document=t.jsonDocumentId);var o=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.importFormFields;t.importFormFieldsRequestHandler=new h["a"](this.pdfViewer),t.importFormFieldsRequestHandler.url=o,t.importFormFieldsRequestHandler.mode=!0,t.importFormFieldsRequestHandler.responseType="text",t.importFormFieldsRequestHandler.send(i),t.importFormFieldsRequestHandler.onSuccess=function(i){var o=i.data;if(o&&"null"!==o){if("object"!==typeof o)try{o=JSON.parse(o),"object"!==typeof o&&(t.onControlError(500,o,t.pdfViewer.serverActionSettings.importFormFields),t.pdfViewer.fireFormImportFailed(e,i.statusText),o=null)}catch(r){if(t.pdfViewer.fireFormImportFailed(e,t.pdfViewer.localeObj.getConstant("File not found")),Object(n["K"])()){var a=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound");a.then((function(e){t.openImportExportNotificationPopup(e)}))}else t.openImportExportNotificationPopup(t.pdfViewer.localeObj.getConstant("File not found"));t.onControlError(500,o,t.pdfViewer.serverActionSettings.importFormFields),o=null}t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.importFormFields,o),t.pdfViewer.fireFormImportSuccess(e),window.sessionStorage.removeItem(this.documentId+"_formfields"),this.pdfViewer.formFieldsModule.removeExistingFormFields(),window.sessionStorage.removeItem(this.documentId+"_formDesigner"),t.saveFormfieldsData(o);for(var s=0;s<t.renderedPagesList.length;s++)this.pdfViewer.formFieldsModule.renderFormFields(s)}else if(t.pdfViewer.fireFormImportFailed(e,i.statusText),Object(n["K"])()){a=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound");a.then((function(e){t.openImportExportNotificationPopup(e)}))}else t.openImportExportNotificationPopup(t.pdfViewer.localeObj.getConstant("File not found"))},t.importFormFieldsRequestHandler.onFailure=function(i){t.pdfViewer.fireFormImportFailed(e,i.statusText)},t.importFormFieldsRequestHandler.onError=function(i){t.pdfViewer.fireFormImportFailed(e,i.statusText)}},e.prototype.createFormfieldsJsonData=function(){var e={};if(this.pdfViewer.formDesignerModule){var t=this.pdfViewer.formDesignerModule.downloadFormDesigner();e["formDesigner"]=t}else if(this.pdfViewer.formFieldsModule){t=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e["fieldsData"]=t}return e},e.prototype.constructJsonDownload=function(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e["textMarkupAnnotations"]=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e["shapeAnnotations"]=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e["measureShapeAnnotations"]=n}if(this.isStampAnnotationModule()){var o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e["stampAnnotations"]=o}if(this.isCommentAnnotationModule()){var a=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e["stickyNotesAnnotation"]=a}if(this.isImportAction){var s=JSON.stringify(this.importPageList);e["importPageList"]=s}if(this.pdfViewer.formDesignerModule){var r=this.pdfViewer.formDesignerModule.downloadFormDesigner();e["formDesigner"]=r}else if(this.pdfViewer.formFieldsModule){r=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e["fieldsData"]=r}var d=this.signatureModule.saveSignature();if(e["signatureData"]=d,this.pdfViewer.isSignatureEditable&&(e["isSignatureEdited"]=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var l=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations(!1);e["freeTextAnnotation"]=l}if(this.isInkAnnotationModule()){var p=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e["inkSignatureData"]=p}return e["action"]="Download",e["elementId"]=this.pdfViewer.element.id,e},e.prototype.checkFormFieldCollection=function(e){var t=!1,i=null;if(i=this.getItemFromSessionStorage("_formDesigner"),i)for(var n=JSON.parse(i),o=0;o<n.length;o++)if("RadioButton"===n[o].FormField.formFieldAnnotationType){for(var a=0;a<n[o].FormField.radiobuttonItem.length;a++)if(e===n[o].FormField.radiobuttonItem[a].id.split("_")[0]){t=!0;break}}else if(n[o].Key.split("_")[0]===e){t=!0;break}return t},e.prototype.isFreeTextAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)},e.prototype.createRequestForDownload=function(){var e=null;e=this,e.pdfViewer.fireDownloadStart(e.downloadFileName);var t=this.constructJsonDownload();this.dowonloadRequestHandler=new h["a"](this.pdfViewer),this.dowonloadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(e.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(t),this.dowonloadRequestHandler.onSuccess=function(t){var i=t.data;if(i){if("object"!==typeof i&&-1===i.indexOf("data:application/pdf")&&(e.onControlError(500,i,e.pdfViewer.serverActionSettings.download),i=null),"object"===typeof i&&(i=JSON.parse(i)),i){e.pdfViewer.downloadFileName&&e.pdfViewer.downloadFileName!==e.downloadFileName&&(e.downloadFileName=e.pdfViewer.downloadFileName),e.pdfViewer.fireAjaxRequestSuccess(e.pdfViewer.serverActionSettings.download,i);var o=e.createBlobUrl(i.split("base64,")[1],"application/pdf");n["c"].isIE||"edge"===n["c"].info.name?window.navigator.msSaveOrOpenBlob(o,e.downloadFileName):e.downloadDocument(o),e.pdfViewer.fireDownloadEnd(e.downloadFileName,i)}e.updateDocumentAnnotationCollections()}else e.pdfViewer.fireDownloadEnd(e.downloadFileName,"PDF Document saved in server side successfully")},this.dowonloadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e.pdfViewer.serverActionSettings.download)}},e.prototype.getTileCount=function(e){if(e&&"number"===typeof e){var t=816,i=1;i=this.getZoomFactor()>2&&e<=1200?2:e/t;var n=parseInt(i.toFixed());return n<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?n:1}return 1},e.prototype.createRequestForRender=function(e){var t=null;t=this;var i=t.getElement("_pageCanvas_"+e),n=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[e]){var o=this.pageSize[e].width,a=(this.pageSize[e].height,this.getElement("_pageCanvas_"+e),1200),s=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;a=parseInt(a),s=parseInt(s)?parseInt(s):500;var r=void 0,d=void 0,l=this.getTileCount(o);if(i){isNaN(parseFloat(i.style.width))&&!n||t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var p=t.getStoredData(e);r=d=l;var u=t.pdfViewer.tileRenderingSettings;u.enableTileRendering&&u.x>0&&u.y>0&&(a<o||this.getZoomFactor()>2)&&(r=u.x,d=u.y),t.tileRequestCount=r*d;var c=this.retrieveCurrentZoomFactor(),f=void 0;if(1===l)p=t.getStoredData(e),f=t.pageRequestSent(e,0,0);else{var g=JSON.parse(t.getWindowSessionStorageTile(e,0,0,c));g&&(p=g)}if(p&&p.uniqueId===t.documentId){if(i.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[e])return;var m=this.retrieveCurrentZoomFactor();if(a=m>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(a=1200),a>=o||!t.pdfViewer.tileRenderingSettings.enableTileRendering)t.renderPage(p,e);else{t.isTileImageRendered=!0,t.tileRenderCount=0,t.tileRenderPage(p,e);for(var w=0;w<r;w++)for(var v=0;v<d;v++)0===w&&0===v||(p=JSON.parse(this.getWindowSessionStorageTile(e,w,v,m)),p&&t.tileRenderPage(p,e))}p=null}else if(null===p||!f){if(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;t.pdfViewer.tileRenderingSettings.enableTileRendering||(r=1,d=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var V=0;V<r;V++)for(var A=0;A<d;A++){var S=null,M=this.retrieveCurrentZoomFactor();a=M>2&&o<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(a=1200),S={xCoordinate:V.toString(),yCoordinate:A.toString(),viewPortWidth:a.toString(),viewPortHeight:s.toString(),pageNumber:e.toString(),hashId:t.hashId,tilecount:l.toString(),tileXCount:r.toString(),tileYCount:d.toString(),zoomFactor:M.toString(),action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id},this.jsonDocumentId&&(S.documentId=this.jsonDocumentId),t.pageRequestHandler=new h["a"](this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json",t.pageRequestHandler.send(S),t.requestLists.push(t.documentId+"_"+e+"_"+V+"_"+A+"_"+M),t.pageRequestHandler.onSuccess=function(i){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[e])){var n=i.data;if(n&&"object"!==typeof n)try{n=JSON.parse(n)}catch(d){t.onControlError(500,n,t.pdfViewer.serverActionSettings.renderPages),n=null}if(n){while("object"!==typeof n)n=JSON.parse(n);if(n.image&&n.uniqueId===t.documentId){var s=n.pageWidth&&n.pageWidth>0?n.pageWidth:o;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,n);var r=void 0!==n.pageNumber?n.pageNumber:e;a>=s||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.storeWinData(n,r):t.storeWinData(n,r,n.tileX,n.tileY),a>=s||!t.pdfViewer.tileRenderingSettings.enableTileRendering?t.renderPage(n,r):t.tileRenderPage(n,r)}}}},this.pageRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)}}}t.renderedPagesList.push(e)}}},e.prototype.pageRequestSent=function(e,t,i){var n=this.retrieveCurrentZoomFactor(),o=this.documentId+"_"+e+"_"+t+"_"+i+"_"+n;return!!(this.requestLists&&this.requestLists.indexOf(o)>-1)},e.prototype.onControlError=function(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)},e.prototype.getStoredData=function(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var o=this.getWindowSessionStorageTile(e,0,0,i);o&&(n=o)}var a=null;return n&&(a=n,this.isPinchZoomStorage||(a=JSON.parse(n)),this.isPinchZoomStorage=!1),a},e.prototype.storeWinData=function(e,t,i,n){var o,a=this.createBlobUrl(e["image"].split("base64,")[1],"image/png"),s=URL||webkitURL,r=s.createObjectURL(a);isNaN(i)&&isNaN(n)||0===i&&0===n?(o={image:r,transformationMatrix:e["transformationMatrix"],hyperlinks:e["hyperlinks"],hyperlinkBounds:e["hyperlinkBounds"],linkAnnotation:e["linkAnnotation"],linkPage:e["linkPage"],annotationLocation:e["annotationLocation"],textContent:e["textContent"],width:e["width"],textBounds:e["textBounds"],pageText:e["pageText"],rotation:e["rotation"],scaleFactor:e["scaleFactor"],uniqueId:e["uniqueId"],zoomFactor:e["zoomFactor"],tileX:i,tileY:n},this.pageSize[t]&&(this.pageSize[t].rotation=parseFloat(e["rotation"])),this.textLayer.characterBound[t]=e["characterBounds"]):o={image:r,transformationMatrix:e["transformationMatrix"],tileX:i,tileY:n,width:e["width"],zoomFactor:e["zoomFactor"]};this.pageSize[t]&&this.pageSize[t].width,this.manageSessionStorage(t,o,i,n)},e.prototype.setCustomAjaxHeaders=function(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue)},e.prototype.getPinchZoomPage=function(e){for(var t in this.pinchZoomStorage)if(this.pinchZoomStorage.hasOwnProperty(t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null},e.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},e.prototype.getWindowSessionStorageTile=function(e,t,i,n){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t+"_"+i+"_"+n)},e.prototype.retrieveCurrentZoomFactor=function(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)},e.prototype.manageSessionStorage=function(e,t,i,n){var o=Math.round(JSON.stringify(window.sessionStorage).length/1024),a=5e3;if(o>=a){if(!this.isStorageExceed){for(var s=[],r=0;r<window.sessionStorage.length;r++)window.sessionStorage.key(r)&&window.sessionStorage.key(r).split("_")[3]&&"annotations"===window.sessionStorage.key(r).split("_")[3]&&(this.annotationStorage[window.sessionStorage.key(r)]=window.sessionStorage.getItem(window.sessionStorage.key(r)),s.push(window.sessionStorage.key(r)));if(s)for(r=0;r<s.length;r++)window.sessionStorage.removeItem(s[r])}if(this.isStorageExceed=!0,o=Math.round(JSON.stringify(window.sessionStorage).length/1024),o>=5e3){var d=window.sessionStorage.length;d>200&&(d=200);for(r=0;r<d;r++)window.sessionStorage.key(r)&&window.sessionStorage.key(r).split("_")[3]&&"annotations"!==window.sessionStorage.key(r).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(r))}}var l=this.retrieveCurrentZoomFactor();isNaN(i)&&isNaN(n)?(window.sessionStorage.setItem(this.documentId+"_"+e+"_"+l,JSON.stringify(t)),this.sessionStorage.push(this.documentId+"_"+e+"_"+l)):(this.sessionStorage.push(this.documentId+"_"+e+"_"+i+"_"+n+"_"+l),window.sessionStorage.setItem(this.documentId+"_"+e+"_"+i+"_"+n+"_"+l,JSON.stringify(t)))},e.prototype.createBlobUrl=function(e,t){for(var i=512,n=atob(e),o=[],a=0;a<n.length;a+=i){for(var s=n.slice(a,a+i),r=new Array(s.length),d=0;d<s.length;d++)r[d]=s.charCodeAt(d);var l=new Uint8Array(r);o.push(l)}var p=new Blob(o,{type:t});return p},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return t.toString(16)}))},e.prototype.createGUID=function(){return"Sync_PdfViewer_"+this.getRandomNumber()},e.prototype.isClickedOnScrollBar=function(e,t){var i=!1;return t&&this.setScrollDownValue(e.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<e.clientX&&e.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<e.clientY&&e.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,t&&this.setScrollDownValue(e.type,!0)),i},e.prototype.setScrollDownValue=function(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)},e.prototype.disableTextSelectionMode=function(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",(function(){return!1}))},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.element.id+e)},e.prototype.getPageWidth=function(e){return this.pageSize[e]?this.pageSize[e].width*this.getZoomFactor():0},e.prototype.getPageHeight=function(e){return this.pageSize[e]?this.pageSize[e].height*this.getZoomFactor():0},e.prototype.getPageTop=function(e){return this.pageSize[e]?this.pageSize[e].top*this.getZoomFactor():0},e.prototype.isAnnotationToolbarHidden=function(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden},e.prototype.isFormDesignerToolbarHidded=function(){var e=this.pdfViewer.toolbarModule.formDesignerToolbarModule;return!e||e.isToolbarHidden},e.prototype.getTextMarkupAnnotationMode=function(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode},e.prototype.isNewFreeTextAnnotation=function(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot},e.prototype.getCurrentTextMarkupAnnotation=function(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation},e.prototype.getSelectTextMarkupCurrentPage=function(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null},e.prototype.getAnnotationToolStatus=function(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()},e.prototype.getPopupNoteVisibleStatus=function(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible},e.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},e.prototype.isShapeAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)},e.prototype.isFormDesignerModule=function(){return!!this.pdfViewer.formDesignerModule},e.prototype.isCalibrateAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)},e.prototype.isStampAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)},e.prototype.isInkAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)},e.prototype.isCommentAnnotationModule=function(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)},e.prototype.isShapeBasedAnnotationsEnabled=function(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.isFormDesignerModule())},e.prototype.getMousePosition=function(e){var t,i,n,o=e.target.parentElement;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var a=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(a){var s=a.getBoundingClientRect();i=t.changedTouches[0].clientX-s.left,n=t.changedTouches[0].clientY-s.top}}}else if(e.target.classList.contains("e-pv-hyperlink"))i=e.offsetX+e.target.offsetLeft,n=e.offsetY+e.target.offsetTop;else if(e.target.classList.contains("e-pv-text")&&o){var r=o.getBoundingClientRect();i=e.clientX-r.left,n=e.clientY-r.top}else if(e.target&&e&&e.path&&o&&(o.classList.contains("foreign-object")||o.parentElement.classList.contains("foreign-object"))){r=void 0;if("e-pv-page-div"===e.path[4].className)r=e.path[4].getBoundingClientRect();else for(var d=0;d<e.path.length;d++)if("e-pv-page-div"===e.path[d].className){r=e.path[d].getBoundingClientRect();break}i=e.clientX-r.left,n=e.clientY-r.top}else if(e.target&&o&&o.classList.contains("foreign-object")){r=e.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();i=e.clientX-r.left,n=e.clientY-r.top}else i=e.offsetX,n=e.offsetY;return{x:i,y:n}},e.prototype.getMouseEventArgs=function(e,t,i,n){var o,a;return t.position=e,n?o=Object(v["b"])(i,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.pdfViewer.selectedItems,("Drag"===this.action&&o&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&o&&this.pdfViewer.selectedItems.formFields.length>0)&&(o=Object(v["b"])(i,this,this.pdfViewer))):o=Object(v["b"])(i,this,this.pdfViewer),o&&(a=o.wrapper),n?(t.target=o,t.targetWrapper=a):(t.source=o,t.sourceWrapper=a),t.actualObject=this.eventArgs.actualObject,t},e.prototype.findToolToActivate=function(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,o=new u["a"](n.x,n.y,n.width,n.height);if("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType){var a=this.pdfViewer.selectedItems.annotations[0];if(a)for(var s=0;s<a.vertexPoints.length;s++)if(Object(c["a"])(t,a.vertexPoints[s],10)&&0!==a.leaderHeight)return"ConnectorSegmentPoint_"+s}if("Distance"===e.shapeAnnotationType){var r=0,d=void 0;if(e&&e.wrapper)for(s=0;s<e.wrapper.children.length;s++){var l=f["a"].findAngle(e.sourcePoint,e.targetPoint),p=e.wrapper.children[s];if(p.id.indexOf("leader")>-1){var h=e.wrapper.children[0].bounds.center;0===r?(d={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},h=e.sourcePoint):(d={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},h=e.targetPoint);var m=Object(g["a"])();Object(g["b"])(m,l,h.x,h.y);var w=Object(g["d"])(m,{x:d.x,y:d.y});if(Object(c["a"])(t,w,10))return"Leader"+r;r++}}}var v=10/this.getZoomFactor(),V=Object(g["a"])();Object(g["b"])(V,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var A=i.offsetX-i.pivot.x*i.actualSize.width,S=i.offsetY-i.pivot.y*i.actualSize.height,M={x:A+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:S-30/this.getZoomFactor()};if(M=Object(g["d"])(V,M),"Stamp"===e.shapeAnnotationType&&Object(c["a"])(t,M,v))return"Rotate";if(o=this.inflate(v,o),o.containsPoint(t,0)){var C=this.checkResizeHandles(this.pdfViewer,i,t,V,A,S);if(C)return C}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1||this.pdfViewer.selectedItems.formFields.indexOf(e)>-1&&this.pdfViewer.designerMode?"Drag":"Select"}return this.pdfViewer.tool||"Select"},e.prototype.inflate=function(e,t){return t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e,t},e.prototype.checkResizeHandles=function(e,t,i,n,o,a){var s;return s||(s=this.checkForResizeHandles(e,t,i,n,o,a)),s||null},e.prototype.checkForResizeHandles=function(e,t,i,n,o,a){var s=40,r=10;(t.actualSize.width<40||t.actualSize.height<40)&&(r=5*this.getZoomFactor()/1);e.selectedItems;var d=!1,l=!1,p=!1,h=!1,u=this.pdfViewer.annotationSelectorSettings.resizerLocation;if((u<1||u>3)&&(u=3),!this.pdfViewer.selectedItems.annotations[0]||"Stamp"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"FreeText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Image"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(d=!0),this.pdfViewer.selectedItems.annotations[0]&&"StickyNotes"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(l=!0),this.pdfViewer.selectedItems.annotations[0]&&"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(h=!0),!this.pdfViewer.selectedItems.annotations[0]||"Ellipse"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Radius"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Rectangle"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||(p=!0),!l){if(h||d||this.pdfViewer.selectedItems.annotations[0]&&("HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType)||t.actualSize.width>=s&&t.actualSize.height>=s&&p&&(1===u||3===u)){if(Object(c["a"])(i,Object(g["d"])(n,{x:o+t.actualSize.width,y:a+t.actualSize.height}),r))return"ResizeSouthEast";if(Object(c["a"])(i,Object(g["d"])(n,{x:o,y:a+t.actualSize.height}),r))return"ResizeSouthWest";if(Object(c["a"])(i,Object(g["d"])(n,{x:o+t.actualSize.width,y:a}),r))return"ResizeNorthEast";if(Object(c["a"])(i,Object(g["d"])(n,{x:o,y:a}),r))return"ResizeNorthWest"}if(h||!p||p&&(2===u||3===u||!(t.actualSize.width>=s&&t.actualSize.height>=s)&&1===u)){if(Object(c["a"])(i,Object(g["d"])(n,{x:o+t.actualSize.width,y:a+t.actualSize.height/2}),r)&&!d)return"ResizeEast";if(Object(c["a"])(i,Object(g["d"])(n,{x:o,y:a+t.actualSize.height/2}),r)&&!d)return"ResizeWest";if(Object(c["a"])(i,Object(g["d"])(n,{x:o+t.actualSize.width/2,y:a+t.actualSize.height}),r)&&!d)return"ResizeSouth";if(Object(c["a"])(i,Object(g["d"])(n,{x:o+t.actualSize.width/2,y:a}),r)&&!d)return"ResizeNorth"}}return null},e.prototype.checkSignatureFormField=function(e){var t=!1;this.pdfViewer.formDesignerModule&&(e=e.split("_")[0]);var i=this.pdfViewer.nameTable[e];return i&&("SignatureField"!==i.formFieldAnnotationType&&"InitialField"!==i.formFieldAnnotationType&&"SignatureField"!==i.annotName||(t=!0)),t},e.prototype.diagramMouseMove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation?this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e):this.pdfViewer.formDesignerModule&&(this.activeElements.activePageID=this.pdfViewer.formDesignerModule.getEventPageNumber(e));var i,o=Object(v["b"])(e,this,this.pdfViewer);(this.tool instanceof m["e"]||this.tool instanceof m["c"])&&(o=this.pdfViewer.drawingObject);var a=this.pdfViewer.selectedItems.annotations.length>0&&this.checkSignatureFormField(this.pdfViewer.selectedItems.annotations[0].id);if(!1===f["a"].equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={};var s=null;o&&(this.tool=this.getTool(this.action),o.wrapper&&(s=o.wrapper.children[0],s&&(i=o)));var r=e.target;this.action=this.findToolToActivate(o,this.currentPosition),o&&o.annotationSettings&&o.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",o)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",o)||(this.action="Select"))),this.pdfViewer.designerMode||(Object(n["L"])(i)||Object(n["L"])(i.formFieldAnnotationType))&&!a||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(r,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(r,e,this)}else{if(!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),this.pdfViewer.designerMode||(Object(n["L"])(i)||Object(n["L"])(i.formFieldAnnotationType))&&!a||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source){r=e.target;this.updateDefaultCursor(this.eventArgs.source,r,e)}else this.setCursor(e.target,e);if(this.diagramMouseActionHelper(e),this.tool){var d=o;if(d&&"FreeText"===d.shapeAnnotationType&&this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType){r=event.target;r.style.cursor="default",this.tool=null}if(null!=this.tool){var l={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};this.eventArgs.info=l,this.tool.mouseMove(this.eventArgs)}}}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&!(this.tool instanceof m["g"])&&(this.tool=this.getTool(this.action),this.tool instanceof m["e"])){var p=this.pdfViewer.drawingObject,h=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(p,p.formFieldAnnotationType),u=this.pageContainer.firstElementChild.clientWidth-h.width,c=this.pageContainer.firstElementChild.clientHeight-h.height;if(this.pdfViewer.formDesignerModule&&p.formFieldAnnotationType&&this.currentPosition.x<u&&this.currentPosition.y<c){var g=document.getElementById("FormField_helper_html_element");if(g){if(g){var w=g.parentElement.id.split("_text_")[1]||g.parentElement.id.split("_textLayer_")[1]||g.parentElement.id.split("_annotationCanvas_")[1]||g.parentElement.id.split("_pageDiv_")[1];if(parseInt(w)!==this.activeElements.activePageID)g.remove("FormField_helper_html_element");else{var V=this.getMousePosition(event);"Checkbox"===p.formFieldAnnotationType?g.firstElementChild.firstElementChild.lastElementChild.style.visibility="visible":"SignatureField"===p.formFieldAnnotationType||"InitialField"===p.formFieldAnnotationType?(g.firstElementChild.firstElementChild.style.visibility="visible",g.firstElementChild.lastElementChild.style.visibility="visible"):g.firstElementChild.firstElementChild.style.visibility="visible",g.setAttribute("style","height:"+h.height+"px; width:"+h.width+"px;left:"+V.x+"px; top:"+V.y+"px;position:absolute;opacity: 0.5;")}}}else this.pdfViewer.formDesignerModule.drawHelper(p.formFieldAnnotationType,p,e)}else if(this.currentPosition.x>u||this.currentPosition.y>c){g=document.getElementById("FormField_helper_html_element");if(g){if(g){V=this.getMousePosition(event);g.setAttribute("style","height:"+h.height+"px; width:"+h.width+"px;left:"+V.x+"px; top:"+V.y+"px;position:absolute;opacity: 0.5;"),"Checkbox"===p.formFieldAnnotationType?g.firstElementChild.firstElementChild.lastElementChild.style.visibility="hidden":"SignatureField"===p.formFieldAnnotationType||"InitialField"===p.formFieldAnnotationType?(g.firstElementChild.firstElementChild.style.visibility="hidden",g.firstElementChild.lastElementChild.style.visibility="hidden"):g.firstElementChild.firstElementChild.style.visibility="hidden"}}else this.pdfViewer.formDesignerModule.drawHelper(p.formFieldAnnotationType,p,e)}}this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.updateDefaultCursor=function(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?this.isPanMode?t.style.cursor="grab":t.style.cursor="default":this.setCursor(t,i)},e.prototype.diagramMouseLeave=function(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var t=Object(v["b"])(e,this,this.pdfViewer),i=!1;if(!1===f["a"].equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||i){this.eventArgs={};var n=null;t&&(n=t.wrapper.children[0],n&&t,i=!1)}else this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null));this.prevPosition=this.currentPosition}},e.prototype.diagramMouseActionHelper=function(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof w["a"]&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null},e.prototype.setCursor=function(e,t){var i,o=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof m["g"])"ResizeNorthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"nw-resize":i):"ResizeNorthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"ne-resize":i):"ResizeSouthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"sw-resize":i):"ResizeSouthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"se-resize":i):"ResizeNorth"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"n-resize":i):"ResizeWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"w-resize":i):"ResizeEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"e-resize":i):"ResizeSouth"===this.tool.corner&&(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"s-resize":i);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof m["j"])e.style.cursor="crosshair";else if(this.tool instanceof m["d"])e.style.cursor="move";else if(this.tool instanceof m["e"]||this.tool instanceof m["c"]||this.tool instanceof m["f"]||o&&o.isNewAddedAnnot||this.tool instanceof m["b"])e.style.cursor="crosshair";else if(this.tool instanceof m["a"])this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"nw-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(i=this.setResizerCursorType(),e.style.cursor=Object(n["L"])(i)?"ne-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode)if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else{var a=Object(v["b"])(t,this,this.pdfViewer);if(a&&"mousemove"===t.type){e.style.cursor="pointer";var s=a,r=this.getMousePosition(t),d=this.relativePosition(t),l={left:d.x,top:d.y},p={left:r.x,top:r.y},h={opacity:s.opacity,fillColor:s.fillColor,strokeColor:s.strokeColor,thicknes:s.thickness,author:s.author,subject:s.subject,modifiedDate:s.modifiedDate};this.isMousedOver=!0;var u=this.checkSignatureFormField(s.id);if(s.formFieldAnnotationType){this.isFormFieldMousedOver=!0;var c={value:s.value,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,color:s.color,backgroundColor:s.backgroundColor,borderColor:s.borderColor,thickness:s.thickness,alignment:s.alignment,isReadonly:s.isReadonly,visibility:s.visibility,maxLength:s.maxLength,isRequired:s.isRequired,isPrint:s.isPrint,rotation:s.rotateAngle,tooltip:s.tooltip,options:s.options,isChecked:s.isChecked,isSelected:s.isSelected};this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",c,s.pageIndex,d.x,d.y,r.x,r.y)}else u||this.pdfViewer.fireAnnotationMouseover(s.annotName,s.pageIndex,s.shapeAnnotationType,s.bounds,h,p,l)}else if(e.style.cursor="grab",this.isMousedOver){var f=void 0;f=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver?this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,f):this.pdfViewer.fireAnnotationMouseLeave(f),this.isMousedOver=!1,this.isFormFieldMousedOver=!1}}else{a=Object(v["b"])(t,this,this.pdfViewer);if(a&&0===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type){s=a;var g=this.pdfViewer.nameTable[s.id];"HandWrittenSignature"!==g.shapeAnnotationType&&"Ink"!==g.shapeAnnotationType&&g.annotationSettings&&void 0!==g.annotationSettings.isLock&&(g.annotationSettings.isLock=JSON.parse(g.annotationSettings.isLock)),g.annotationSettings&&g.annotationSettings.isLock?e.style.cursor="default":e.style.cursor="pointer";r=this.getMousePosition(t),d=this.relativePosition(t),l={left:d.x,top:d.y},p={left:r.x,top:r.y},h={opacity:s.opacity,fillColor:s.fillColor,strokeColor:s.strokeColor,thicknes:s.thickness,author:s.author,subject:s.subject,modifiedDate:s.modifiedDate};this.isMousedOver=!0;u=this.checkSignatureFormField(s.id);if(s.formFieldAnnotationType){this.isFormFieldMousedOver=!0;c={value:s.value,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,color:s.color,backgroundColor:s.backgroundColor,borderColor:s.borderColor,thickness:s.thickness,alignment:s.alignment,isReadonly:s.isReadonly,visibility:s.visibility,maxLength:s.maxLength,isRequired:s.isRequired,isPrint:s.isPrint,rotation:s.rotateAngle,tooltip:s.tooltip,options:s.options,isChecked:s.isChecked,isSelected:s.isSelected};this.fromTarget=s,this.pdfViewer.fireFormFieldMouseoverEvent("formFieldMouseover",c,s.pageIndex,d.x,d.y,r.x,r.y)}else u||this.pdfViewer.fireAnnotationMouseover(s.annotName,s.pageIndex,s.shapeAnnotationType,s.bounds,h,p,l)}else{if(this.isMousedOver){f=void 0;if(f=this.pdfViewer.formDesignerModule?this.pdfViewer.formDesignerModule.getEventPageNumber(t):this.pdfViewer.annotation.getEventPageNumber(t),this.isFormFieldMousedOver)if(this.fromTarget){c={name:this.fromTarget.name,id:this.fromTarget.id,value:this.fromTarget.value,fontFamily:this.fromTarget.fontFamily,fontSize:this.fromTarget.fontSize,fontStyle:this.fromTarget.fontStyle,color:this.fromTarget.color,backgroundColor:this.fromTarget.backgroundColor,borderColor:this.fromTarget.borderColor,thickness:this.fromTarget.thickness,alignment:this.fromTarget.alignment,isReadonly:this.fromTarget.isReadonly,visibility:this.fromTarget.visibility,maxLength:this.fromTarget.maxLength,isRequired:this.fromTarget.isRequired,isPrint:this.fromTarget.isPrint,rotation:this.fromTarget.rotateAngle,tooltip:this.fromTarget.tooltip,options:this.fromTarget.options,isChecked:this.fromTarget.isChecked,isSelected:this.fromTarget.isSelected};this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",c,f)}else this.pdfViewer.fireFormFieldMouseLeaveEvent("formFieldMouseLeave",null,f);else this.pdfViewer.fireAnnotationMouseLeave(f);this.isMousedOver=!1,this.isFormFieldMousedOver=!1,e.style.cursor="default"}a&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?e.style.cursor="pointer":e.style.cursor="default"}}},e.prototype.setResizerCursorType=function(){var e;return this.pdfViewer.selectedItems.annotations[0]&&Object(n["L"])(this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType||"SignatureImage"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType&&("Distance calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=Object(n["L"])(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=Object(n["L"])(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=Object(n["L"])(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===this.pdfViewer.selectedItems.annotations[0].subject?e=Object(n["L"])(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===this.pdfViewer.selectedItems.annotations[0].subject&&(e=Object(n["L"])(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?e=Object(n["L"])(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(e=Object(n["L"])(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e},e.prototype.getTool=function(e){switch(e){case"Select":return new m["i"](this.pdfViewer,this);case"Drag":return new m["d"](this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new m["g"](this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new m["a"](this.pdfViewer,this,e);case"DrawTool":return new m["e"](this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new m["f"](this.pdfViewer,this,"Polygon");case"Distance":return new m["c"](this.pdfViewer,this,"Leader1",void 0);case"Line":return new m["c"](this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new m["f"](this.pdfViewer,this,"Perimeter");case"Rotate":return new m["h"](this.pdfViewer,this);case"Stamp":return new m["j"](this.pdfViewer,this);case"Ink":return new m["b"](this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new m["a"](this.pdfViewer,this,e):null},e.prototype.diagramMouseUp=function(e){var t,i=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var o=Object(v["b"])(e,this,this.pdfViewer)}if(this.tool instanceof m["f"]||this.tool instanceof m["c"]||this.tool instanceof m["e"]||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source);this.isMetaKey(e);var a={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};this.eventArgs.info=a,this.eventArgs.clickCount=e.detail,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof m["e"]||this.tool instanceof m["c"]||this.tool instanceof m["f"])&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1);o=Object(v["b"])(e,this,this.pdfViewer);this.isShapeAnnotationModule()&&this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.onShapesMouseup(o,e),this.isAnnotationDrawn=!1}}var s=e.target;t||!e.cancelable||!this.skipPreventDefault(s)||n["c"].isDevice&&!this.pdfViewer.enableDesktopMode||e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(i,!0)},e.prototype.skipPreventDefault=function(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),!e.parentElement||"foreign-object"===e.parentElement.className||e.classList.contains("e-pv-radio-btn")||e.classList.contains("e-pv-radiobtn-span")||e.classList.contains("e-pv-checkbox-div")||e.classList.contains("e-pdfviewer-formFields")||e.classList.contains("e-pdfviewer-ListBox")||e.classList.contains("e-pdfviewer-signatureformfields")||"free-text-input"===e.className&&"TEXTAREA"===e.tagName||i||"e-pv-hyperlink"===e.className||(t=!0),t},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.diagramMouseDown=function(e){3===e.which&&this.diagramMouseUp(e);var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i=null;i=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var o=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",o=!0),n["c"].isDevice&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var a=Object(v["b"])(e,this,this.pdfViewer);if(!n["c"].isDevice||this.pdfViewer.enableDesktopMode||!a||a instanceof d["b"]||e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var s=this.pdfViewer.annotationModule.stampAnnotationModule;if(s&&s.isNewStampAnnot){var r=a;if(!r&&this.pdfViewer.selectedItems.annotations[0]&&(r=this.pdfViewer.selectedItems.annotations[0]),r){this.isViewerMouseDown=!1,r.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0;var l=void 0;if(l="Image"===r.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity,this.pdfViewer.nodePropertyChange(r,{opacity:l}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===r.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var p=r.id;s.currentStampAnnotation&&s.currentStampAnnotation.signatureName&&(p=s.currentStampAnnotation.signatureName);for(var h=!1,c=0;c<this.customStampCollection.length;c++)if(this.customStampCollection[c].customStampName===p){h=!0;break}h&&(p=r.id),p=s.customStampName?s.customStampName:s.currentStampAnnotation.signatureName,this.customStampCollection.push({customStampName:p,customStampImageSource:r.data}),Object(n["K"])()&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCustomStampCollection",p,r.data)}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,s.updateDeleteItems(r.pageIndex,r,r.opacity),s.resetAnnotation(),s.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var f=a;if(Object(n["L"])(f)&&this.pdfViewer.selectedItems.annotations[0]&&(f=this.pdfViewer.selectedItems.annotations[0]),f){this.signatureAdded=!0,this.signatureModule.storeSignatureData(f.pageIndex,f);var g={left:f.bounds.x,top:f.bounds.y,width:f.bounds.width,height:f.bounds.height};this.pdfViewer.fireSignatureAdd(f.pageIndex,f.signatureName,f.shapeAnnotationType,g,f.opacity,f.strokeColor,f.thickness,this.signatureModule.saveImageString)}this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var m=this.pdfViewer.annotationModule.freeTextAnnotationModule,w=5,V=10;if(!0===m.isNewFreeTextAnnot){var A=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var S=this.pdfViewer.annotation.getEventPageNumber(e),M=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+S);if(M){var C=M.getBoundingClientRect(),b=C.x?C.x:C.left,y=C.y?C.y:C.top;A=new u["a"](b+w,y+w,C.width-V,C.height-V)}}if(i&&(this.mouseX=i[0].clientX,this.mouseY=i[0].clientY),A&&A.containsPoint({x:this.mouseX,y:this.mouseY})&&m.isNewAddedAnnot){S=this.pdfViewer.annotation.getEventPageNumber(e);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var x=this.getZoomFactor(),I=this.currentPosition.x+m.defautWidth*x,T=this.getPageWidth(S);I>=T&&(this.currentPosition.x=T-m.defautWidth*x,this.currentPosition.x<=0?this.currentPosition.x=w:this.currentPosition.x,m.defautWidth=m.defautWidth*x>=T?T-V:m.defautWidth)}if(m.addInuptElemet(this.currentPosition,null,S),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule){var k=this.pdfViewer.toolbar.annotationToolbarModule;Object(n["K"])()||k.primaryToolbar.deSelectItem(k.freeTextEditItem)}e.preventDefault(),m.isNewAddedAnnot=!1}}}var P=null;a&&(P=a.wrapper.children[0]),(!this.tool||this.tool&&!this.tool.drawingObject)&&(o?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(a,this.currentPosition),a&&a.annotationSettings&&a.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",a)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",a)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",a)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown(),this.pdfViewer.selectedItems&&1===this.pdfViewer.selectedItems.formFields.length&&(Object(n["L"])(this.pdfViewer.toolbar)||Object(n["L"])(this.pdfViewer.toolbar.formDesignerToolbarModule)||this.pdfViewer.toolbar.formDesignerToolbarModule.showHideDeleteIcon(!0));var F=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(F||(F=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||F)&&!this.pdfViewer.designerMode){var D=void 0;if(D=F?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source,D||(D=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===F.id}))]),D){var N={name:D.name,id:D.id,fontFamily:D.fontFamily,fontSize:D.fontSize,fontStyle:D.fontStyle,color:D.color,value:D.value,type:D.formFieldAnnotationType?D.formFieldAnnotationType:D.type,backgroundColor:D.backgroundColor,alignment:D.alignment},E=document.getElementById(D.id);E=E||(document.getElementById(D.id+"_content_html_element")?document.getElementById(D.id+"_content_html_element").children[0].children[0]:null),E&&(this.currentTarget=E,this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",N,!1,0===e.button))}}this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.exportAnnotationsAsObject=function(){var e=this;if(this.pdfViewer.annotationModule){var t=this.updateExportItem();if(t)return new Promise((function(t,i){e.createRequestForExportAnnotations(!0,A["a"].Json).then((function(e){t(e)}))}))}},e.prototype.getItemFromSessionStorage=function(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,a,s){var r=this.getZoomFactor();s&&(r=1,e.style.position="absolute"),e.style.left=t*r+"px",e.style.top=i*r+"px",e.style.height=a*r+"px",e.style.width=o*r+"px",e.style.margin="0px",n>0&&(e.style.fontSize=n*r+"px")},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.setItemInSessionStorage=function(e,t){var i=Math.round(JSON.stringify(e).length/1024);i>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.clearFormFieldStorage()),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))},e.prototype.exportFormFieldsAsObject=function(){var e=this;if(this.pdfViewer.formFieldsModule)return new Promise((function(t,i){e.createRequestForExportFormfields(!0).then((function(e){t(e)}))}))},e.prototype.importAnnotations=function(e,t,i){this.pdfViewer.annotationModule&&this.createRequestForImportAnnotations(e,t,i)},e.prototype.exportAnnotations=function(e){if(this.pdfViewer.annotationModule){var t=this.updateExportItem();t&&this.createRequestForExportAnnotations(!1,e)}},e.prototype.createRequestForExportAnnotations=function(e,t,i){var o=this,a=null;a=this;var s=new Promise((function(s,r){var d;"Json"===t?(d={hashId:a.hashId,action:"ExportAnnotations",pdfAnnotation:a.createAnnotationJsonData(),elementId:a.pdfViewer.element.id,annotationDataFormat:t,uniqueId:a.documentId},a.pdfViewer.fireExportStart(d.pdfAnnotation)):(d=o.constructJsonDownload(),d.annotationDataFormat=t,d["action"]="ExportAnnotations",a.pdfViewer.fireExportStart(d)),a.jsonDocumentId&&(d.document=a.jsonDocumentId);var l=a.pdfViewer.serviceUrl+"/"+a.pdfViewer.serverActionSettings.exportAnnotations;a.exportAnnotationRequestHandler=new h["a"](o.pdfViewer),a.exportAnnotationRequestHandler.url=l,a.exportAnnotationRequestHandler.mode=!0,a.exportAnnotationRequestHandler.responseType="text",a.exportAnnotationRequestHandler.send(d),a.exportAnnotationRequestHandler.onSuccess=function(o){var r=o.data;if(r){if("object"===typeof r&&(r=JSON.parse(r)),r){var l=a.pdfViewer.fireAjaxRequestSuccess(a.pdfViewer.serverActionSettings.exportAnnotations,r);if(e||i&&!Object(n["K"])())if(r.split("base64,")[1]){var p=r,h=atob(r.split(",")[1]);e&&(p="Json"===d.annotationDataFormat?JSON.parse(h):h),null!==a.pdfViewer.exportAnnotationFileName?a.pdfViewer.fireExportSuccess(p,a.pdfViewer.exportAnnotationFileName):a.pdfViewer.fireExportSuccess(p,a.pdfViewer.fileName),a.updateDocumentAnnotationCollections(),s(i?r:h)}else a.pdfViewer.fireExportFailed(d.pdfAnnotation,a.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===t)if(r.split("base64,")[1]){if(l)return r;var u=a.createBlobUrl(r.split("base64,")[1],"application/json");n["c"].isIE||"edge"===n["c"].info.name?null!==a.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(u,a.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(u,a.pdfViewer.fileName.split(".")[0]+".json"):a.downloadExportAnnotationJson(u),a.updateDocumentAnnotationCollections()}else{if(Object(n["K"])()){var c=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed");c.then((function(e){a.openImportExportNotificationPopup(e)}))}else a.openImportExportNotificationPopup(a.pdfViewer.localeObj.getConstant("Export Failed"));a.pdfViewer.fireExportFailed(d.pdfAnnotation,a.pdfViewer.localeObj.getConstant("Export Failed"))}else if(r.split("base64,")[1]){if(l)return r;u=a.createBlobUrl(r.split("base64,")[1],"application/vnd.adobe.xfdf");n["c"].isIE||"edge"===n["c"].info.name?window.navigator.msSaveOrOpenBlob(u,a.pdfViewer.fileName.split(".")[0]+".xfdf"):a.downloadExportedXFdfAnnotation(u)}else{if(Object(n["K"])()){var f=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed");f.then((function(e){a.openImportExportNotificationPopup(e)}))}else a.openImportExportNotificationPopup(a.pdfViewer.localeObj.getConstant("Export Failed"));a.pdfViewer.fireExportFailed(d,a.pdfViewer.localeObj.getConstant("Export Failed"))}}if("string"!==typeof r)try{"string"===typeof r&&(a.onControlError(500,r,a.pdfViewer.serverActionSettings.exportAnnotations),r=null)}catch(m){a.pdfViewer.fireExportFailed(d.pdfAnnotation,a.pdfViewer.localeObj.getConstant("Export Failed")),a.onControlError(500,r,a.pdfViewer.serverActionSettings.exportAnnotations),r=null}}else{var g=void 0;g=null!==a.pdfViewer.exportAnnotationFileName?a.pdfViewer.exportAnnotationFileName:a.pdfViewer.fileName,a.pdfViewer.fireExportSuccess("Exported data saved in server side successfully",g)}},a.exportAnnotationRequestHandler.onFailure=function(e){a.pdfViewer.fireExportFailed(d.pdfAnnotation,e.statusText)},a.exportAnnotationRequestHandler.onError=function(e){a.pdfViewer.fireExportFailed(d.pdfAnnotation,e.statusText)}}));return!e&&!i||s},e.prototype.createRequestForImportAnnotations=function(e,t,i){var o,a=null;if(a=this,"string"===typeof e&&"Json"===t&&-1===e.indexOf(".json")&&(e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],e=JSON.parse(decodeURIComponent(escape(atob(e))))),"object"===typeof e)this.isJsonImported=!i,a.reRenderAnnotations(e.pdfAnnotation),a.isImportedAnnotation=!0,a.updateDocumentEditedProperty(!0),this.isAddAnnotation||a.pdfViewer.fireImportSuccess(e.pdfAnnotation);else{a.pdfViewer.fireImportStart(e),"Json"===t?o={fileName:e,action:"ImportAnnotations",elementId:a.pdfViewer.element.id,hashId:a.hashId,uniqueId:a.documentId}:(i||(e=btoa(e)),e=e.split(",")[1]?e.split(",")[1]:e.split(",")[0],o={importedData:e,action:"ImportAnnotations",elementId:a.pdfViewer.element.id,hashId:a.hashId,uniqueId:a.documentId}),a.jsonDocumentId&&(o.document=a.jsonDocumentId);var s=a.pdfViewer.serviceUrl+"/"+a.pdfViewer.serverActionSettings.importAnnotations;a.importAnnotationRequestHandler=new h["a"](a.pdfViewer),a.importAnnotationRequestHandler.url=s,a.importAnnotationRequestHandler.mode=!0,a.importAnnotationRequestHandler.responseType="text",a.importAnnotationRequestHandler.send(o),a.importAnnotationRequestHandler.onSuccess=function(t){var i=t.data;if(i){if("object"!==typeof i)try{i=JSON.parse(i),"object"!==typeof i&&(a.onControlError(500,i,a.pdfViewer.serverActionSettings.importAnnotations),i=null)}catch(s){if(a.pdfViewer.fireImportFailed(e,a.pdfViewer.localeObj.getConstant("File not found")),Object(n["K"])()){var o=this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound");o.then((function(e){a.openImportExportNotificationPopup(e)}))}else a.openImportExportNotificationPopup(a.pdfViewer.localeObj.getConstant("File not found"));a.onControlError(500,i,a.pdfViewer.serverActionSettings.importAnnotations),i=null}i&&(a.pdfViewer.fireAjaxRequestSuccess(a.pdfViewer.serverActionSettings.importAnnotations,i),i.pdfAnnotation&&(a.reRenderAnnotations(i.pdfAnnotation),a.isImportedAnnotation=!0,a.updateDocumentEditedProperty(!0),a.pdfViewer.fireImportSuccess(i.pdfAnnotation)))}},a.importAnnotationRequestHandler.onFailure=function(t){a.pdfViewer.fireImportFailed(e,t.statusText)},a.importAnnotationRequestHandler.onError=function(t){a.pdfViewer.fireImportFailed(e,t.statusText)}}},e.prototype.openImportExportNotificationPopup=function(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)},e.prototype.reRenderAnnotations=function(e){if(e){this.isImportAction=!0;var t=void 0;this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(t=0);for(var i=0;i<this.pageCount;i++)if(e[i]){var n=[],o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),s=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),r=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),l=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),h=window.sessionStorage.getItem(this.documentId+"_annotations_ink");this.isStorageExceed&&(o=this.annotationStorage[this.documentId+"_annotations_textMarkup"],a=this.annotationStorage[this.documentId+"_annotations_shape"],s=this.annotationStorage[this.documentId+"_annotations_shape_measure"],r=this.annotationStorage[this.documentId+"_annotations_stamp"],d=this.annotationStorage[this.documentId+"_annotations_sticky"],l=this.annotationStorage[this.documentId+"_annotations_freetext"],h=this.annotationStorage[this.documentId+"_annotations_ink"]);var u=this.getElement("_annotationCanvas_"+i);if(u)if(this.drawPageAnnotations(e[i],i),this.isImportedAnnotation){for(var c=!1,f=0;f<this.annotationPageList.length;f++)this.annotationPageList[f]===i&&(c=!0);c&&(this.annotationPageList[t]=i,t+=1)}else this.annotationPageList[t]=i,t+=1;if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length){if(o){var g=JSON.parse(o);e[i].textMarkupAnnotation=this.checkAnnotationCollections(g,e[i].textMarkupAnnotation,i)}if(e[i].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[i].textMarkupAnnotation,i),n.textMarkupAnnotation=e[i].textMarkupAnnotation,0!==e[i].textMarkupAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].textMarkupAnnotation,i);for(f=0;f<e[i].textMarkupAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e[i].textMarkupAnnotation[f],i))}}if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length){if(a){g=JSON.parse(a);e[i].shapeAnnotation=this.checkAnnotationCollections(g,e[i].shapeAnnotation,i)}if(e[i].shapeAnnotation=this.checkAnnotationCommentsCollections(e[i].shapeAnnotation,i),n.shapeAnnotation=e[i].shapeAnnotation,0!==e[i].shapeAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].shapeAnnotation,i);for(f=0;f<e[i].shapeAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e[i].shapeAnnotation[f],i))}}if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length){if(s){g=JSON.parse(s);e[i].measureShapeAnnotation=this.checkAnnotationCollections(g,e[i].measureShapeAnnotation,i)}if(e[i].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[i].measureShapeAnnotation,i),n.measureShapeAnnotation=e[i].measureShapeAnnotation,0!==e[i].measureShapeAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].measureShapeAnnotation,i);for(f=0;f<e[i].measureShapeAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e[i].measureShapeAnnotation[f],i))}}if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length){if(r){g=JSON.parse(r);e[i].stampAnnotations=this.checkAnnotationCollections(g,e[i].stampAnnotations,i)}if(e[i].stampAnnotations=this.checkAnnotationCommentsCollections(e[i].stampAnnotations,i),n.stampAnnotations=e[i].stampAnnotations,0!==e[i].stampAnnotations.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].stampAnnotations,i);for(f=0;f<e[i].stampAnnotations.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e[i].stampAnnotations[f],i))}}if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length){if(d){g=JSON.parse(d);e[i].stickyNotesAnnotation=this.checkAnnotationCollections(g,e[i].stickyNotesAnnotation,i)}if(e[i].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[i].stickyNotesAnnotation,i),n.stickyNotesAnnotation=e[i].stickyNotesAnnotation,0!==e[i].stickyNotesAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].stickyNotesAnnotation,i);for(f=0;f<e[i].stickyNotesAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(e[i].stickyNotesAnnotation[f],i))}}if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length){if(l){g=JSON.parse(l);e[i].freeTextAnnotation=this.checkAnnotationCollections(g,e[i].freeTextAnnotation,i)}if(e[i].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[i].freeTextAnnotation,i),n.freeTextAnnotation=e[i].freeTextAnnotation,0!==e[i].freeTextAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].freeTextAnnotation,i);for(f=0;f<e[i].freeTextAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e[i].freeTextAnnotation[f],i))}}if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length){if(p){g=JSON.parse(p);e[i].signatureAnnotation=this.checkSignatureCollections(g,e[i].signatureAnnotation,i)}if(n.signatureAnnotation=e[i].signatureAnnotation,0!==e[i].signatureAnnotation.length)for(f=0;f<e[i].signatureAnnotation.length;f++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(e[i].signatureAnnotation[f],i),!0)}if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length){if(h){g=JSON.parse(h);e[i].signatureInkAnnotation=this.checkAnnotationCollections(g,e[i].signatureInkAnnotation,i)}if(e[i].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[i].signatureInkAnnotation,i),n.signatureInkAnnotation=e[i].signatureInkAnnotation,0!==e[i].signatureInkAnnotation.length){this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderAnnotationComments(e[i].signatureInkAnnotation,i);for(f=0;f<e[i].signatureInkAnnotation.length;f++);}}this.updateImportedAnnotationsInDocumentCollections(n,i)}if(this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered){var m=this.createAnnotationsCollection();m&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,m))}}},e.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){if(this.documentAnnotationCollections){var i=this.documentAnnotationCollections,n=i[t];if(n){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var o=0;o<e.textMarkupAnnotation.length;o++)n.textMarkupAnnotation.push(e.textMarkupAnnotation[o]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(o=0;o<e.shapeAnnotation.length;o++)n.shapeAnnotation.push(e.shapeAnnotation[o]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(o=0;o<e.measureShapeAnnotation.length;o++)n.measureShapeAnnotation.push(e.measureShapeAnnotation[o]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(o=0;o<e.stampAnnotations.length;o++)n.stampAnnotations.push(e.stampAnnotations[o]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(o=0;o<e.stickyNotesAnnotation.length;o++)n.stickyNotesAnnotation.push(e.stickyNotesAnnotation[o]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(o=0;o<e.freeTextAnnotation.length;o++)n.freeTextAnnotation.push(e.freeTextAnnotation[o]);if(e.signatureAnnotation&&0!==e.signatureAnnotation.length)for(o=0;o<e.signatureAnnotation.length;o++)n.signatureAnnotation.push(e.signatureAnnotation[o]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(o=0;o<e.signatureInkAnnotation.length;o++)n.signatureInkAnnotation.push(e.signatureInkAnnotation[o]);this.documentAnnotationCollections[t]=n}}},e.prototype.checkDocumentCollectionData=function(e,t){var i;if(t)i=t;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];n&&(i=Object(S["a"])(n))}if(i){var o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),s=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),r=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),l=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),h=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(o=this.annotationStorage[this.documentId+"_annotations_textMarkup"],a=this.annotationStorage[this.documentId+"_annotations_shape"],s=this.annotationStorage[this.documentId+"_annotations_shape_measure"],r=this.annotationStorage[this.documentId+"_annotations_stamp"],d=this.annotationStorage[this.documentId+"_annotations_sticky"],l=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"],h=this.annotationStorage[this.documentId+"_annotations_sign"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length&&o){var u=JSON.parse(o);u&&(i.textMarkupAnnotation=this.findImportedAnnotations(u,i.textMarkupAnnotation,e))}if(i.shapeAnnotation&&0!==i.shapeAnnotation.length&&a){u=JSON.parse(a);u&&(i.shapeAnnotation=this.findImportedAnnotations(u,i.shapeAnnotation,e))}if(i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length&&s){u=JSON.parse(s);u&&(i.measureShapeAnnotation=this.findImportedAnnotations(u,i.measureShapeAnnotation,e))}if(i.stampAnnotations&&0!==i.stampAnnotations.length&&r){u=JSON.parse(r);u&&(i.stampAnnotations=this.findImportedAnnotations(u,i.stampAnnotations,e))}if(i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length&&d){u=JSON.parse(d);u&&(i.stickyNotesAnnotation=this.findImportedAnnotations(u,i.stickyNotesAnnotation,e))}if(i.freeTextAnnotation&&0!==i.freeTextAnnotation.length&&l){u=JSON.parse(l);u&&(i.freeTextAnnotation=this.findImportedAnnotations(u,i.freeTextAnnotation,e))}if(i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length&&p){u=JSON.parse(p);u&&(i.signatureInkAnnotation=this.findImportedAnnotations(u,i.signatureInkAnnotation,e))}if(i.signatureAnnotation&&0!==i.signatureAnnotation.length&&h){u=JSON.parse(p);u&&(i.signatureAnnotation=this.findImportedAnnotations(u,i.signatureAnnotation,e))}return i}},e.prototype.findImportedAnnotations=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].annotName===t[s].AnnotName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.drawPageAnnotations=function(e,t,i){if(i&&(e=e[t]),e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length){var n=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),n){var o=JSON.parse(n);o&&(e.textMarkupAnnotation=this.checkAnnotationCollections(o,e.textMarkupAnnotation,t))}e.textMarkupAnnotation=this.checkAnnotationCommentsCollections(e.textMarkupAnnotation,t),0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,null,e.textMarkupAnnotation,null,!0)}if(e.shapeAnnotation&&0!==e.shapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape"]),n){o=JSON.parse(n);e.shapeAnnotation=this.checkAnnotationCollections(o,e.shapeAnnotation,t)}e.shapeAnnotation=this.checkAnnotationCommentsCollections(e.shapeAnnotation,t),0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,e.shapeAnnotation,null,null,null,!0)}if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),n){o=JSON.parse(n);e.measureShapeAnnotation=this.checkAnnotationCollections(o,e.measureShapeAnnotation,t)}e.measureShapeAnnotation=this.checkAnnotationCommentsCollections(e.measureShapeAnnotation,t),0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(t,null,e.measureShapeAnnotation,null,null,!0)}if(e.stampAnnotations&&0!==e.stampAnnotations.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_stamp"]),n){o=JSON.parse(n);e.stampAnnotations=this.checkAnnotationCollections(o,e.stampAnnotations,t)}e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,t),0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(e.stampAnnotations,t,null,!0)}if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_sticky"]),n){o=JSON.parse(n);e.stickyNotesAnnotation=this.checkAnnotationCollections(o,e.stickyNotesAnnotation,t)}e.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e.stickyNotesAnnotation,t),0!==e.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(e.stickyNotesAnnotation,t)}if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_freetext");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_freetext"]),n){o=JSON.parse(n);e.freeTextAnnotation=this.checkAnnotationCollections(o,e.freeTextAnnotation,t)}e.freeTextAnnotation=this.checkAnnotationCommentsCollections(e.freeTextAnnotation,t),0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(e.freeTextAnnotation,t,!0,!0)}if(e.signatureAnnotation&&0!==e.signatureAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),o=JSON.parse(n);o&&(e.signatureAnnotation=this.checkSignatureCollections(o,e.signatureAnnotation,t)),this.signatureModule.renderExistingSignature(e.signatureAnnotation,t,!0)}if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_ink"]),n){o=JSON.parse(n);e.signatureInkAnnotation=this.checkAnnotationCollections(o,e.signatureInkAnnotation,t)}e.signatureInkAnnotation=this.checkAnnotationCommentsCollections(e.signatureInkAnnotation,t),0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(e.signatureInkAnnotation,t,!0)}}},e.prototype.checkSignatureCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].signatureName===t[s].SignatureName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.checkAnnotationCollections=function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===i&&(n=e[o].annotations);if(n)for(var a=0;a<n.length;a++)for(var s=0;s<t.length;s++)n[a].annotName===t[s].AnnotName&&(t.splice(s,1),s-=1);return n=null,t},e.prototype.checkAnnotationCommentsCollections=function(e,t){if(this.annotationComments){var i=this.annotationComments[t];if(i=this.selectAnnotationCollections(i),i)for(var n=0;n<i.length;n++)for(var o=0;o<e.length;o++)i[n].AnnotName===e[o].AnnotName&&(e.splice(o,1),o-=1);i=null}return e},e.prototype.selectAnnotationCollections=function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[i]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[i]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[i]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[i]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[i]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[i]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[i])}return t},e.prototype.saveImportedAnnotations=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),o=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),a=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),s=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),r=window.sessionStorage.getItem(this.documentId+"_annotations_sign");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],o=this.annotationStorage[this.documentId+"_annotations_sticky"],a=this.annotationStorage[this.documentId+"_annotations_freetext"],s=this.annotationStorage[this.documentId+"_annotations_ink"],r=this.annotationStorage[this.documentId+"_annotations_sign"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:o,freeTextObject:a,inkObject:s,signatureObject:r},this.documentAnnotationCollections)for(var d=0;d<this.pageCount;d++)if(this.documentAnnotationCollections[d]){var l=Object(S["a"])(this.documentAnnotationCollections[d]);l=this.checkDocumentCollectionData(d,l),this.savePageAnnotations(l,d)}},e.prototype.savePageAnnotations=function(e,t){if(0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[i],t);if(0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[i],t);if(0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[i],t);if(0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[i],t);if(0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[i],t);if(0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[i],t)},e.prototype.updateDocumentAnnotationCollections=function(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject)))},e.prototype.createAnnotationJsonData=function(){var e,t,i,n,o,a,s,r,d={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(n=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(a=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations(!0)),this.isInkAnnotationModule()&&(r=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)s=this.signatureModule.saveSignature();else{for(var l=new Array,p=0;p<this.pageCount;p++)l[p]=[];s=JSON.stringify(l)}for(var h=0;h<this.pageCount;h++){var u={textMarkupAnnotation:JSON.parse(e)[h],shapeAnnotation:JSON.parse(t)[h],measureShapeAnnotation:JSON.parse(i)[h],stampAnnotations:JSON.parse(n)[h],stickyNotesAnnotation:JSON.parse(o)[h],freeTextAnnotation:JSON.parse(a)[h],signatureAnnotation:JSON.parse(s)[h],signatureInkAnnotation:JSON.parse(r)[h]};d[h]=u}return JSON.stringify(d)},e.prototype.combineImportedData=function(e,t){for(var i=0;i<this.pageCount;i++)if(t[i])if(e[i])t[i].textMarkupAnnotation&&0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation?(t[i].textMarkupAnnotation=this.checkImportedData(e[i].textMarkupAnnotation,t[i].textMarkupAnnotation,i),0!==t[i].textMarkupAnnotation.length&&(e[i].textMarkupAnnotation=e[i].textMarkupAnnotation.concat(t[i].textMarkupAnnotation))):e[i].textMarkupAnnotation=t[i].textMarkupAnnotation),t[i].shapeAnnotation&&0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation?(t[i].shapeAnnotation=this.checkImportedData(e[i].shapeAnnotation,t[i].shapeAnnotation,i),0!==t[i].shapeAnnotation.length&&(e[i].shapeAnnotation=e[i].shapeAnnotation.concat(t[i].shapeAnnotation))):e[i].shapeAnnotation=t[i].shapeAnnotation),t[i].measureShapeAnnotation&&0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation?(t[i].measureShapeAnnotation=this.checkImportedData(e[i].measureShapeAnnotation,t[i].measureShapeAnnotation,i),0!==t[i].measureShapeAnnotation.length&&(e[i].measureShapeAnnotation=e[i].measureShapeAnnotation.concat(t[i].measureShapeAnnotation))):e[i].measureShapeAnnotation=t[i].measureShapeAnnotation),t[i].stampAnnotations&&0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations?(t[i].stampAnnotations=this.checkImportedData(e[i].stampAnnotations,t[i].stampAnnotations,i),0!==t[i].stampAnnotations.length&&(e[i].stampAnnotations=e[i].stampAnnotations.concat(t[i].stampAnnotations))):e[i].stampAnnotations=t[i].stampAnnotations),t[i].stickyNotesAnnotation&&0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation?(t[i].stickyNotesAnnotation=this.checkImportedData(e[i].stickyNotesAnnotation,t[i].stickyNotesAnnotation,i),0!==t[i].stickyNotesAnnotation.length&&(e[i].stickyNotesAnnotation=e[i].stickyNotesAnnotation.concat(t[i].stickyNotesAnnotation))):e[i].stickyNotesAnnotation=t[i].stickyNotesAnnotation),t[i].freeTextAnnotation&&0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation?(t[i].freeTextAnnotation=this.checkImportedData(e[i].freeTextAnnotation,t[i].freeTextAnnotation,i),0!==t[i].freeTextAnnotation.length&&(e[i].freeTextAnnotation=e[i].freeTextAnnotation.concat(t[i].freeTextAnnotation))):e[i].freeTextAnnotation=t[i].freeTextAnnotation),t[i].signatureInkAnnotation&&0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation?(t[i].signatureInkAnnotation=this.checkImportedData(e[i].signatureInkAnnotation,t[i].signatureInkAnnotation,i),0!==t[i].signatureInkAnnotation.length&&(e[i].signatureInkAnnotation=e[i].signatureInkAnnotation.concat(t[i].signatureInkAnnotation))):e[i].signatureInkAnnotation=t[i].signatureInkAnnotation);else{var n={textMarkupAnnotation:t[i].textMarkupAnnotation,shapeAnnotation:t[i].shapeAnnotation,measureShapeAnnotation:t[i].measureShapeAnnotation,stampAnnotations:t[i].stampAnnotations,stickyNotesAnnotation:t[i].stickyNotesAnnotation,freeTextAnnotation:t[i].freeTextAnnotation,signatureInkAnnotation:t[i].signatureInkAnnotation};e[i]=n}return e},e.prototype.updateExportItem=function(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),s=!1,r=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.pdfViewer.isSignatureEditable){var d=window.sessionStorage.getItem(this.documentId+"_annotations_sign");d&&(s=!0)}return!!(e||t||i||n||o||a||this.isImportAction||this.isStorageExceed||s||r)},e.prototype.isFreeTextAnnotation=function(e){var t=!1;return e&&e.length>0&&(t=e.some((function(e){return"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject}))),t},e.prototype.checkImportedData=function(e,t,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)e[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1);if(this.annotationComments){var a=this.annotationComments[i];if(a=this.selectAnnotationCollections(a),a)for(n=0;n<a.length;n++)for(o=0;o<t.length;o++)a[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1)}return t},e.prototype.checkAnnotationWidth=function(e){for(var t,i,n,o,a=0,s=0,r=0;r<e.length;r++)t?(t>e[r].x?t=e[r].x:i<e[r].x&&(i=e[r].x),n>e[r].y?n=e[r].y:o<e[r].y&&(o=e[r].y)):(t=e[r].x,i=e[r].x,n=e[r].y,o=e[r].y);return a=i-t,s=o-n,{width:a,height:s}},e.prototype.deleteAnnotations=function(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);var i=document.getElementById(this.pdfViewer.element.id+"_accordionContainer"+(t+1));i&&i.remove();var n=document.getElementById(this.pdfViewer.element.id+"_accordionContentContainer");n&&0===n.childElementCount&&(n.style.display="none",document.getElementById(this.pdfViewer.element.id+"_commentsPanelText")&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.element.id+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.stampPageNumber=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}},e.prototype.createAnnotationsCollection=function(e,t){var i=[];if(t){i={};o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};i[e]=o}else for(var n=0;n<this.pageCount;n++){var o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[]};i.push(o)}return i},e.prototype.addAnnotation=function(e){var t,i={};if(e){var n=!1,o=1;e.shapeAnnotationType||e.author?(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(o=e.length,t=this.createAnnotationsCollection()):(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0));for(var a=0;a<o;a++){var s=void 0;s=n?e:e[a];var r={};if(r.ShapeAnnotationType=s.shapeAnnotationType,r.AnnotationAddMode=s.annotationAddMode,r.Author=s.author,r.AnnotationSelectorSettings=s.annotationSelectorSettings,r.AnnotationSettings=s.annotationSettings,r.PageNumber=s.pageNumber,r.ModifiedDate=s.modifiedDate,r.Subject=s.subject,r.Note=s.note,r.AnnotName=s.annotationId,r.IsCommentLock=s.isCommentLock,r.Comments=s.comments,s.comments&&s.comments.length>0){for(var d=[],l=0;l<s.comments.length;l++)d.push(this.updateComments(s,s.comments[l]));r.Comments=d}if(s.review&&(r.State=s.review.state,r.StateModel=s.review.stateModel),r.CustomData=s.customData,r.Opacity=s.opacity,"textMarkup"===s.shapeAnnotationType){if(r.AnnotType="textMarkup",r.Color=s.color,r.IsMultiSelect=s.isMultiSelect,r.TextMarkupAnnotationType=s.textMarkupAnnotationType,r.TextMarkupContent=s.textMarkupContent,r.TextMarkupStartIndex=s.textMarkupStartIndex,r.TextMarkupEndIndex=s.textMarkupEndIndex,s.rect&&(r.Rect=this.convertBounds(s.rect,!0)),s.bounds&&s.bounds.length>=1){var p=new Array;for(l=0;l<s.bounds.length;l++)p.push(this.convertBounds(s.bounds[l]));r.Bounds=p}t[s.pageNumber].textMarkupAnnotation.push(r)}else if("sticky"===s.shapeAnnotationType)r.AnnotType="sticky",r.Icon="Comment",r.Bounds=this.convertBounds(s.bounds),r.StrokeColor=s.strokeColor,r.Color=s.color,t[s.pageNumber].stickyNotesAnnotation.push(r);else if("FreeText"===s.shapeAnnotationType)r.AnnotType="freeText",r.Name=s.annotationId,r.MarkupText=s.dynamicText,r.Text=s.dynamicText,r.Note=s.dynamicText,r.TextAlign=s.textAlign,r.Thickness=s.thicknes,r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.FontColor=s.fontColor,r.FontSize=s.fontSize,r.FontFamily=s.fontFamily,r.Rotate=s.rotateAngle,r.Bounds=this.convertBounds(s.bounds),r.Font={Name:s.fontFamily,Size:s.fontSize,Bold:s.font.isBold,Italic:s.font.isItalic,Strikeout:s.font.isStrikeout,Underline:s.font.isUnderline},t[s.pageNumber].freeTextAnnotation.push(r);else if("stamp"===s.shapeAnnotationType){if(r.AnnotType="stamp",r.Icon=s.icon,r.isDynamic=!1,r.Rect=this.convertBounds(s.bounds,!1,!0),r.RotateAngle=s.rotateAngle,r.FillColor=s.fillColor,r.StrokeColor=s.strokeColor,r.StampAnnotationType=s.stampAnnotationType,r.CreationDate=s.creationDate,"image"===s.stampAnnotationType){var h=[],u={imagedata:s.stampAnnotationPath};h.push(u),r.Apperarance=h}if(s.isDynamicStamp){r.IsDynamic=!0,r.StrokeColor=s.stampFillcolor;h=[],u={type:"string",text:s.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0};h.push(u),r.Apperarance=h}t[s.pageNumber].stampAnnotations.push(r)}else if("Ink"===s.shapeAnnotationType||"Signature"===s.shapeAnnotationType)r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.Thickness=s.thickness,r.Bounds=this.convertBounds(s.bounds),r.PathData=s.data,r.pageIndex=s.pageNumber,"Ink"===s.shapeAnnotationType&&(r.AnnotType="Ink",r.IsPathData=!0,t[s.pageNumber].signatureInkAnnotation.push(r)),"Signature"===s.shapeAnnotationType&&(r.AnnotType="Signature",r.SignatureName=s.annotationId,r.IsSignature=!0,t[s.pageNumber].signatureAnnotation.push(r));else if("Line"===s.shapeAnnotationType||"LineWidthArrowHead"===s.shapeAnnotationType||"Polyline"===s.shapeAnnotationType||"Polygon"===s.shapeAnnotationType||"Polyline"===s.shapeAnnotationType||"Circle"===s.shapeAnnotationType||"Oval"===s.shapeAnnotationType||"Rectangle"===s.shapeAnnotationType||"Square"===s.shapeAnnotationType||"Ellipse"===s.shapeAnnotationType){if(r.AnnotType="shape",r.StrokeColor=s.strokeColor,r.FillColor=s.fillColor,r.Thickness=s.thickness,r.BorderStyle=s.borderStyle,r.BorderDashArray=s.borderDashArray,r.RotateAngle=s.rotateAngle,r.IsCloudShape=s.isCloudShape,r.CloudIntensity=s.cloudIntensity,r.RectangleDifference=s.rectangleDifference,r.LineHeadStart=s.lineHeadStart,r.LineHeadEnd=s.lineHeadEnd,r.IsLocked=s.isLocked,r.EnableShapeLabel=s.enableShapeLabel,r.LabelContent=s.labelContent,r.LabelFillColor=s.labelFillColor,r.LabelBorderColor=s.labelBorderColor,r.FontColor=s.fontColor,r.FontSize=s.fontSize,r.LabelBounds=this.convertBounds(s.labelBounds),r.LabelSettings=s.labelSettings,r.Bounds=this.convertBounds(s.bounds),r.LeaderLength=s.leaderLength,r.LeaderLineExtenstion=s.leaderLineExtension,s.vertexPoints&&s.vertexPoints.length>=1){var c=new Array;for(l=0;l<s.vertexPoints.length;l++)c.push(this.convertVertexPoints(s.vertexPoints[l]));r.VertexPoints=c}if(r.EnableShapeLabel=s.enableShapeLabel,"Distance calculation"===s.subject||"Perimeter calculation"===s.subject||"Area calculation"===s.subject||"Radius calculation"===s.subject||"Volume calculation"===s.subject){r.AnnotType="shape_measure";var f=s.calibrate;f&&(r.Calibrate={Ratio:f.ratio,X:[{Unit:f.x[0].unit,ConversionFactor:f.x[0].conversionFactor,FractionalType:f.x[0].fractionalType,Denominator:f.x[0].denominator,FormatDenominator:f.x[0].formatDenominator}],Distance:[{Unit:f.distance[0].unit,ConversionFactor:f.distance[0].conversionFactor,FractionalType:f.distance[0].fractionalType,Denominator:f.distance[0].denominator,FormatDenominator:f.distance[0].formatDenominator}],Area:[{Unit:f.area[0].unit,ConversionFactor:f.area[0].conversionFactor,FractionalType:f.area[0].fractionalType,Denominator:f.area[0].denominator,FormatDenominator:f.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:f.targetUnitConversion,Depth:f.depth}),r.Indent=s.indent,r.Caption=s.caption,r.CaptionPosition=s.captionPosition,r.LeaderLineExtension=s.leaderLineExtension,r.LeaderLength=s.leaderLength,r.LeaderLineOffset=s.leaderLineOffset,t[s.pageNumber].measureShapeAnnotation.push(r)}else t[s.pageNumber].shapeAnnotation.push(r)}}i.pdfAnnotation=t,this.pdfViewer.importAnnotation(i)}},e.prototype.convertBounds=function(e,t,i){if(e){if(t){var n=e.left?e.left:e.Left?e.Left:0,o=e.right?e.right:e.Right?e.Right:0,a=e.bottom?e.bottom:e.Bottom?e.Bottom:0,s=e.top?e.top:e.Top?e.Top:0;return{left:n,right:o,bottom:a,top:s}}var r=e.x?e.x:e.left?e.left:e.Left?e.Left:0,d=e.y?e.y:e.top?e.top:e.Top?e.Top:0,l=e.width?e.width:e.Width?e.Width:0,p=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(r),Y:this.ConvertPixelToPoint(d),Left:this.ConvertPixelToPoint(r),Top:this.ConvertPixelToPoint(d),Height:this.ConvertPixelToPoint(p),Width:this.ConvertPixelToPoint(l)}:{X:r,Y:d,Left:r,Top:d,Height:p,Width:l}}},e.prototype.ConvertPixelToPoint=function(e){return.75*e},e.prototype.convertVertexPoints=function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}},e.prototype.updateComments=function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}},e.prototype.removeFocus=function(){if(Object(n["K"])()){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.element.id+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()}},e.prototype.updateDocumentEditedProperty=function(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.allowServerDataBinding=!1},e.prototype.getWindowDevicePixelRatio=function(){var e=window.devicePixelRatio;return n["c"].isDevice?2:e},e.prototype.getZoomRatio=function(e){var t,i=this.getZoomFactor(),o=e||1,a=this.getWindowDevicePixelRatio();return t=!n["c"].isDevice||n["c"].isDevice&&i<=.7?o*a:o,t},e.prototype.importJsonForRotatedDocuments=function(e,t,i,n){var o=Math.abs(e),a=this.pageSize[t];return n!==a.rotation?(o=this.getRotationAngle(n,t),this.isPageRotated=!0):(o=0,this.isPageRotated=!1),1===o?{X:a.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===o?{X:a.width-i.X-i.Width,Y:a.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===o?{X:i.Y,Y:a.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i},e.prototype.getRotationAngle=function(e,t){var i=this.pageSize[t];if(e=Math.abs(e),0===e)return i.rotation;if(1===e||90===e){if(0==i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0==i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0==i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}},e.prototype.calculateVertexPoints=function(e,t,i,n){var o,a,s,r=Math.abs(e),d=[],l=this.pageSize[t];r=n!==l.rotation?this.getRotationAngle(n,t):0;for(var p=0;p<i.length;p++)if(1===r)o=i[p].Y?l.width-i[p].Y:l.width-i[p].y,a=i[p].X?i[p].X:i[p].x,s={x:o,y:a},d.push(s);else if(2===r){o=i[p].X?l.width-i[p].X:l.width-i[p].x,a=i[p].Y?l.height-i[p].Y:l.height-i[p].y;var h={x:o,y:a};d.push(h)}else if(3==r)o=i[p].Y?i[p].Y:i[p].y,a=i[p].X?l.height-i[p].X:l.height-i[p].x,s={x:o,y:a},d.push(s);else{o=i[p].X?i[p].X:i[p].x,a=i[p].Y?i[p].Y:i[p].y;var u={x:o,y:a};d.push(u)}return d},e}()}}]);
//# sourceMappingURL=chunk-vendors~90f3b56d.163a8ce1.js.map